if (self.CavalryLogger) { CavalryLogger.start_js(["3qGnn"]); }

__d("CommentApprovalsResponsibleUserAction",[],(function a(b,c,d,e,f,g){f.exports={APPEALED:"APPEALED",SECURED_ACCOUNT:"SECURED_ACCOUNT"};}),null);
__d("CommentPostedLiveState",[],(function a(b,c,d,e,f,g){f.exports={LIVE:"Live",ON_DEMAND:"OnDemand"};}),null);
__d("LiveVideoAnnouncementGlyph",[],(function a(b,c,d,e,f,g){f.exports={BULB:"bulb",COMMENT:"comment",EYE:"eye",LIKE:"like",LIVE_VIDEO:"live-video",CHECKMARK:"checkmark",AVATAR:"avatar"};}),null);
__d("MessengerPlatformInterfaceType",[],(function a(b,c,d,e,f,g){f.exports={UNKNOWN_INTERFACE:0,MESSENGER_INTERFACE:1,FB_INTERFACE:2};}),null);
__d("PagesPrivateReplyConstants",[],(function a(b,c,d,e,f,g){f.exports={Status:{REPLYABLE:"replyable",ALREADY_REPLIED:"already_replied",RECIPIENT_FILTER:"recipient_filter",EXPIRED:"expired",NOT_USER_CREATED:"not_user_created",CANNOT_MESSAGE:"cannot_message",MESSAGING_DISABLED:"messaging_disabled"},Type:{COMMENT_PAGE_POST:"comment_page_post",COMMENT_WALL_POST:"comment_wall_post",COMMENT_REVIEW:"comment_review",REVIEW:"review",WALL_POST:"wall_post"}};}),null);
__d("ReactionNuxTypeEnum",[],(function a(b,c,d,e,f,g){f.exports={LIKE_CLICK:"like_click",LIKE_CLICK_RENUX:"like_click_renux",SPATIAL_REACTIONS_NUX:"spatial_reactions_nux"};}),null);
__d("UFIAddCommentActionType",[],(function a(b,c,d,e,f,g){f.exports={CANCEL:"add_comment_cancel",CHANGE_CONTENT:"add_comment_change_content",RETRY_SUBMIT:"add_comment_retry_submit",SUBMIT_EDIT:"add_comment_submit_edit",SUBMIT_NEW:"add_comment_submit_new"};}),null);
__d("UFIStoryActionType",[],(function a(b,c,d,e,f,g){f.exports={CHANGE_ACCEPTED_ANSWER:"story_change_accepted_answer",COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SHOW_COMMENTS:"story_show_comments",SPAM_FETCHED:"story_spam_fetched",CHANGE_REACTION:"story_change_reaction",CHANGE_REACTION_FAILURE:"story_change_reaction_failure",CHANGE_REACTION_SUCCESS:"story_change_reaction_success",TOGGLE_REPLIES:"story_toggle_replies",FRIEND_TYPING:"story_friend_typing",SOMEONE_TYPING:"story_someone_typing",TYPING_STOPPED:"story_typing_stopped",LIVE_PIN_COMMENT:"story_live_pin_comment",LIVE_UNPIN_COMMENT:"story_live_unpin_comment"};}),null);
__d("UFIStreamingCommentsMode",[],(function a(b,c,d,e,f,g){f.exports={NONE:0,LIVE:1,ON_DEMAND:2};}),null);
__d("UFIStreamingStateType",[],(function a(b,c,d,e,f,g){f.exports={LIVE:"live",ON_DEMAND:"on_demand"};}),null);
__d("UserHovercardLocation",[],(function a(b,c,d,e,f,g){f.exports={INVALID:"unknown",NONE:"none",HC_FRIEND_BROWSER:"hc_friend_browser",HC_FRIENDS_TAB:"hc_friends_tab",HC_PROFILE_BROWSER:"hc_profile_browser",HC_STREAM:"hc_stream",HC_TIMELINE:"hc_timeline",HC_UFI:"hc_ufi",HC_REMINDER_POKE:"hc_reminder_poke",HC_REMINDER_BIRTHDAY:"hc_reminder_birthday",HC_EVENT_GUEST:"hc_event_guest",HC_UNKNOWN:"hc_unknown",HC_NUX:"hc_nux_page_suggestion",FRIEND_BROWSER:"friend_browser",FRIENDS_TAB:"friends_tab",PROFILE_BROWSER:"profile_browser",STREAM:"stream",TIMELINE:"timeline",UFI:"ufi",UFI_ADMIN:"ufi_admin",REMINDER_POKE:"reminder_poke",REMINDER_BIRTHDAY:"reminder_birthday",REMINDER_FACEVERSARY:"reminder_faceversary",REMINDER_NAMEDAY:"reminder_nameday",REMINDER_WORK_ANNIVERSARY:"reminder_work_anniversary",EVENT_GUEST:"event_guest",NUX_PAGE_SUGGESTION:"hc_nux_page_suggestion",TIMELINE_FRIENDS_BOX:"tl_fr_box",CHAT:"chat",GROUP_MEMBER_PROFILE:"group_member_profile"};}),null);
__d('UFIAsyncWrapper',['React','UFIConfig'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return this.props.children;};function j(){h.apply(this,arguments);}j.unstable_asyncUpdates=c('UFIConfig').reactFiberAsyncUFI;f.exports=j;}),null);
__d('UFICommentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$UFICommentTypedLogger1=babelHelpers['extends']({},this.$UFICommentTypedLogger1,j);return this;};h.prototype.setDuration=function(j){this.$UFICommentTypedLogger1.duration=j;return this;};h.prototype.setEvent=function(j){this.$UFICommentTypedLogger1.event=j;return this;};h.prototype.setHasPhoto=function(j){this.$UFICommentTypedLogger1.has_photo=j;return this;};h.prototype.setHasSticker=function(j){this.$UFICommentTypedLogger1.has_sticker=j;return this;};h.prototype.setIsReply=function(j){this.$UFICommentTypedLogger1.is_reply=j;return this;};h.prototype.setRequestLength=function(j){this.$UFICommentTypedLogger1.request_length=j;return this;};h.prototype.setVC=function(j){this.$UFICommentTypedLogger1.vc=j;return this;};var i={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=h;}),null);
__d('UFICommentLogger',['UFICommentTypedLogger'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$UFICommentLogger1={};this.$UFICommentLogger2={};}h.prototype.logNewCommentPost=function(i,j,k){this.$UFICommentLogger2[i]=babelHelpers['extends']({timestamp:j},k);new (c('UFICommentTypedLogger'))().setEvent('new_comment_post').setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();};h.prototype.logNewCommentReceived=function(i,j){var k=this.$UFICommentLogger2[i];if(k){var l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('new_comment_received').setDuration(l).setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();}delete this.$UFICommentLogger2[i];};h.prototype.logCommentFetch=function(i,j,k){var l=babelHelpers['extends']({timestamp:j},k);if(this.$UFICommentLogger1[i]===undefined){this.$UFICommentLogger1[i]=[l];}else this.$UFICommentLogger1[i].push(l);new (c('UFICommentTypedLogger'))().setEvent('fetch_comment').setIsReply(k.is_reply).setRequestLength(k.request_length).log();};h.prototype.logCommentFetchReceived=function(i,j){if(this.$UFICommentLogger1[i]){var k=this.$UFICommentLogger1[i].shift(),l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('fetch_comment_received').setDuration(l).setIsReply(k.is_reply).setRequestLength(k.request_length).log();if(this.$UFICommentLogger1[i].length===0)delete this.$UFICommentLogger1[i];}};f.exports=new h();}),null);
__d('UFICommentVPVs',['Map','MarauderLogger','Set'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('Map'))();function i(l,m){c('MarauderLogger').log('comment_vpv',undefined,null,'comment',m);if(!h.has(l))h.set(l,new (c('Set'))());h.get(l).add(m);}function j(l,m){if(h.has(l))return h.get(l).has(m);return false;}var k={logVPV:i,hasLoggedVPV:j};f.exports=k;}),null);
__d('UFIRootRegistry',[],(function a(b,c,d,e,f,g){'use strict';var h={},i={},j={},k=[],l={registerController:function m(n,o,p,q){h[n]=q;i[p]=[].concat(i[p]||[],[o]);j[o]=p;},registerSnowliftID:function m(n){k.push(n);},isSnowliftNode:function m(n){return k.indexOf(n)>=0;},getInstanceIDFromFTEntIdentifier:function m(n){return i[n]||null;},getFTEntIdentifierFromInstanceID:function m(n){return j[n]||null;},cleanupInstance:function m(n){var o=j[n],p=i[o];if(p&&p.includes(n)){i[o]=p.filter(function(q){return q!=n;});if(i[o].length==0)delete i[o];}delete j[n];},cleanupSnowliftNodes:function m(){k.forEach(function(n){return h[n]&&h[n]();});h={};k=[];}};f.exports=l;}),null);
__d('UFIAcceptedAnswerStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){var m;switch(l.type){case c('UFIStoryActionType').CHANGE_ACCEPTED_ANSWER:return babelHelpers['extends']({},k,(m={},m[l.comment.ftentidentifier]=l.doAccept?{type:'Accepted',id:l.comment.id}:{type:'NoneAccepted'},m));default:return k;}};j.prototype.get=function(k,l){var m=this.getState()[k];if(m)return m;return l?{type:'Accepted',id:l}:{type:'NoneAccepted'};};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFICommentEditIDStore',['FluxReduceStore','UFIAddCommentActionType','UFICentralUpdates','UFICommentActionType','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);c('UFICentralUpdates').subscribe('actor-changed',function(l,m){c('UFIDispatcherBase').dispatch({type:'PRIVATE_ACTOR_CHANGED',instanceID:true,ftentidentifier:true});});}j.prototype.getInitialState=function(){return {};};j.prototype.getForInstance=function(k){return this.getState()[k]||null;};j.prototype.reduce=function(k,l){var m;switch(l.type){case 'PRIVATE_ACTOR_CHANGED':return {};case c('UFIAddCommentActionType').CANCEL:case c('UFIAddCommentActionType').SUBMIT_EDIT:var n=k[l.instanceID],o=babelHelpers.objectWithoutProperties(k,[l.instanceID]);return o;case c('UFICommentActionType').EDIT:return babelHelpers['extends']({},k,(m={},m[l.instanceID]=l.comment.id,m));}return k;};f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIComments',['invariant','ClientIDs','CommentApprovalsResponsibleUserAction','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','randomInt'],(function a(b,c,d,e,f,g,h){'use strict';var i={},j={},k={};function l(ga){return ga in j?j[ga]:ga;}function m(ga,ha){ga.forEach(function(ia){var ja=ia.ftentidentifier,ka=c('UFIConstants').UFIPayloadSourceType,la=ia.clientid,ma=false,na=babelHelpers['extends']({},ia);if(la){delete na.clientid;ma=c('ClientIDs').isExistingClientID(la);if(ma&&j[la]){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setOriginatedLocally(true).setCommentID(ia.id).log();return;}}if(ha===ka.LIVE_SEND||ha===c('UFIConstants').UFIPayloadSourceType.STREAMING||ha===ka.USER_ACTION||ha===ka.ENDPOINT_ADD_COMMENT||ha===ka.ENDPOINT_EDIT_COMMENT)na.isunseen=true;if(ha===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND||ha===c('UFIConstants').UFIPayloadSourceType.STREAMING)na.islive=true;if(ha===ka.ENDPOINT_COMMENT_FETCH||ha===ka.ENDPOINT_ID_COMMENT_FETCH)na.fromfetch=true;if(ma&&i[la]){na.ufiinstanceid=i[la].ufiinstanceid;j[la]=ia.id;k[ia.id]=la;i[ia.id]=i[la];delete i[la];c('UFICentralUpdates').didUpdateComment(la);}fa.setComment(ia.id,new (c('ImmutableObject'))(na));c('UFICentralUpdates').didUpdateComment(ia.id);c('UFICentralUpdates').didUpdateFeedback(ja);});}function n(ga,ha){for(var ia=0;ia<ga.length;ia++){var ja=ga[ia];switch(ja.actiontype){case c('UFIConstants').UFIActionType.LIKE_ACTION:if(fa.getComment(ja.entidentifier))o(ja.clientid,ja.entidentifier,ja.hasviewerliked,ja.likecount,ja.reactiondata,ha);break;case c('UFIConstants').UFIActionType.COMMENT_LIKE:o(ja.clientid,ja.commentid,ja.viewerliked,ja.likecount,ja.reactiondata,ha);break;case c('UFIConstants').UFIActionType.REACTION:if(fa.getComment(ja.entidentifier))p(ja.entidentifier,ja);break;case c('UFIConstants').UFIActionType.COMMENT_REACTION:p(ja.commentid,ja);break;case c('UFIConstants').UFIActionType.DELETE_COMMENT:t(ja);break;case c('UFIConstants').UFIActionType.LIVE_DELETE_COMMENT:u(ja);break;case c('UFIConstants').UFIActionType.CHANGE_ACCEPTED_ANSWER:v(ja);break;case c('UFIConstants').UFIActionType.REMOVE_PREVIEW:w(ja);break;case c('UFIConstants').UFIActionType.COMMENT_SET_SPAM:x(ja);break;case c('UFIConstants').UFIActionType.COMMENT_KEEP_SPAM:y(ja);break;case c('UFIConstants').UFIActionType.COMMENT_APPEAL_SPAM:z(ja);break;case c('UFIConstants').UFIActionType.COMMENT_SECURE_ACCOUNT:aa(ja);break;case c('UFIConstants').UFIActionType.CONFIRM_COMMENT_REMOVAL:ba(ja);break;case c('UFIConstants').UFIActionType.TRANSLATE_COMMENT:r(ja);break;case c('UFIConstants').UFIActionType.COMMENT_LIKECOUNT_UPDATE:q(ja);break;case c('UFIConstants').UFIActionType.UPDATE_CONSTITUENT_TITLE:da(ja);break;}}}function o(ga,ha,ia,ja,ka,la){var ma=fa.getComment(ha);if(ma){var na={},oa=ga&&c('ClientIDs').isExistingClientID(ga);if(!oa){na.hasviewerliked=ia;na.likecount=ja;if(ka){na.reactioncount=ka.reactioncount;na.reactioncountmap=ka.reactioncountmap;na.reactioncountreduced=ka.reactioncountreduced;na.viewerreaction=ka.viewerreaction;}}if(la===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND||la===c('UFIConstants').UFIPayloadSourceType.STREAMING)new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment_like').setOriginatedLocally(Boolean(oa)).setCommentID(ha).log();na.likeconfirmhash=c('randomInt')(0,1024);ea(ha,na);}}function p(ga,ha){var ia=fa.getComment(ga);if(ia){var ja={};if(ha.clientid&&c('ClientIDs').isExistingClientID(ha.clientid)&&ha.viewerreaction!==ia.viewerreaction)return;ja.hasviewerliked=ha.hasviewerliked;ja.likecount=ha.likecount;ja.reactioncount=ha.reactioncount;ja.reactioncountmap=ha.reactioncountmap;ja.reactioncountreduced=ha.reactioncountreduced;ja.viewerreaction=ha.viewerreaction;ea(ga,ja);}}function q(ga){var ha=fa.getComment(ga.commentid);if(ha&&ga.hasviewerliked===ha.hasviewerliked){var ia={likecount:ga.likecount,likeconfirmhash:c('randomInt')(0,1024)};ea(ga.commentid,ia);}}function r(ga){var ha=ga.commentid,ia=fa.getComment(ha);if(ia){var ja={translationdata:ga.translationdata};ea(ha,ja);}}function s(ga){var ha={reportLink:ga.reportLink,commenterIsFOF:ga.commenterIsFOF,userIsMinor:ga.userIsMinor,giveFeedbackLink:ga.giveFeedbackLink,reportGroupAdminLink:ga.reportGroupAdminLink};return ha;}function t(ga){var ha=fa.getComment(ga.commentid);if(ha)ca(ha,c('UFIConstants').UFIStatus.DELETED);}function u(ga){var ha=fa.getComment(ga.commentid);if(ha&&ha.status!==c('UFIConstants').UFIStatus.DELETED)ca(ha,c('UFIConstants').UFIStatus.LIVE_DELETED);}function v(ga){ea(ga.commentid,{postacceptedanswer:ga.isaccepted?ga.commentid:null});}function w(ga){ea(ga.commentid,{attachment:null});}function x(ga){var ha=fa.getComment(ga.commentid),ia=ga.shouldHideAsSpam?c('UFIConstants').UFIStatus.SPAM_DISPLAY:null;if(ha)ca(ha,ia);}function y(ga){var ha=fa.getComment(ga.commentid);if(ha)ea(ha.id,{needsApproval:false,isApproved:true});}function z(ga){var ha=fa.getComment(ga.commentid);if(ha)ea(ha.id,{appealStatus:c('CommentApprovalsResponsibleUserAction').APPEALED,canAppeal:false,canSecure:false});}function aa(ga){var ha=fa.getComment(ga.commentid);if(ha)ea(ha.id,{appealStatus:c('CommentApprovalsResponsibleUserAction').SECURED_ACCOUNT,canAppeal:false,canSecure:false});}function ba(ga){ea(ga.commentid,s(ga));}function ca(ga,ha){ea(ga.id,{priorstatus:ga.status,status:ha});}function da(ga){var ha=fa.getComment(ga.commentid);if(ha){var ia={constituentTitle:ga.constituentTitle};ea(ga.commentid,ia);}}function ea(ga,ha){var ia=fa.getComment(ga)||new (c('ImmutableObject'))({});fa.setComment(ga,c('ImmutableObject').set(ia,ha));c('UFICentralUpdates').didUpdateComment(ia.id);c('UFICentralUpdates').didUpdateFeedback(ia.ftentidentifier);}var fa={getRenderKey:function ga(ha){return 'comment'+(ha in k?k[ha]:ha);},getComment:function ga(ha){if(ha===c('UFIConstants').unavailableCommentKey)return null;return i[l(ha)];},setComment:function ga(ha,ia){ia instanceof c('ImmutableObject')||h(0);i[l(ha)]=ia;},resetComments:function ga(ha){for(var ia in ha)delete i[l(ia)];},getCommentsForFTEntIdentifier:function ga(ha){var ia=[];for(var ja in i){var ka=i[ja];if(ka.ftentidentifier==ha)ia.push(ka);}return ia;}};c('UFICentralUpdates').subscribe('update-comments',function(ga,ha){if(ha.comments&&ha.comments.length)m(ha.comments,ha.payloadsource);if(ha.pinnedcomments&&ha.pinnedcomments.length)m(ha.pinnedcomments,ha.payloadsource);});c('UFICentralUpdates').subscribe('update-actions',function(ga,ha){if(ha.actions&&ha.actions.length)n(ha.actions,ha.payloadsource);});f.exports=fa;}),22);
__d('UFILivePinnedCommentStore',['FluxReduceStore','UFIComments','UFIDispatcherBase','UFIFeedbackTargets','UFIStoryActionType','areEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){var m;switch(l.type){case c('UFIStoryActionType').LIVE_PIN_COMMENT:case c('UFIStoryActionType').LIVE_UNPIN_COMMENT:var n=l.commentID,o=l.pinEventID;return babelHelpers['extends']({},k,(m={},m[l.ftentidentifier]={commentID:n,pinEventID:o},m));default:return k;}};j.prototype.areEqual=function(k,l){return c('areEqual')(k,l);};j.prototype.getPinnedCommentID=function(k){var l=this.getState()[k];if(!l){var m=c('UFIFeedbackTargets').getFeedbackTargetIfExists(k);if(!m)return null;return m.livepinnedcommentid||null;}return l.commentID||null;};j.prototype.getPinEventID=function(k){var l=this.getState()[k];if(!l)return null;return l.pinEventID||null;};j.prototype.getPinnedCommentAuthorID=function(k){var l=this.getPinnedCommentID(k);if(!l)return null;var m=c('UFIComments').getComment(l);return m?m.author||null:null;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIVisibility',[],(function a(b,c,d,e,f,g){'use strict';var h={VISIBLE:'visible',HIDDEN:'hidden'};f.exports=h;}),null);
__d('UFICommentVisibilityStore',['invariant','FluxReduceStore','UFICommentActionType','UFIComments','UFIDispatcherBase','UFIInstanceActionType','UFILivePinnedCommentStore','UFIRootRegistry','UFIVisibility','filterObject'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(p){var q=arguments.length<=1||arguments[1]===undefined?null:arguments[1],r=arguments.length<=2||arguments[2]===undefined?null:arguments[2];q===null&&r===null||q!==null&&r!==null||h(0);if(q)return p+'-'+q+(r?'-P':'');return p;}function l(p,q){return p===q||p.startsWith(q+'-');}function m(p){var q=c('UFIRootRegistry').getInstanceIDFromFTEntIdentifier(p);return q?q:[];}function n(p){return {instanceid:p};}i=babelHelpers.inherits(o,c('FluxReduceStore'));j=i&&i.prototype;o.prototype.getInitialState=function(){return {};};o.prototype.getVisibility=function(p,q){var r=arguments.length<=2||arguments[2]===undefined?null:arguments[2],s=r?k(q.instanceid,r.comment.fbid,r.isLivePinnedComment):k(q.instanceid);if(Object.prototype.hasOwnProperty.call(p,s))return p[s];return c('UFIVisibility').HIDDEN;};o.prototype.$UFICommentVisibilityStore1=function(p){var q=n(p);return this.getVisibility(this.getState(),q)===c('UFIVisibility').VISIBLE;};o.prototype.isFeedbackTargetVisible=function(p){var q=m(p);return q.some(function(r){return this.$UFICommentVisibilityStore1(r);}.bind(this));};o.prototype.reduce=function(p,q){var r;switch(q.type){case c('UFICommentActionType').UNMOUNTED:var s=babelHelpers['extends']({},p);delete s[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)];return s;case c('UFICommentActionType').CHANGE_VISIBILITY:return babelHelpers['extends']({},p,(r={},r[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)]=q.visibility,r));case c('UFIInstanceActionType').CHANGE_VISIBILITY:var t=c('UFIRootRegistry').getFTEntIdentifierFromInstanceID(q.instanceID),u=c('UFIComments').getCommentsForFTEntIdentifier(t);q.type===c('UFIInstanceActionType').CHANGE_VISIBILITY||h(0);var v=q.visibility;if(u){var w,x=u.reduce(function(ca,da){ca[k(q.instanceID,da.fbid,da.fbid?false:null)]=v;return ca;},{});if(t){var y=c('UFILivePinnedCommentStore').getPinnedCommentID(t);if(y){var z=c('UFIComments').getComment(y);if(z)x[k(q.instanceID,z.fbid,true)]=v;}}return babelHelpers['extends']({},p,(w={},w[k(q.instanceID)]=q.visibility,w),x);}case c('UFIInstanceActionType').REMOVE:var aa=q.instanceID,ba=k(aa);return c('filterObject')(p,function(ca,da){return da!==ba&&!l(da,aa);});}return p;};function o(){i.apply(this,arguments);}f.exports=new o(c('UFIDispatcherBase'));}),null);
__d('UFIKeyValueStore',['FluxReduceStore','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.getValueFor=function(k){return this.getState()[k]||null;};j.prototype.getStateKey=function(k){return k.instanceID;};j.prototype.getStateValue=function(k){return c('abstractMethod')('UFIKeyValueStore','getStateValue');};j.prototype.reduce=function(k,l){var m=this.getStateKey(l),n=this.getStateValue(l);if(n!==null){var o;return babelHelpers['extends']({},k,(o={},o[m]=n,o));}return k;};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('UFICommercialBreakStore',['UFIDispatcherBase','UFIInstanceActionType','UFIKeyValueStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k);};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIInstanceActionType').TOGGLE_COMMERCIAL_BREAK:return k.inCommercial;}return null;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIComposerIsTypingStore',['UFIAddCommentActionType','UFIDispatcherBase','UFIKeyValueStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getStateKey=function(k){return k.ftentidentifier;};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIAddCommentActionType').SUBMIT_EDIT:return false;case c('UFIAddCommentActionType').SUBMIT_NEW:return false;case c('UFIAddCommentActionType').CHANGE_CONTENT:var l=k.text.trim().length;return l>0;}return null;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIInteractionStore',['UFIAddCommentActionType','UFICommentActionType','UFIDispatcherBase','UFIInstanceActionType','UFIKeyValueStore','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k);};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIAddCommentActionType').CHANGE_CONTENT:case c('UFIAddCommentActionType').SUBMIT_EDIT:case c('UFIAddCommentActionType').SUBMIT_NEW:case c('UFICommentActionType').CHANGE_REACTION:case c('UFICommentActionType').EDIT:case c('UFICommentActionType').REMOVE:case c('UFICommentActionType').TOGGLE_LIKE:case c('UFICommentActionType').TOGGLE_MARK_AS_SPAM:case c('UFICommentActionType').TRANSLATE:case c('UFIInstanceActionType').CHANGE_ORDER_MODE:case c('UFIInstanceActionType').TOGGLE_COMMENTS:case c('UFIStoryActionType').PAGE_IN_COMMENTS:case c('UFIStoryActionType').SHOW_REPLIES:case c('UFIStoryActionType').TOGGLE_REPLIES:return true;}return null;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFILiveTypingStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.getNewFeedbackState=function(k){switch(k){case c('UFIStoryActionType').FRIEND_TYPING:return 'friend';case c('UFIStoryActionType').SOMEONE_TYPING:return 'someone';case c('UFIStoryActionType').TYPING_STOPPED:return false;default:return null;}};j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){var m=j.getNewFeedbackState(l.type);if(m!==null){var n;k=babelHelpers['extends']({},k,(n={},n[l.ftentidentifier]=m,n));}return k;};j.prototype.isFriendTyping=function(k){return this.getState()[k]==='friend';};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFICentralUpdatesLocalCommentAdapter',['ClientIDs','FeedbackPayloadSourceType','UFICentralUpdates','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i={},j=(h={},h[c('FeedbackPayloadSourceType').USER_ACTION]=l,h[c('FeedbackPayloadSourceType').ENDPOINT_ADD_COMMENT]=m,h);function k(){return c('UFICentralUpdates').subscribe('update-comments',function(p,q){if(q.comments){var r=j[q.payloadsource];if(r)q.comments.forEach(r);}});}function l(p){if(!c('ClientIDs').isExistingClientID(p.id))return;i[p.id]=p.ufiinstanceid;c('UFIDispatcherBase').dispatch({type:'CENTRALUPDATES_ADDED_COMMENT',instanceID:p.ufiinstanceid,ftentidentifier:p.ftentidentifier,clientID:p.id});}function m(p){if(!c('ClientIDs').isExistingClientID(p.clientid))return;var q=i[p.clientid];delete i[p.clientid];if(!q)return;c('UFIDispatcherBase').dispatch({type:'CENTRALUPDATES_SAVED_COMMENT',instanceID:q,ftentidentifier:p.ftentidentifier,clientID:p.clientid,commentID:p.id});}var n=void 0,o={subscribeOnce:function p(){if(!n){n=k();return n;}return null;}};f.exports=o;}),null);
__d('UFILocallyComposedCommentStore',['invariant','ClientIDs','FluxReduceStore','UFIAddCommentActionType','UFICentralUpdatesLocalCommentAdapter','UFIDispatcherBase','setByPath'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(m){return babelHelpers['extends']({},m);}i=babelHelpers.inherits(l,c('FluxReduceStore'));j=i&&i.prototype;function l(m){j.constructor.call(this,m);var n=c('UFICentralUpdatesLocalCommentAdapter').subscribeOnce();}l.prototype.getInitialState=function(){return {};};l.prototype.getStateForInstance=function(m){return m?this.getState()[m]||{}:{};};l.prototype.reduce=function(m,n){switch(n.type){case 'CENTRALUPDATES_ADDED_COMMENT':c('ClientIDs').isExistingClientID(n.clientID)||h(0);m=k(m);c('setByPath')(m,[n.instanceID,n.clientID],true);return m;case 'CENTRALUPDATES_SAVED_COMMENT':c('ClientIDs').isExistingClientID(n.clientID)||h(0);m=k(m);c('setByPath')(m,[n.instanceID,n.commentID],true);delete m[n.instanceID][n.clientID];return m;case c('UFIAddCommentActionType').SUBMIT_EDIT:m=k(m);c('setByPath')(m,[n.instanceID,n.comment.id],true);return m;}return m;};f.exports=new l(c('UFIDispatcherBase'));}),null);
__d('UFIActionTypes',['UFIInstanceActionType','UFIStoryActionType','UFIAddCommentActionType','UFICommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={INSTANCE:c('UFIInstanceActionType'),STORY:c('UFIStoryActionType'),ADD_COMMENT:c('UFIAddCommentActionType'),COMMENT:c('UFICommentActionType')};f.exports=h;}),null);
__d('UFIReactionPendingRequestsStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(o){return o+'-comment';}function k(o){return o+'-story';}function l(o,p){var q;return babelHelpers['extends']({},o,(q={},q[p]=(o[p]||0)+1,q));}function m(o,p){var q;return babelHelpers['extends']({},o,(q={},q[p]=(o[p]||0)-1,q));}h=babelHelpers.inherits(n,c('FluxReduceStore'));i=h&&h.prototype;n.prototype.getInitialState=function(){return {};};n.prototype.reduce=function(o,p){switch(p.type){case c('UFIActionTypes').STORY.CHANGE_REACTION:return l(o,k(p.ftentidentifier));case c('UFIActionTypes').COMMENT.CHANGE_REACTION:return l(o,j(p.fbid));case c('UFIActionTypes').STORY.CHANGE_REACTION_SUCCESS:case c('UFIActionTypes').STORY.CHANGE_REACTION_FAILURE:return m(o,k(p.ftentidentifier));case c('UFIActionTypes').COMMENT.CHANGE_REACTION_FAILURE:case c('UFIActionTypes').COMMENT.CHANGE_REACTION_SUCCESS:return m(o,j(p.fbid));}return o;};n.prototype.getPendingRequestsForComment=function(o){return this.getState()[j(o)]||0;};n.prototype.getPendingRequests=function(o){return this.getState()[k(o)]||0;};function n(){h.apply(this,arguments);}f.exports=new n(c('UFIDispatcherBase'));}),null);
__d('UFIReactionSyncStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(m){return m+'-comment';}function k(m){return m+'-story';}h=babelHelpers.inherits(l,c('FluxReduceStore'));i=h&&h.prototype;l.prototype.getInitialState=function(){return {};};l.prototype.reduce=function(m,n){var o,p,q;switch(n.type){case c('UFIActionTypes').INSTANCE.INIT:var r=n.payload,s=r.feedbacktarget?r.feedbacktarget:r.feedbacktargets&&r.feedbacktargets[0];if(!s)return m;var t=n.payload.comments.reduce(function(u,v){u[j(v.fbid)]=v.viewerreaction;return u;},{});return babelHelpers['extends']({},m,t,(o={},o[k(n.ftentidentifier)]=s.viewerreaction,o));case c('UFIActionTypes').STORY.CHANGE_REACTION_SUCCESS:return babelHelpers['extends']({},m,(p={},p[k(n.ftentidentifier)]=n.reactionType,p));case c('UFIActionTypes').COMMENT.CHANGE_REACTION_SUCCESS:return babelHelpers['extends']({},m,(q={},q[j(n.fbid)]=n.reactionType,q));default:return m;}};l.prototype.getLastKnownCommentReaction=function(m){return this.getState()[j(m)];};l.prototype.getLastKnownReaction=function(m){return this.getState()[k(m)];};function l(){h.apply(this,arguments);}f.exports=new l(c('UFIDispatcherBase'));}),null);
__d('UFISharedDispatcher',['UFIDispatcherBase','UFIFeedbackStore','UFIAcceptedAnswerStore','UFICommentEditIDStore','UFICommentVisibilityStore','UFICommercialBreakStore','UFIComposerIsTypingStore','UFIInteractionStore','UFILivePinnedCommentStore','UFILiveTypingStore','UFILocallyComposedCommentStore','UFIOrderingModeStore','UFIReactionPendingRequestsStore','UFIReactionSyncStore','UFISpamStore'],(function a(b,c,d,e,f,g){'use strict';c('UFIFeedbackStore');c('UFIAcceptedAnswerStore');c('UFICommentEditIDStore');c('UFICommentVisibilityStore');c('UFICommercialBreakStore');c('UFIComposerIsTypingStore');c('UFIFeedbackStore');c('UFIInteractionStore');c('UFILivePinnedCommentStore');c('UFILiveTypingStore');c('UFILocallyComposedCommentStore');c('UFIOrderingModeStore');c('UFIReactionPendingRequestsStore');c('UFIReactionSyncStore');c('UFISpamStore');f.exports=c('UFIDispatcherBase');}),null);
__d('UFICommentAction',['UFICommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeReaction:function i(j,k,l,m){return {type:c('UFICommentActionType').CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l,target:m};},changeReactionSuccess:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l};},changeReactionFailure:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l};},mounted:function i(j,k){return {type:c('UFICommentActionType').MOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j};},unmounted:function i(j,k){return {type:c('UFICommentActionType').UNMOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j};},changeVisibility:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j,visibility:l};},edit:function i(j,k){return {type:c('UFICommentActionType').EDIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k};},remove:function i(j,k,l,m){return {type:c('UFICommentActionType').REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m};},delete_comment_and_remove_commenter:function i(j,k,l,m){return {type:c('UFICommentActionType').DELETE_COMMENT_AND_REMOVE_COMMENTER,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m};},removePreview:function i(j,k,l){return {type:c('UFICommentActionType').REMOVE_PREVIEW,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l};},toggleLike:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_LIKE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,like:!k.hasviewerliked,target:l};},translate:function i(j,k,l){return {type:c('UFICommentActionType').TRANSLATE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,trigger:l};},markAsSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:true,target:l};},markAsNotSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:false,target:l};},inlineBan:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:true,ownerid:m,target:l};},undoInlineBan:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:false,ownerid:m,target:l};},embed:function i(j,k){return {type:c('UFICommentActionType').EMBED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k};},manageConstituentBadge:function i(j,k){return {type:c('UFICommentActionType').MANAGE_CONSTITUENT_BADGE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k};},keepSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_KEEP_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l};},appealSpam:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_APPEAL_SPAM,instanceID:j.instanceid,ftentidentifier:k.fbid,fbid:k.fbid,comment:k,target:l,feedback:m};},secureAccount:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_SECURE_ACCOUNT,instanceID:j.instanceid,ftentidentifier:k.fbid,fbid:k.fbid,comment:k,target:l,feedback:m};}};f.exports=h;}),null);
__d('UFIReactionsUtils',[],(function a(b,c,d,e,f,g){var h={getReactionData:function i(j,k,l,m){k=parseInt(k,10);var n=!!k,o=j.reactorids?j.reactorids.slice(0):[],p=o.indexOf(l),q=0;if(n){if(p<0){o.unshift(l);q=1;}}else if(p>-1){o.splice(p,1);q=-1;}var r=Math.max(j.reactioncount+q,0),s=j.reactioncountreduced;if(s&&!isNaN(s))if(m){s=m(r);}else s=r.toString();var t=j.reactioncountmap||{},u=void 0,v=j.viewerreaction;if(v&&t[v]){t[v]['default']=Math.max((t[v]['default']||0)-1,0);u=t[v].reduced;if(u&&!isNaN(u))t[v].reduced=t[v]['default'].toString();}if(n&&t[k]){t[k]['default']=(t[k]['default']||0)+1;u=t[k].reduced;if(u&&!isNaN(u))t[k].reduced=t[k]['default'].toString();}var w=j.userreactions;if(!w||Array.isArray(w))w={};if(n){w[l]=k;}else delete w[l];var x=null;if(j.reactionsentences){var y=!(v&&k);x={current:j.reactionsentences[y?'alternate':'current'],alternate:j.reactionsentences[y?'current':'alternate']};}return {reactioncount:r,reactioncountmap:t,reactioncountreduced:s,reactionsentences:x,reactorids:o,userreactions:w,viewerreaction:k};},getReactionCountMapFromSummary:function i(j){var k={};if(!j)return k;for(var l=0;l<j.length;l++){var m=j[l],n=m.feedback_reaction.key;k[n]={'default':m.reactors&&m.reactors.count,reduced:m.reactors&&m.reactors.display_count};}return k;}};f.exports=h;}),null);
__d('UFIStoryAction',['UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeAcceptedAnswer:function i(j,k,l){return {type:c('UFIStoryActionType').CHANGE_ACCEPTED_ANSWER,instanceID:j.instanceid,ftentidentifier:k.ftentidentifier,comment:k,doAccept:l};},commentsArrived:function i(j,k,l,m){return {type:c('UFIStoryActionType').COMMENTS_ARRIVED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,newOffset:k,newLength:l,source:m};},pageInComments:function i(j,k,l,m){return {type:c('UFIStoryActionType').PAGE_IN_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,direction:l,nextRange:m};},showComments:function i(j){return {type:c('UFIStoryActionType').SHOW_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},showReplies:function i(j,k,l){return {type:c('UFIStoryActionType').SHOW_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,initiatorComment:l};},spamFetched:function i(j,k,l,m){return {type:c('UFIStoryActionType').SPAM_FETCHED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,viewas:k,commentIDs:l,parentCommentID:m};},changeReaction:function i(j,k,l){var m=arguments.length<=3||arguments[3]===undefined?null:arguments[3],n=arguments.length<=4||arguments[4]===undefined?null:arguments[4];return {type:c('UFIStoryActionType').CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,contextArgs:j,reactionType:k,target:l,sphericalYaw:m,sphericalPitch:n};},changeReactionSuccess:function i(j,k){return {type:c('UFIStoryActionType').CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k};},changeReactionFailure:function i(j,k){return {type:c('UFIStoryActionType').CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k};},toggleReplies:function i(j,k){return {type:c('UFIStoryActionType').TOGGLE_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k};},friendTyping:function i(j){return {type:c('UFIStoryActionType').FRIEND_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},someoneTyping:function i(j){return {type:c('UFIStoryActionType').SOMEONE_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},typingStopped:function i(j){return {type:c('UFIStoryActionType').TYPING_STOPPED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},pinComment:function i(j,k){var l=arguments.length<=2||arguments[2]===undefined?null:arguments[2];return {type:c('UFIStoryActionType').LIVE_PIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,pinEventID:l};},unpinComment:function i(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1];return {type:c('UFIStoryActionType').LIVE_UNPIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:null,pinEventID:k};}};f.exports=h;}),null);
__d('UFIUserActionUtils',['Nectar','collectDataAttributes'],(function a(b,c,d,e,f,g){var h={trackingData:function i(j){if(!j)return {ft:{}};var k={ft:c('collectDataAttributes')(j,['ft']).ft};c('Nectar').addModuleData(k,j);return k;}};f.exports=h;}),null);
__d('UFIVideoPlayerRegistry',['EventEmitter','Map','Set','VideoPlayerReason','ViewportBounds','destroyOnUnload','getOrCreateDOMID'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('EventEmitter'))(),i=new (c('Map'))(),j=new (c('Map'))(),k=new (c('Map'))(),l=new (c('Map'))(),m=new (c('Set'))();c('destroyOnUnload')(function(){h.removeAllListeners();i.clear();j.clear();k.clear();l.clear();m.clear();});function n(q){var r=q,s=[];while(r){s.unshift(r);r=r.parentElement;}return s;}function o(q,r){var s=n(q),t=null,u=null;r.forEach(function(v){var w=v[0],x=v[1],y=n(w);for(var z=0;z<s.length;++z)if(s[z]!==y[z]){if(u===null||z>u){u=z;t=x;}break;}});return t;}var p={registerVideoPlayerController:function q(r){var s=r.getVideoID(),t=l.get(s);if(t){t.push(r);}else{t=[r];l.set(s,t);k['delete'](s);}m.forEach(function(v){return v();});var u=i.get(s);if(!u)return;u.forEach(function(v){return this._associateUFIController(v,s);}.bind(this));},addOnRegisterListener:function q(r){m.add(r);},removeOnRegisterListener:function q(r){m['delete'](r);},getAvailableVideoPlayerController:function q(r){return j.get(r);},seekAvailableVideoPlayerController:function q(r,s){var t=p.getAvailableVideoPlayerController(r);if(!t)return;if(['ready','playing','paused','finished'].includes(t.getState())){t.pause(c('VideoPlayerReason').SEEK);t.seek(s);t.play(c('VideoPlayerReason').SEEK);}},scrollToAvailableVideo:function q(r){var s=p.getAvailableVideoPlayerController(r);if(!s)return;var t=c('ViewportBounds').getElementPosition(s.getRootNode());window.scroll(0,t.y);},setAvailableVideoPlayerControllerSphericalViewport:function q(r,s){var t=p.getAvailableVideoPlayerController(r);if(!t)return;t.emit('SphericalVideoViewportTagComment/click',s);},getAvailableVideoPlayerControllerForElement:function q(r,s){if(!r)return null;var t=k.get(s)||new (c('Map'))(),u=c('getOrCreateDOMID')(r),v=t.get(u)||this._findVideoPlayerControllerForElement(r,s);t.set(u,v);k.set(s,t);return v;},getAvailableVideoPlayerControllerTimeForElement:function q(r,s){if(!r)return null;var t=p.getAvailableVideoPlayerControllerForElement(r,s);if(!t)return null;var u=t.getCurrentTimePosition();if(u>=0)return Math.floor(u);return null;},getAvailableVideoPlayerControllerTime:function q(r){var s=p.getAvailableVideoPlayerController(r);if(!s)return null;var t=s.getCurrentTimePosition();if(t>=0)return Math.floor(t);return null;},registerUFIController:function q(r,s,t){var u=r.getInstanceID(),v=r.getFluentContentToken();if(!v)return;var w=i.get(v);if(w){w.push(r);}else{w=[r];i.set(v,w);}h.addListener(u+'/register',s);h.addListener(u+'/unregister',t);this._associateUFIController(r,v);},_findVideoPlayerControllerForElement:function q(r,s){var t=l.get(s);if(!t)return null;if(t.length===1)return t[0];return o(r,t.map(function(u){return [u.getRootNode(),u];}));},_associateUFIController:function q(r,s){var t=r.getInstanceID(),u=this._findVideoPlayerControllerForElement(r.getRootNode(),s);if(!u)return;var v=j.get(t);if(v){if(c('getOrCreateDOMID')(v.getRootNode())===c('getOrCreateDOMID')(u.getRootNode()))return;h.emit(t+'/unregister');}j.set(t,u);h.emit(t+'/register',u);}};f.exports=p;}),null);
__d("XUFICommentReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/reaction\/",{reaction_type:{type:"Enum",enumType:0}});}),null);
__d("XUFIReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:false},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:false},on_demand_content_time_offset:{type:"Int"},live_content_time_offset:{type:"Int"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}});}),null);
__d('UFIReactionUserActions',['ActorURI','AsyncResponse','ChannelClientID','ClientIDs','MercuryServerDispatcher','NumberFormat','QE2Logger','UFICentralUpdates','UFICommentAction','UFIComments','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionPendingRequestsStore','UFIReactionsUtils','UFIReactionSyncStore','UFIReactionTypes','UFISharedDispatcher','UFIStoryAction','UFIUserActionUtils','UFIVideoPlayerRegistry','XUFICommentReactionController','XUFIReactionController','emptyFunction','ifRequired','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h={changeReaction:function z(aa,ba,ca,da){var ea=arguments.length<=4||arguments[4]===undefined?null:arguments[4],fa=arguments.length<=5||arguments[5]===undefined?null:arguments[5];c('UFIFeedbackTargets').getFeedbackTarget(aa,function(ga){var ha,ia=w(ga,ba);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ia});var ja=c('UFIUserActionUtils').trackingData(da),ka={};ka[c('ActorURI').PARAMETER_ACTOR]=ga.actorforpost;var la=babelHelpers['extends']({client_id:c('ClientIDs').getNewClientID(),ft_ent_identifier:aa,reaction_type:ba,root_id:ca.rootid,session_id:c('ChannelClientID').getID(),source:ca.source,feedback_referrer:ca.feedbackReferrer,instance_id:ca.instanceid},ka,ja);if(ca.fluentContentToken)(function(){var ma=ca.fluentContentToken,na=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(da,ma);if(na&&na.isSpherical())la.video_playback_timestamp=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ma);if(ca.isLiveVOD){la.on_demand_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ma);}else if(ca.islivestreaming)la.live_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ma);if(na&&na.isSpherical())c('ifRequired')('SphericalViewportControlStore',function(oa){var pa=oa.getOrientation(na.getVideoPlayerID());if(pa)if(ea!==null&&fa!==null){la.spherical_yaw=ea;la.spherical_pitch=fa;}else{la.spherical_pitch=Math.round(pa.pitch);la.spherical_yaw=Math.round(pa.yaw);}},c('emptyFunction')());})();c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),la);});},changeCommentReaction:function z(aa,ba,ca,da){var ea=c('UFIComments').getComment(aa);if(ea&&ea.__typename==='saved'&&ea.viewerreaction!=ba)c('UFIFeedbackTargets').getFeedbackTarget(ea.ftentidentifier,function(fa){var ga=c('UFIUserActionUtils').trackingData(da),ha=v(ea,fa,ba);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ha});var ia={};ia[c('ActorURI').PARAMETER_ACTOR]=fa.actorforpost;c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({comment_id:aa,legacy_id:ea.legacyid,reaction_type:ba,ft_ent_identifier:ea.ftentidentifier,source:ca.source,instance_id:ca.instanceid,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},ga,ia));});}},i={},j=c('XUFIReactionController').getURIBuilder().getURI();i[j]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r,handler:q};var k=c('XUFICommentReactionController').getURIBuilder().getURI();i[k]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,batch_if:l,batch_function:m,error_handler:u,handler:t};c('MercuryServerDispatcher').registerEndpoints(i);function l(z,aa){return z&&z.ft_ent_identifier==aa.ft_ent_identifier&&z.comment_id==aa.comment_id;}function m(z,aa){return aa;}var n='feedback_reactions_www_rollback_universe';function o(){c('QE2Logger').logExposureForUser(n);}function p(z,aa){var ba=c('UFIReactionPendingRequestsStore').getPendingRequests(z);if(ba>0)return;var ca=c('UFIReactionSyncStore').getLastKnownReaction(z);if(aa===ca)return;c('UFIFeedbackTargets').getFeedbackTarget(z,function(da){var ea=w(da,ca);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ea});});}function q(z,aa){var ba=aa.data,ca=ba.ft_ent_identifier,da=ba.reaction_type;c('UFISharedDispatcher').dispatch(c('UFIStoryAction').changeReactionSuccess({instanceid:ba.instance_id,ftentidentifier:ca},da));c('setImmediate')(function(){return p(ca,da);});}function r(z){var aa=z.request.data,ba=aa.ft_ent_identifier,ca=aa.reaction_type;o();var da=c('UFIConfig').reactionsHasReactionsRollback,ea=c('UFIConfig').reactionsHasReactionsRetry;if(ea&&!aa.retry_attempt){c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),babelHelpers['extends']({},aa,{retry_attempt:1}));return;}c('UFISharedDispatcher').dispatch(c('UFIStoryAction').changeReactionFailure({instanceid:aa.instance_id,ftentidentifier:ba},ca));if(da)c('setImmediate')(function(){return p(ba,ca);});c('AsyncResponse').defaultErrorHandler(z);}function s(z,aa,ba){var ca=c('UFIReactionPendingRequestsStore').getPendingRequestsForComment(aa.fbid);if(ca>0)return;var da=c('UFIReactionSyncStore').getLastKnownCommentReaction(aa.fbid);if(ba===da)return;c('UFIFeedbackTargets').getFeedbackTarget(z,function(ea){var fa=v(aa,ea,da);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:fa});});}function t(z,aa){var ba=aa.data,ca=ba.ft_ent_identifier,da=ba.reaction_type,ea=c('UFIComments').getComment(ba.comment_id);if(!ea||ea.__typename!=='saved')return;c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeReactionSuccess({instanceid:ba.instance_id,ftentidentifier:ca},ea,da));c('setImmediate')(function(){return s(ca,ea,da);});}function u(z){var aa=z.request.data,ba=aa.ft_ent_identifier,ca=aa.reaction_type,da=c('UFIComments').getComment(aa.comment_id);if(!da)return;o();var ea=c('UFIConfig').reactionsHasCommentReactionsRollback,fa=c('UFIConfig').reactionsHasCommentReactionsRetry;if(fa&&!aa.retry_attempt){c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({},aa,{retry_attempt:1}));return;}if(da&&da.__typename==='saved'){c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeReactionFailure({instanceid:aa.instance_id,ftentidentifier:ba},da,ca));if(ea)c('setImmediate')(function(){return s(ba,da,ca);});}c('AsyncResponse').defaultErrorHandler(z);}function v(z,aa,ba){var ca=z.id,da=[y(z,ba,ca,aa.supportedreactions||[],aa.actorforpost)],ea=ba===c('UFIReactionTypes').LIKE;if(aa.hasviewerliked!==ea){var fa=ea?1:-1;da.push({commentid:ca,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:ea,likecount:(z.likecount||0)+fa});}return da;}function w(z,aa){var ba=[x(z,aa)],ca=aa!==c('UFIReactionTypes').NONE;if(z.hasviewerliked!==ca){var da=ca?1:-1;ba.push({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:z.actorforpost,hasviewerliked:ca,likecount:(z.likecount||0)+da,entidentifier:z.entidentifier,likesentences:{current:z.likesentences.alternate,alternate:z.likesentences.current}});}return ba;}function x(z,aa){return Object.assign({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:z.actorforpost,entidentifier:z.entidentifier},c('UFIReactionsUtils').getReactionData(z,aa,z.actorforpost,c('NumberFormat').formatInteger));}function y(z,aa,ba,ca,da){var ea={};for(var fa=0;fa<ca.length;fa++){var ga=ca[fa],ha=z.reactioncountmap?z.reactioncountmap[ga]:null;ea[ga]={'default':ha?ha['default']:0,reduced:ha?ha.reduced:'0'};}var ia=c('UFIReactionsUtils').getReactionData({viewerreaction:z.viewerreaction,reactioncount:z.reactioncount,reactioncountreduced:z.reactioncountreduced,reactioncountmap:ea,reactorids:z.viewerreaction?[da]:[]},aa,da);return {actiontype:c('UFIConstants').UFIActionType.COMMENT_REACTION,commentid:ba,hasviewerliked:!!aa,likecount:ia.reactioncountmap[1]['default'],reactioncount:ia.reactioncount,reactioncountmap:ia.reactioncountmap,reactioncountreduced:ia.reactioncountreduced,viewerreaction:aa};}f.exports=h;}),null);
__d('UFIPagedCommentListImpl',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.actorID=null;this.basePermalink=null;this.commentPermalinks=Object.create(null);this.count=0;this.dataSource=new (c('KeyedCallbackManager'))();this.deletedComments=Object.create(null);this.deletedCount=0;this.lastRequestedLength=0;this.lastRequestedOffset=0;this.feedbackTargetID=i;c('UFIFeedbackTargets').getFeedbackTarget(this.feedbackTargetID,function(j){this.actorID=j.actorforpost;this.basePermalink=j.permalink;}.bind(this));}h.prototype.setClientHasAll=function(i){};h.prototype.addOrUpdateComment=function(i){if(i.__typename==='local'){this.$UFIPagedCommentListImpl1(i.id);}else this.$UFIPagedCommentListImpl2(i.id,i.clientid,i.legacyid);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};h.prototype.$UFIPagedCommentListImpl1=function(i){this.dataSource.setResource(this.count,i);this.count++;};h.prototype.$UFIPagedCommentListImpl2=function(i,j,k){var l=j&&c('ClientIDs').isExistingClientID(j),m=this.dataSource.getAllResources(),n={};for(var o in m){var p=m[o];n[p]=o;}if(l&&j&&j in n){n[i]=n[j];var q=n[j];this.dataSource.setResource(q,i);if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(j,Date.now());}else if(!n[i]&&j)this.$UFIPagedCommentListImpl1(i);if(k&&i in n)this.commentPermalinks[i]=this.buildCommentPermalink(i,k,n[i]);};h.prototype.addCommentIDs=function(i,j,k){var l={};for(var m=0;m<j;m++)l[i+m]=k[m]||c('UFIConstants').unavailableCommentKey;this.dataSource.addResourcesAndExecute(l);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};h.prototype.getComments=function(i,j,k,l){var m=new Array(j).fill().map(function(s,t){return t+i;}),n=this.dataSource.getUnavailableResourcesFromRequest(m);if(n.length){var o=Math.min.apply(Math,n),p=Math.max.apply(Math,n),q=o,r=p-o+1;if(q<this.lastRequestedOffset||q+r>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=q;this.lastRequestedLength=r;this.fetchComments(q,r,k);}}else this.dataSource.executeOrEnqueue(m,function(s){return l(this.commentsFromCommentIDs(s,i,j));}.bind(this));};h.prototype.getCommentsOrThrow=function(i){var j=i.getLength(),k=i.getOffset(),l={};new Array(j).fill().forEach(function(m,n){var o=n+k,p=this.dataSource.getResource(o);if(!p)throw new Error('Tried to get nonexistent comment');l[o]=p;}.bind(this));return this.commentsFromCommentIDs(l,k,j);};h.prototype.fetchComments=function(i,j,k){};h.prototype.commentsFromCommentIDs=function(i,j,k){return {};};h.prototype.reset=function(){var i=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return i;};h.prototype.deleteComment=function(i){if(!(i in this.deletedComments)){this.deletedComments[i]=true;this.deletedCount++;}};h.prototype.updateCommentCount=function(i){this.count=i;this.deletedCount=0;};h.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};h.prototype.getCommentCount=function(){return this.count;};h.prototype.getDeletedCount=function(){return this.deletedCount;};h.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount;};h.prototype.getBasePermalink=function(){return this.basePermalink;};h.prototype.buildCommentPermalink=function(i,j,k){return null;};h.prototype.getPermalinkForComment=function(i){return this.commentPermalinks[i];};f.exports=h;}),null);
__d('UFIReplyCommentListImpl',['ActorURI','JSLogger','MercuryServerDispatcher','UFICommentLogger','UFIComments','UFIConfig','UFIPagedCommentListImpl','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('JSLogger').create('ufi_reply_comment_list');h=babelHelpers.inherits(k,c('UFIPagedCommentListImpl'));i=h&&h.prototype;function k(l,m,n){i.constructor.call(this,l);this.parentCommentID=m;this.containerOrderingMode=n;}k.prototype.fetchComments=function(l,m,n){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:m,is_reply:true});var o={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[l],lengths:[m],feed_context:n?n.feedContext:null,numpagerclicks:n?n.numPagerClicks:null,containerorderingmode:this.containerOrderingMode,translate_all:n?n.translateAll:null};if(!n||!n.viewAs)o[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/reply_fetch.php',o);};k.prototype.commentsFromCommentIDs=function(l,m,n){var o={};for(var p=0;p<n;p++){var q=c('UFIComments').getComment(l[m+p]);if(q)o[m+p]=q;}return o;};k.prototype.reset=function(){var l=i.reset.call(this),m={};for(var n in l){var o=l[n];m[o]=true;}c('UFIComments').resetComments(m);return l;};k.prototype.getParentCommentID=function(){return this.parentCommentID;};k.prototype.buildCommentPermalink=function(l,m,n){if(!this.basePermalink)return null;var o=this.getParentCommentID().split('_'),p=m;if(o.length===2){p=o[1];}else j.error('Bad reply comment ID: '+this.getParentCommentID());return new (c('URI'))(this.basePermalink).addQueryData({comment_id:p,reply_comment_id:m}).toString();};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});f.exports=k;}),null);
__d('UFIReplyCommentList',['UFICentralUpdates','UFIComments','UFIConstants','UFIReplyCommentListImpl','getObjectValues'],(function a(b,c,d,e,f,g){'use strict';var h={},i={getCommentList:function k(l,m,n){if(!h[m])h[m]={};if(!h[m][n]){var o=new (c('UFIReplyCommentListImpl'))(l,m,n),p=i.getReplyListsForParentCommentID(String(m));if(p.length)o.updateCommentCount(p[0].getCommentCount());h[m][n]=o;}return h[m][n];},getReplyListsForParentCommentID:function k(l){return c('getObjectValues')(h[l]||{});},resetWithContext:function k(l,m,n,o){var p=h[m][o];if(!p)return;p.reset();p.actorID=n;}};function j(k){var l=c('UFIComments').getComment(k.commentid);if(!l)return;var m=l.id,n=l.parentcommentid;if(!n)return;if(l.status!==c('UFIConstants').UFIStatus.DELETED&&l.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getReplyListsForParentCommentID(n).forEach(function(o){o.deleteComment(m);});}c('UFICentralUpdates').subscribe('update-actions',function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:j(n);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(k,l){var m=l.commentlists;if(m&&m.replies&&Object.keys(m).length)for(var n in m.replies){var o=m.replies[n],p=o.ftentidentifier,q=o.containerorderingmode,r=i.getCommentList(String(p),String(n),q);r.addCommentIDs(o.range.offset,o.range.length,o.values);r.updateCommentCount(o.count);}});c('UFICentralUpdates').subscribe('update-comments',function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){var n=m.parentcommentid;if(!n)return;i.getReplyListsForParentCommentID(String(n)).forEach(function(o){o.addOrUpdateComment(m);});});});f.exports=i;}),22);
__d('UFIToplevelPagedCommentListImpl',['ActorURI','MercuryServerDispatcher','UFICommentLogger','UFIComments','UFIConfig','UFIOrderingModeStore','UFIPagedCommentListImpl','URI','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIPagedCommentListImpl'));i=h&&h.prototype;function j(k,l){i.constructor.call(this,k);this.clientHasAll=false;this.orderReversed=c('UFIOrderingModeStore').isInverted(l);this.orderingMode=l;this.clientHasAll=false;}j.prototype.fetchComments=function(k,l,m){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:l,is_reply:false});var n={ft_ent_identifier:this.feedbackTargetID,viewas:m&&m.viewAs?m.viewAs+'':null,source:m&&m.feedbackSource,offset:k,length:l,orderingmode:this.orderingMode,feed_context:m?m.feedContext:null,numpagerclicks:m?m.numPagerClicks:null,translate_all:m?m.translateAll:null,clientcommentcount:this.count};if(this.orderingMode!==c('WebCommentViewOption').RECENT_ACTIVITY||this.orderingMode!==c('WebCommentViewOption').RANKED_THREADED||this.orderingMode!==c('WebCommentViewOption').FILTERED)delete n.clientcommentcount;if(!m||!m.viewAs)n[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/comment_fetch.php',n);};j.prototype.commentsFromCommentIDs=function(k,l,m){var n={},o=l,p=l+m-1;for(var q=0;q<m;q++){var r=this.orderReversed?p-q:o+q,s=c('UFIComments').getComment(k[r]);if(s)n[l+q]=s;}return n;};j.prototype.getOrderingMode=function(){return this.orderingMode;};j.prototype.setClientHasAll=function(k){this.clientHasAll=k;};j.prototype.getClientHasAll=function(){return this.clientHasAll;};j.prototype.buildCommentPermalink=function(k,l,m){if(!this.basePermalink)return null;return new (c('URI'))(this.basePermalink).addQueryData({comment_id:l}).toString();};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});f.exports=j;}),null);
__d('UFIToplevelStreamedCommentList',['invariant','ClientIDs','Map','UFICentralUpdates','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','UFIRange','UFIStreamingStateType'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){this.feedbackTargetID=j;this.commentIDs=[];this.deletedCount=0;this.totalCommentCount=0;}i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};i.prototype.getClientHasAll=function(){return false;};i.prototype.getActualCommentCount=function(){return this.commentIDs.length;};i.prototype.getCommentCount=function(){return this.totalCommentCount;};i.prototype.getDisplayedCommentCount=function(){return this.getCommentCount()-this.getDeletedCount();};i.prototype.getDeletedCount=function(){return this.deletedCount;};i.prototype.getPermalinkForComment=function(j){return '';};i.prototype.getComments=function(j,k,l,m){m(this.getCommentsOrThrow(new (c('UFIRange'))(j,k),l));};i.prototype.getCommentsOrThrow=function(j,k){var l=j.getLength(),m=j.getOffset();m===0||h(0);var n=k.streamingOrderReversed,o={};for(var p=0;p<Math.min(l,this.commentIDs.length);++p){var q=n?this.commentIDs.length-1-p:p,r=c('UFIComments').getComment(this.commentIDs[q]);if(r)o[p]=r;}return o;};i.prototype.$UFIToplevelStreamedCommentList3=function(){var j=this.commentIDs;this.commentIDs=[];return j;};i.prototype.hasComment=function(j){for(var k=0;k<this.commentIDs.length;++k)if(this.commentIDs[k]===j.id)return true;return false;};i.prototype.addCommentIDs=function(j,k,l){};i.prototype.setClientHasAll=function(j){};i.prototype.addOrUpdateComment=function(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=j.clientid;if(l&&c('ClientIDs').isExistingClientID(l)){for(var m=0;m<this.commentIDs.length;++m)if(this.commentIDs[m]===l){this.commentIDs[m]=j.id;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(l,Date.now());}}else if(k||j.__typename==='local'){if(this.hasComment(j))return;this.commentIDs.push(j.id);if(k!==c('UFIStreamingStateType').ON_DEMAND)this.totalCommentCount+=1;}if(this.commentIDs.length>50)this.commentIDs.shift();c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};i.prototype.deleteComment=function(j){this.deletedCount+=1;var k=[];for(var l=0;l<this.commentIDs.length;++l){var m=this.commentIDs[l];if(m!==j)k.push(m);}this.commentIDs=k;};i.prototype.updateCommentCount=function(j){this.totalCommentCount=j;this.deletedCount=0;};i.getCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l){l=new (c('Map'))();i.$UFIToplevelStreamedCommentList1.set(j,l);}var m=l.get(k);if(!m){m=new i(j);l.set(k,m);}return m;};i.getExistingCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l)return null;return l.get(k);};i.getAllExistingCommentLists=function(j){var k=i.$UFIToplevelStreamedCommentList1.get(j);if(!k)return [];return Array.from(k.values());};i.$UFIToplevelStreamedCommentList4=function(j,k){var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){k.forEach(function(n){l[n]=true;});return;}var m={};k.forEach(function(n){m[n]=true;});i.$UFIToplevelStreamedCommentList2.set(j,m);};i.resetCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.getExistingCommentList(j,k);if(!l)return;i.$UFIToplevelStreamedCommentList4(j,l.$UFIToplevelStreamedCommentList3());};i.resetAllCommentLists=function(j){var k=i.getAllExistingCommentLists(j);if(k.length===0)return;k.forEach(function(m){i.$UFIToplevelStreamedCommentList4(j,m.$UFIToplevelStreamedCommentList3());});var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){i.$UFIToplevelStreamedCommentList2['delete'](j);c('UFIComments').resetComments(l);}};i.GLOBAL_ID='GLOBAL_ID';i.$UFIToplevelStreamedCommentList1=new (c('Map'))();i.$UFIToplevelStreamedCommentList2=new (c('Map'))();c('UFICentralUpdates').subscribe('update-actions',function(j,k){if(!k.actions)return;k.actions.forEach(function(l){if(l.actiontype!==c('UFIConstants').UFIActionType.DELETE_COMMENT)return;var m=c('UFIComments').getComment(l.commentid);if(!m)return;var n=m.id,o=m.ftentidentifier,p=m.parentcommentid;if(p)return;if(l.islocal||m.status!==c('UFIConstants').UFIStatus.DELETED&&m.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getAllExistingCommentLists(o).forEach(function(q){return q.deleteComment(n);});});});c('UFICentralUpdates').subscribe('update-comments',function(j,k){if(!k.comments)return;var l=k.targetufiinstanceid;k.comments.forEach(function(m){if(m.parentcommentid)return;if(l){i.getCommentList(m.ftentidentifier,l).addOrUpdateComment(m,k.streamingstate);}else i.getAllExistingCommentLists(m.ftentidentifier).forEach(function(n){n.addOrUpdateComment(m,k.streamingstate);});});});c('UFICentralUpdates').subscribe('update-feedback',function(j,k){var l=k.feedbacktarget?k.feedbacktarget:k.feedbacktargets&&k.feedbacktargets[0];if(!l)return;i.getAllExistingCommentLists(l.entidentifier).forEach(function(m){return m.updateCommentCount(l.commentcount);});});f.exports=i;}),22);
__d('UFIToplevelPagedCommentList',['UFICentralUpdates','UFIComments','UFIConstants','UFIReplyCommentList','UFIToplevelPagedCommentListImpl','UFIToplevelStreamedCommentList','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h={},i={getCommentList:function k(l,m){if(!h[l])h[l]={};if(!h[l][m]){var n=new (c('UFIToplevelPagedCommentListImpl'))(l,m),o=i.getCommentListsForFeedbackTargetID(l);if(o.length)n.updateCommentCount(o[0].getCommentCount());h[l][m]=n;}return h[l][m];},getCommentListsForFeedbackTargetID:function k(l){var m=[],n=h[l]||{};for(var o in n)m.push(n[o]);return m;},getPagedCommentCountForFeedbackTargetID:function k(l){var m=i.getCommentListsForFeedbackTargetID(l);return m.length?m[0].getCommentCount():null;},getDisplayedCommentCountForFeedbackTargetID_UNSAFE:function k(l){var m=i.getCommentListsForFeedbackTargetID(l),n=m.length?m[0].getDisplayedCommentCount():null,o=c('UFIToplevelStreamedCommentList').getAllExistingCommentLists(l),p=o.length?o[0].getDisplayedCommentCount():null;if(n===null&&p===null)return null;return Math.max(n||0,p||0);},resetCommentListsForFeedbackTargetID:function k(l){if(!h[l])return;var m={};for(var n in h[l]){var o=h[l][n],p=o.reset();for(var q in p){var r=p[q];m[r]=true;}}c('UFIComments').resetComments(m);},resetCommentListsWithContext:function k(l,m){var n=h[l];if(!n)return;var o={};for(var p in n){var q=n[p];q.actorID=m;var r=q.reset();for(var s in r){var t=r[s];o[t]=true;c('UFIReplyCommentList').resetWithContext(l,t,m,p);}}c('UFIComments').resetComments(o);}};function j(k){var l=c('UFIComments').getComment(k.commentid);if(!l)return;var m=l.id,n=l.ftentidentifier,o=l.parentcommentid;if(o)return;if(k.islocal||l.status!==c('UFIConstants').UFIStatus.DELETED&&l.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getCommentListsForFeedbackTargetID(n).forEach(function(p){p.deleteComment(m);});}c('UFICentralUpdates').subscribe('update-actions',function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:j(n);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(k,l){var m=l.commentlists;if(m&&m.comments&&Object.keys(m).length)for(var n in m.comments)for(var o in m.comments[n]){var p=m.comments[n][o],q=i.getCommentList(String(n),o);q.addCommentIDs(p.range.offset,p.range.length,p.values);q.setClientHasAll(!!p.forcenotpageable);}});c('UFICentralUpdates').subscribe('update-comments',function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){if(m.parentcommentid)return;var n=m.ftentidentifier;i.getCommentListsForFeedbackTargetID(String(n)).forEach(function(o){o.addOrUpdateComment(m);});});});c('UFICentralUpdates').subscribe('update-feedback',function(k,l){var m,n=l.feedbacktarget?l.feedbacktarget:l.feedbacktargets&&l.feedbacktargets[0];if(n)(function(){var o=n.entidentifier,p=n.defaultcommentorderingmode,q={};if(p)q[p]=true;if(n.orderingmodes)n.orderingmodes.forEach(function(s){if(s.value===c('WebCommentViewOption').LIVE_STREAMING)return;q[s.value]=true;});for(var r in q)i.getCommentList(String(o),String(r)).updateCommentCount(n.commentcount);})();});f.exports=i;}),22);
__d("XTownHallController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/townhall\/",{address:{type:"String"},nux_shown:{type:"Bool",defaultValue:false},ref:{type:"Enum",enumType:1},term:{type:"String"},override_address:{type:"Bool",defaultValue:false},campaign:{type:"String"},setting_nux:{type:"Bool",defaultValue:false}});}),null);
__d("XUFIActorChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/actor\/change\/",{});}),null);
__d("XUFIAddCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/add\/comment\/",{});}),null);
__d("XUFICommentAcceptAnswerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/answer\/accept\/",{});}),null);
__d("XUFICommentAppealSpamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/appeal_spam\/",{});}),null);
__d("XUFICommentKeepSpamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/keep_spam\/",{});}),null);
__d("XUFICommentLikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/like\/",{});}),null);
__d("XUFICommentSecureAccountController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/secure_account\/",{});}),null);
__d("XUFIDeleteCommentAndRemoveCommenterController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/deletecommentandremovecommenter\/",{});}),null);
__d("XUFIDeleteCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/delete\/comment\/",{});}),null);
__d("XUFIEditCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/edit\/comment\/",{});}),null);
__d("XUFIHideCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/hide\/comment\/",{});}),null);
__d("XUFILikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/like\/",{});}),null);
__d("XUFITranslateCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/translate\/comment\/",{});}),null);
__d('UFIUserActions',['errorCode','fbt','invariant','ActorURI','AsyncResponse','Bootloader','ChannelClientID','ClientIDs','CommentPostedLiveState','ImmutableObject','MercuryServerDispatcher','UFICentralUpdates','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionUserActions','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFIUserActionUtils','UFIVideoPlayerRegistry','UnicodeBidi','XTownHallController','XUFIActorChangeController','XUFIAddCommentController','XUFICommentAcceptAnswerController','XUFICommentAppealSpamController','XUFICommentKeepSpamController','XUFICommentLikeController','XUFICommentSecureAccountController','XUFIDeleteCommentAndRemoveCommenterController','XUFIDeleteCommentController','XUFIEditCommentController','XUFIHideCommentController','XUFILikeController','XUFITranslateCommentController','goURI','ifRequired'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k={BAN:'ban',UNDO_BAN:'undo_ban'},l={changeActor:function na(oa,pa){c('UFIFeedbackTargets').getFeedbackTarget(oa,function(qa){var ra;c('UFIToplevelPagedCommentList').resetCommentListsWithContext(oa,pa);c('UFIToplevelStreamedCommentList').resetAllCommentLists(oa);c('UFICentralUpdates').inform('actor-changed',{actorID:pa});var sa=(ra={from_actor_id:qa.actorforpost,ft_ent_identifier:oa},ra[c('ActorURI').PARAMETER_ACTOR]=pa,ra),ta=c('XUFIActorChangeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ta,sa);});},changeCommentLike:function na(oa,pa,qa){var ra,sa=c('UFIComments').getComment(oa);if(sa&&sa.__typename==='saved'&&sa.hasviewerliked!=pa)(function(){var ta=qa.target?c('UFIUserActionUtils').trackingData(qa.target):{},ua=pa?1:-1,va={commentid:oa,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:pa,likecount:(sa.likecount||0)+ua};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]});c('UFIFeedbackTargets').getFeedbackTarget(sa.ftentidentifier,function(wa){var xa={};xa[c('ActorURI').PARAMETER_ACTOR]=wa.actorforpost;var ya=c('XUFICommentLikeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ya,babelHelpers['extends']({comment_id:oa,legacy_id:sa.legacyid,like_action:pa,ft_ent_identifier:sa.ftentidentifier,source:qa.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},ta,xa));});})();},_getAttachment:function na(oa){return oa;},_getLocalComment:function na(oa,pa,qa,ra,sa,ta){var ua=c('ClientIDs').getNewClientID(),va=c('UnicodeBidi').isDirectionLTR(qa)?'ltr':'rtl',wa=this._getAttachment(sa.attachedsticker);return {__typename:'local',ftentidentifier:pa,body:{text:qa,dir:va},author:oa.actorforpost,cancomment:false,clientid:null,fbid:null,id:ua,ufiinstanceid:sa.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:sa.replyid,replycommentparentid:sa.replycommentparentid,attachment:wa,photo_comment:sa.attachedphoto,video_comment:sa.attachedvideo,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")},photoTextTagID:sa.photoTextTagID,isPhotoTag:sa.isPhotoTag,photoTagX:sa.photoTagX,photoTagY:sa.photoTagY,videoTimeOffset:ta,postedLiveState:sa.islivestreaming?c('CommentPostedLiveState').LIVE:c('CommentPostedLiveState').ON_DEMAND};},addComment:function na(oa,pa,qa,ra){c('UFIFeedbackTargets').getFeedbackTarget(oa,function(sa){var ta=this.createComment(oa,pa,qa,ra);if(!ta)return;var ua={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:sa.actorforpost,hasviewersubscribed:true,entidentifier:sa.entidentifier},va={actiontype:c('UFIConstants').UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:sa.targetfbid};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta],actions:[ua,va]});}.bind(this));},createComment:function na(oa,pa,qa,ra){var sa=c('UFIFeedbackTargets').getFeedbackTargetIfExists(oa);if(!(sa&&sa.actorforpost))return null;var ta=null;if(ra.isBroadcasterUFI){ta=c('ifRequired')('LiveVideoBroadcastBroadcastStore',function(xa){return xa.getCurrentBroadcastTime();});}else if(ra.fluentContentToken&&(ra.isLiveVOD||ra.islivestreaming||ra.enableVODCommentTimestamps)){var ua=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(ra.target,ra.fluentContentToken)||0;if(ra.isLiveVOD||ra.islivestreaming){ta=ua;}else{var va=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(ra.target,ra.fluentContentToken);if(va!=null&&ua>0&&ua<Math.floor(va.getPlaybackDuration()))ta=ua;}}var wa=this._getLocalComment(sa,oa,pa,qa,ra,ta);this._sendCommentToServer(oa,sa.actorforpost,pa,qa,ra,wa.id,ta);return wa;},_sendCommentToServer:function na(oa,pa,qa,ra,sa,ta,ua){var va=null;if(sa.reply_fbid){va=sa.reply_fbid;}else if(sa.replyid){var wa=c('UFIComments').getComment(sa.replyid);wa||j(0);va=wa.fbid;}var xa=void 0;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentPost(ta,sa.timestamp||0,{has_photo:!!sa.attachedphoto,has_video:!!sa.attachedvideo,has_sticker:!!sa.attachedsticker,is_reply:!!sa.replyid});var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=pa;var za=c('XUFIAddCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({ft_ent_identifier:oa,comment_text:ra,source:sa.source,client_id:ta,session_id:c('ChannelClientID').getID(),reply_fbid:va,parent_comment_id:sa.parent_comment_id||sa.replyid,reply_comment_parent_id:sa.replycommentparentid,rootid:sa.rootid,clp:xa,attached_sticker_fbid:sa.attachedsticker?sa.attachedsticker.fbid:0,attached_photo_fbid:sa.attachedphoto?sa.attachedphoto.fbid:0,attached_video_fbid:sa.attachedvideo?sa.attachedvideo.fbid:0,attached_share_url:sa.attachedshareurl,feedback_referrer:sa.feedbackReferrer,feed_context:sa.feedcontext,video_time_offset:ua,is_live_streaming:sa.islivestreaming,is_markdown:sa.isMarkdown},c('UFIUserActionUtils').trackingData(sa.target),ya,{photo_text_tag_id:sa.photoTextTagID,is_private:sa.isPrivate,is_photo_tag:sa.isPhotoTag,photo_fbid:sa.photoFBID,photo_tag_x:sa.photoTagX,photo_tag_y:sa.photoTagY}));},_hasCommentTextChanged:function na(oa,pa){return !!oa.body&&oa.body.text!=pa;},_hasCommentPhotoChanged:function na(oa,pa){return !!((oa||pa)&&!(oa&&pa)||oa&&pa&&oa.fbid!=pa.fbid);},_hasCommentVideoChanged:function na(oa,pa){return !!((oa||pa)&&!(oa&&pa)||oa&&pa&&oa.fbid!=pa.fbid);},_hasCommentStickerChanged:function na(oa,pa){return !!((oa||pa)&&!(oa&&pa)||oa&&oa.type=='sticker'&&pa&&oa.fbid!=pa.fbid);},_hasCommentShareURLChanged:function na(oa,pa){if(pa){return true;}else return Boolean(oa&&oa.type=='share');},editComment:function na(oa,pa,qa,ra){var sa=c('UFIUserActionUtils').trackingData(ra.target),ta=c('UFIComments').getComment(oa);if(!ta)return;var ua=this._hasCommentTextChanged(ta,pa)||this._hasCommentPhotoChanged(ta.photo_comment,ra.attachedPhoto)||this._hasCommentStickerChanged(ta.attachment,ra.attachedSticker)||this._hasCommentVideoChanged(ta.video_comment,ra.attachedVideo)||this._hasCommentShareURLChanged(ta.attachment,ra.attachedShareURL);ta=c('ImmutableObject').set(ta,{status:c('UFIConstants').UFIStatus.PENDING_EDIT,body:{text:pa},editnux:null,attachment:ra.attachedSticker,photo_comment:ra.attachedPhoto,video_comment:ra.attachedVideo});if(ua)ta=c('ImmutableObject').set(ta,{originalTimestamp:ta.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]});c('UFIFeedbackTargets').getFeedbackTarget(ta.ftentidentifier,function(va){var wa={};wa[c('ActorURI').PARAMETER_ACTOR]=va.actorforpost;var xa=c('XUFIEditCommentController').getURIBuilder().getURI();if(ta)c('MercuryServerDispatcher').trySend(xa,babelHelpers['extends']({ft_ent_identifier:ta.ftentidentifier,comment_text:qa,source:ra.source,comment_id:ta.id,parent_comment_id:ta.parentcommentid,attached_sticker_fbid:ra.attachedSticker?ra.attachedSticker.fbid:0,attached_photo_fbid:ra.attachedPhoto?ra.attachedPhoto.fbid:0,attached_video_fbid:ra.attachedVideo?ra.attachedVideo.fbid:0,attached_share_url:ra.attachedShareURL},sa,wa));});},translateComments:function na(oa,pa,qa,ra){var sa=c('XUFITranslateCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(sa,{ft_ent_identifier:oa,comment_ids:pa,source:ra.source,trigger:qa});},setHideAsSpam:function na(oa,pa,qa){var ra=c('UFIUserActionUtils').trackingData(qa.target),sa=c('UFIComments').getComment(oa),ta={commentid:oa,actiontype:c('UFIConstants').UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:pa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ta]});if(sa)c('UFIFeedbackTargets').getFeedbackTarget(sa.ftentidentifier,function(ua){var va={};va[c('ActorURI').PARAMETER_ACTOR]=ua.actorforpost;var wa=c('XUFIHideCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(wa,babelHelpers['extends']({comment_id:oa,spam_action:pa,ft_ent_identifier:sa.ftentidentifier,source:qa.source},ra,va));});},keepSpam:function na(oa,pa){var qa=c('UFIUserActionUtils').trackingData(pa.target),ra=c('UFIComments').getComment(oa),sa={commentid:oa,actiontype:c('UFIConstants').UFIActionType.COMMENT_KEEP_SPAM};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});if(ra)c('UFIFeedbackTargets').getFeedbackTarget(ra.ftentidentifier,function(ta){var ua={};ua[c('ActorURI').PARAMETER_ACTOR]=ta.actorforpost;var va=c('XUFICommentKeepSpamController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(va,babelHelpers['extends']({comment_id:oa,ft_ent_identifier:ra.ftentidentifier,source:pa.source},qa,ua));c('Bootloader').loadModules(["SimpleXUIDialog"],function(wa){wa.show(i._("This comment is now visible on your post."),i._("Comment Restored"));},'UFIUserActions');});},appealSpam:function na(oa,pa,qa){var ra=c('UFIUserActionUtils').trackingData(qa.target),sa=c('UFIComments').getComment(oa),ta={commentid:oa,actiontype:c('UFIConstants').UFIActionType.COMMENT_APPEAL_SPAM};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ta]});if(sa)c('UFIFeedbackTargets').getFeedbackTarget(sa.ftentidentifier,function(ua){var va={};va[c('ActorURI').PARAMETER_ACTOR]=ua.actorforpost;var wa=c('XUFICommentAppealSpamController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(wa,babelHelpers['extends']({comment_id:oa,ft_ent_identifier:sa.ftentidentifier,source:qa.source},ra,va));c('Bootloader').loadModules(["SimpleXUIDialog"],function(xa){xa.show(i._("We'll let {author_name} know that you don't think your comment was spam.",[i.param('author_name',pa)]),i._("Thanks for Letting Us Know"));},'UFIUserActions');});},secureAccount:function na(oa,pa){var qa=c('UFIUserActionUtils').trackingData(pa.target),ra=c('UFIComments').getComment(oa),sa={actiontype:c('UFIConstants').UFIActionType.COMMENT_SECURE_ACCOUNT,commentid:oa,islocal:true,oneclick:pa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});if(ra)c('UFIFeedbackTargets').getFeedbackTarget(ra.ftentidentifier,function(ta){var ua={};ua[c('ActorURI').PARAMETER_ACTOR]=ta.actorforpost;var va=c('XUFICommentSecureAccountController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(va,babelHelpers['extends']({comment_id:ra.id,ft_ent_identifier:ra.ftentidentifier,source:pa.source},qa,ua));});},removeComment:function na(oa,pa){var qa=c('UFIUserActionUtils').trackingData(pa.target),ra=c('UFIComments').getComment(oa),sa={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:oa,islocal:true,oneclick:pa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});if(ra&&ra.__typename==='saved')c('UFIFeedbackTargets').getFeedbackTarget(ra.ftentidentifier,function(ta){var ua={};ua[c('ActorURI').PARAMETER_ACTOR]=ta.actorforpost;var va=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(va,babelHelpers['extends']({comment_id:ra.id,comment_legacyid:ra.legacyid,ft_ent_identifier:ra.ftentidentifier,one_click:pa.oneclick,source:pa.source,client_id:c('ClientIDs').getNewClientID()},qa,ua));});},deleteCommentAndRemoveCommenter:function na(oa,pa,qa,ra,sa,ta){var ua=c('UFIUserActionUtils').trackingData(pa.target),va=c('UFIComments').getComment(oa),wa={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT_REMOVE_COMMENTER,commentid:oa,islocal:true,oneclick:pa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});if(va&&va.__typename==='saved')c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(xa){var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=xa.actorforpost;var za=c('XUFIDeleteCommentAndRemoveCommenterController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({comment_id:va.id,comment_legacyid:va.legacyid,ft_ent_identifier:va.ftentidentifier,one_click:pa.oneclick,source:pa.source,delete_posts:qa,delete_comments:ra,decline_pending_members:sa,block_permanently:ta,client_id:c('ClientIDs').getNewClientID()},ua,ya));});},changeAcceptedAnswer:function na(oa,pa){c('MercuryServerDispatcher').trySend(aa,{ft_ent_identifier:oa.id,do_accept:pa});},banUser:function na(oa,pa,qa,ra){var sa=qa?k.BAN:k.UNDO_BAN;c('MercuryServerDispatcher').trySend('/ajax/ufi/ban_user.php',{page_id:pa,commenter_id:oa.author,action:sa,comment_id:oa.id,client_side:true});},changeSubscribe:function na(oa,pa,qa){c('UFIFeedbackTargets').getFeedbackTarget(oa,function(ra){var sa=c('UFIUserActionUtils').trackingData(qa.target);if(ra.hasviewersubscribed!==pa){var ta={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ra.actorforpost,hasviewersubscribed:pa,entidentifier:oa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ta]});var ua={};ua[c('ActorURI').PARAMETER_ACTOR]=ra.actorforpost;c('MercuryServerDispatcher').trySend('/ajax/ufi/subscribe.php',babelHelpers['extends']({subscribe_action:pa,ft_ent_identifier:oa,source:qa.source,client_id:c('ClientIDs').getNewClientID(),rootid:qa.rootid,comment_expand_mode:qa.commentexpandmode},sa,ua));}});},fetchSpamComments:function na(oa,pa,qa,ra){c('MercuryServerDispatcher').trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:oa,viewas:ra,comment_ids:pa,parent_comment_id:qa,source:null});},manageConstituentBadge:function na(oa){c('goURI')(c('XTownHallController').getURIBuilder().setBool('setting_nux',true).getURI());},removePreview:function na(oa,pa){var qa=c('UFIUserActionUtils').trackingData(pa.target),ra={commentid:oa.id,actiontype:c('UFIConstants').UFIActionType.REMOVE_PREVIEW};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ra]});c('MercuryServerDispatcher').trySend('/ajax/ufi/remove_preview.php',babelHelpers['extends']({comment_id:oa.id,ft_ent_identifier:oa.ftentidentifier,source:pa.source},qa));}};function m(na){c('AsyncResponse').defaultErrorHandler(na);}function n(na){var oa=na.request.data;c('AsyncResponse').defaultErrorHandler(na);var pa=oa.client_id||oa.comment_id,qa=c('UFIComments').getComment(pa);if(!qa)return;var ra=qa.status===c('UFIConstants').UFIStatus.PENDING_EDIT?c('UFIConstants').UFIStatus.FAILED_EDIT:c('UFIConstants').UFIStatus.FAILED_ADD;qa=c('ImmutableObject').setDeep(qa,{status:ra,allowRetry:o(na),body:{mentionstext:oa.comment_text,mentionsphoto:qa.photo_comment,mentionsvideo:qa.video_comment}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[qa]});}function o(na){var oa=na.getError();if(na.isBlockedAction())return false;if(na.silentError)return true;if(oa===1357012||oa===1357006)return false;return true;}function p(na){var oa=na.request.data,pa=oa.comment_id,qa=c('UFIComments').getComment(pa);if(!qa)return;qa=c('ImmutableObject').set(qa,{status:qa.priorstatus||null,priorstatus:undefined});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[qa]});}function q(na){var oa=na.request.data,pa=oa.comment_id,qa=c('UFIComments').getComment(pa);if(!qa)return;qa=c('ImmutableObject').set(qa,{commentid:pa,needsApproval:!qa.needsApproval,isApproved:!qa.isApproved});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[qa]});}function r(na){var oa=na.request.data,pa=oa.comment_id,qa=c('UFIComments').getComment(pa);if(qa){qa=c('ImmutableObject').set(qa,{commentid:pa,appealStatus:null,canAppeal:!qa.canAppeal,canSecure:!qa.canSecure});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[qa]});}}function s(na){var oa=na.request.data,pa=oa.comment_id,qa=c('UFIComments').getComment(pa);if(qa&&oa.like_action===qa.hasviewerliked){var ra=qa.hasviewerliked?-1:1,sa={commentid:pa,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:!qa.hasviewerliked,likecount:(qa.likecount||0)+ra};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});}c('AsyncResponse').defaultErrorHandler(na);}function t(na){var oa=na.request.data,pa=oa.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(pa,function(qa){if(qa.hasviewerliked===oa.like_action){var ra=qa.hasviewerliked?-1:1,sa={actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:qa.actorforpost,hasviewerliked:!qa.hasviewerliked,likecount:(qa.likecount||0)+ra,entidentifier:pa,likesentences:{current:qa.likesentences.alternate,alternate:qa.likesentences.current}};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});}});c('AsyncResponse').defaultErrorHandler(na);}function u(na){var oa=na.request.data,pa=oa.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(pa,function(qa){if(qa.hasviewersubscribed===oa.subscribe_action){var ra={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:qa.actorforpost,hasviewersubscribed:!qa.hasviewersubscribed,entidentifier:pa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ra]});}});c('AsyncResponse').defaultErrorHandler(na);}var v={'/ajax/ufi/ban_user.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:m},'/ajax/ufi/subscribe.php':{mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:u,batch_if:la,batch_function:ma},'/ajax/ufi/id_comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:c('MercuryServerDispatcher').IMMEDIATE}},w=c('XUFIAddCommentController').getURIBuilder().getURI();v[w]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:n};var x=c('XUFIDeleteCommentController').getURIBuilder().getURI();v[x]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var y=c('XUFIDeleteCommentAndRemoveCommenterController').getURIBuilder().getURI();v[y]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var z=c('XUFICommentLikeController').getURIBuilder().getURI();v[z]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:s,batch_if:ja,batch_function:ma};var aa=c('XUFICommentAcceptAnswerController').getURIBuilder().getURI();v[aa]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ba=c('XUFIHideCommentController').getURIBuilder().getURI();v[ba]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var ca=c('XUFICommentKeepSpamController').getURIBuilder().getURI();v[ca]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:q};var da=c('XUFICommentAppealSpamController').getURIBuilder().getURI();v[da]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r};var ea=c('XUFICommentSecureAccountController').getURIBuilder().getURI();v[ea]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r};var fa=c('XUFILikeController').getURIBuilder().getURI();v[fa]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:t,batch_if:ka,batch_function:ma};var ga=c('XUFIEditCommentController').getURIBuilder().getURI();v[ga]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:n};var ha=c('XUFITranslateCommentController').getURIBuilder().getURI();v[ha]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ia=c('XUFIActorChangeController').getURIBuilder().getURI();v[ia]={mode:c('MercuryServerDispatcher').IMMEDIATE};c('MercuryServerDispatcher').registerEndpoints(v);function ja(na,oa){return na&&na.ft_ent_identifier==oa.ft_ent_identifier&&na.comment_id==oa.comment_id;}function ka(na,oa){return na&&na.ft_ent_identifier==oa.ft_ent_identifier;}function la(na,oa){return na&&na.ft_ent_identifier==oa.ft_ent_identifier;}function ma(na,oa){return oa;}f.exports=babelHelpers['extends']({},l,c('UFIReactionUserActions'));}),null);
__d('UFISpamStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.areEqual=function(k,l){return Object.keys(k).length===Object.keys(l).length;};j.prototype.reduce=function(k,l){switch(l.type){case c('UFIStoryActionType').SPAM_FETCHED:k=babelHelpers['extends']({},k);l.commentIDs.forEach(function(m){return k[m]=true;});c('UFIUserActions').fetchSpamComments(l.ftentidentifier,l.commentIDs,l.parentCommentID,l.viewas);break;}return k;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIStopWatch',[],(function a(b,c,d,e,f,g){'use strict';var h='COUNTING',i='PAUSED';function j(){this.$UFIStopWatch1=i;this.$UFIStopWatch2=0;this.$UFIStopWatch3=0;}j.prototype.start=function(){if(this.$UFIStopWatch1===h)return this;this.$UFIStopWatch1=h;this.$UFIStopWatch3=Date.now();return this;};j.prototype.pause=function(){if(this.$UFIStopWatch1===i)return this;this.$UFIStopWatch1=i;this.$UFIStopWatch2+=Date.now()-this.$UFIStopWatch3;return this;};j.prototype.reset=function(){this.$UFIStopWatch2=0;this.$UFIStopWatch3=0;if(this.$UFIStopWatch1==h)this.$UFIStopWatch3=Date.now();return this;};j.prototype.state=function(){return this.$UFIStopWatch1;};j.prototype.milliseconds=function(){var k=0;if(this.$UFIStopWatch1===h)k=Date.now()-this.$UFIStopWatch3;return this.$UFIStopWatch2+k;};j.COUNTING=h;j.PAUSED=i;f.exports=j;}),null);
__d('UFIAddCommentAction',['UFIAddCommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={cancel:function i(j){return {type:c('UFIAddCommentActionType').CANCEL,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},changeContent:function i(j,k,l){return {type:c('UFIAddCommentActionType').CHANGE_CONTENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,text:k,replyFBID:l};},retrySubmit:function i(j,k){return {type:c('UFIAddCommentActionType').RETRY_SUBMIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,comment:k};},submitEdit:function i(j,k,l,m){return {type:c('UFIAddCommentActionType').SUBMIT_EDIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,comment:k,commentData:l,target:m};},submitNew:function i(j,k,l,m){return {type:c('UFIAddCommentActionType').SUBMIT_NEW,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,comment:k,target:l,replyCommentID:m,timestamp:Date.now()};}};f.exports=h;}),null);
__d('UFIInstanceAction',['UFIInstanceActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeOrderingMode:function i(j,k){return {type:c('UFIInstanceActionType').CHANGE_ORDER_MODE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,mode:k};},toggleComments:function i(j){return {type:c('UFIInstanceActionType').TOGGLE_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},changeCommentListVisibility:function i(j,k){return {type:c('UFIInstanceActionType').CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,visibility:k};},init:function i(j,k){return {type:c('UFIInstanceActionType').INIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,payload:k};},didRequestVODComments:function i(j){return {type:c('UFIInstanceActionType').REQUESTED_VOD_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},didReceiveVODComments:function i(j){return {type:c('UFIInstanceActionType').RECEIVED_VOD_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},remove:function i(j){return {type:c('UFIInstanceActionType').REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};},toggleCommercialBreak:function i(j,k){return {type:c('UFIInstanceActionType').TOGGLE_COMMERCIAL_BREAK,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,inCommercial:k};},translateAll:function i(j){return {type:c('UFIInstanceActionType').TRANSLATE_ALL,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier};}};f.exports=h;}),null);
__d('UFINewCommentNotifier',['Arbiter','UFIFeedbackTargets','UFIUIEvents','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h={onNewComment:function i(j,k,l,m,n,o){c('UFIUserActions').addComment(k.ftentidentifier,l.visibleValue,l.encodedValue,{source:k.source,ufiinstanceid:k.instanceid,target:m,replyid:n,rootid:k.rootid,attachedphoto:l.attachedPhoto,attachedvideo:l.attachedVideo,attachedsticker:l.attachedSticker,feedcontext:k.feedcontext,timestamp:o,feedbackReferrer:k.feedbackReferrer,isMarkdown:l.isMarkdown,fluentContentToken:k.fluentContentToken,isLiveVOD:k.isLiveVOD,islivestreaming:k.islivestreaming,photoTextTagID:k.photoTextTagID,isPrivate:l.isPrivate,isPhotoTag:k.isPhotoTag,photoFBID:k.photoFBID,photoTagX:k.photoTagX,photoTagY:k.photoTagY,attachedshareurl:l.attachedShareURL,isBroadcasterUFI:k.isBroadcasterUFI,enableVODCommentTimestamps:k.enableVODCommentTimestamps});c('UFIFeedbackTargets').getFeedbackTarget(k.ftentidentifier,function(p){if(j)c('Arbiter').inform(c('UFIUIEvents').Comment,{ft_id:p.entidentifier,target:m,form:j,isinverted:p.isranked||k.islivestreaming,isPhotoTag:k.isPhotoTag,photoTextTagID:k.photoTextTagID,photoTagX:k.photoTagX,photoTagY:k.photoTagY});});}};f.exports=h;}),null);
__d('UFICommercialBreakAdapter',['Map','SubscriptionsHandler','UFIInstanceAction','UFISharedDispatcher'],(function a(b,c,d,e,f,g){'use strict';function h(j,k){var l=k.getOption('VideoWithCommercialBreak','controller');if(l&&l.getIsCommercialBreakOngoing())c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleCommercialBreak(j,true));var m=new (c('SubscriptionsHandler'))();m.addSubscriptions(k.addListener('commercialBreak/hideUFI',function(){return c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleCommercialBreak(j,true));}),k.addListener('commercialBreak/showUFI',function(){return c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleCommercialBreak(j,false));}));return m;}var i=new (c('Map'))();f.exports={start:function j(k,l){var m=k.instanceid;if(i.get(m))return;i.set(m,h(k,l));},stop:function j(k){var l=i.get(k);if(!l)return;l.release();i['delete'](k);}};}),null);
__d('UFIDomRootAdapter',['csx','DOMQuery','Parent','UFIRootRegistry'],(function a(b,c,d,e,f,g,h){function i(j,k){'use strict';this.$UFIDomRootAdapter2=null;this.$UFIDomRootAdapter3=null;this.$UFIDomRootAdapter5=null;this.$UFIDomRootAdapter4=j;this.$UFIDomRootAdapter1=k;}i.prototype.getParentForm=function(){'use strict';if(!this.$UFIDomRootAdapter2){var j=c('Parent').byTag(this.$UFIDomRootAdapter4,'form');this.$UFIDomRootAdapter2=j instanceof HTMLElement?j:null;}return this.$UFIDomRootAdapter2;};i.prototype.getHeadRoot=function(){'use strict';if(!this.$UFIDomRootAdapter3){var j=c('UFIRootRegistry').isSnowliftNode(this.$UFIDomRootAdapter1.rootid),k=j?"^.fbPhotosSnowliftFeedback ._37uu":"^form ._37uu",l=c('DOMQuery').scry(this.$UFIDomRootAdapter4,k);this.$UFIDomRootAdapter3=l&&l[0]||null;}return this.$UFIDomRootAdapter3;};i.prototype.getSnowliftActionRoot=function(){'use strict';if(!this.$UFIDomRootAdapter5){var j=c('DOMQuery').scry(this.$UFIDomRootAdapter4,"^.snowliftPayloadRoot ._29qf ._37uu");this.$UFIDomRootAdapter5=j&&j[0]||null;}return this.$UFIDomRootAdapter5;};f.exports=i;}),null);
__d('onCommentIsVisible',['onViewportChanged'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=void 0;function l(n){return i(n);}function m(n){if(k!==n){k=n;j(n);}}return c('onViewportChanged')(m,l);}f.exports=h;}),null);
__d("PinnedCommentEventCreateSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1668340649872662",queryID:"563279854059964"});}),null);
__d('LivePinnedCommentEventCreateSubscription',['BaseGraphQLSubscription','PinnedCommentEventCreateSubscriptionWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/pinned_comment_event_create_subscribe/video_id_'+j;},_getQueryID:function i(){return c('PinnedCommentEventCreateSubscriptionWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),video_id:j})};},_getSubscriptionCallName:function i(){return 'pinned_comment_event_create_subscribe';}});f.exports=h;}),null);
__d('FbFeedCommentUFIScroller',['DOMScroll','containsNode','ge','ifRequired'],(function a(b,c,d,e,f,g){var h={reveal:function i(j){if(j){var k=c('ge')('content');if(k&&c('containsNode')(k,j)){c('DOMScroll').ensureVisible(j,null,60,250);}else c('ifRequired')('ScrollableArea',function(l){var m=l.getInstance(j);if(m)m.scrollIntoView(j);});}}};f.exports=h;}),null);
__d("MentionsInputUtils",[],(function a(b,c,d,e,f,g){var h={generateDataFromTextWithEntities:function i(j){var k=j.text,l=[];(j.ranges||[]).forEach(function(n){var o=n.entity;if(!o.external&&!n.videoTimestamp&&!n.sphericalViewport&&!/\D/.test(o.id))l.push({uid:o.id,text:k.substr(n.offset,n.length),offset:n.offset,length:n.length,weakreference:!!o.weakreference});});var m={value:k,mentions:l};return m;}};f.exports=h;}),null);
__d('SnowflakePermalinkUtils',['URI'],(function a(b,c,d,e,f,g){var h=/\/[^/]+\/(albums\/([^/]+)|posts\/([a-zA-Z]+[^/]+))\/([^/]+\/)?/,i=/\/[^/]+\/(albums|posts)\/([^/]+)\/([^/]+\/)?/,j={isPermalinkURI:function k(l){l=new (c('URI'))(l);return h.test(l.getPath());}};f.exports=j;}),null);
__d('UFIActorIconContainer.react',['cx','Image.react','React','ShortProfiles','UFIBusinessActorIcon.react','XUISpinner.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').createElement(c('XUISpinner.react'),{size:'large'});i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={actor:null},n;}l.prototype.componentWillMount=function(){this.$UFIActorIconContainer1();};l.prototype.componentDidUpdate=function(m){if(this.props.actorID!==m.actorID)this.$UFIActorIconContainer1();};l.prototype.$UFIActorIconContainer1=function(){c('ShortProfiles').get(this.props.actorID,function(m){return this.setState({actor:m});}.bind(this));};l.prototype.render=function(){var m=this.state.actor;if(!m)return k;var n=c('joinClasses')("img UFIActorImage _54ru",this.props.className);return m.isBusinessPersona?c('React').createElement(c('UFIBusinessActorIcon.react'),{classNames:n,firstName:m.firstName,lastName:m.lastName,textClassNames:"UFIBusinessActorIconText"}):c('React').createElement(c('Image.react'),{alt:m.name,className:n,src:m.thumbSrc});};f.exports=l;}),null);
__d('AbstractCommentLiveTypingController',['destroyOnUnload','ex'],(function a(b,c,d,e,f,g){'use strict';var h={START:'start',STOP:'stop'},i=10*1000;function j(k,l,m){this.$AbstractCommentLiveTypingController5=k;this.$AbstractCommentLiveTypingController6=l;this.$AbstractCommentLiveTypingController7=m;this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null;c('destroyOnUnload')(this.destroy.bind(this));}j.prototype.destroy=function(){this.$AbstractCommentLiveTypingController1&&this.$AbstractCommentLiveTypingController1.destroy();this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null;};j.prototype.bootloadPublisherModule=function(k){throw new Error(c('ex')('bootloadPublisherModule not implemented, '+'should be overridden by subclass'));};j.prototype.$AbstractCommentLiveTypingController8=function(k){var l=new k(this.$AbstractCommentLiveTypingController5,this.$AbstractCommentLiveTypingController6,this.$AbstractCommentLiveTypingController7),m=Date.now(),n=this.$AbstractCommentLiveTypingController3;if(n&&n+i>=m){var o=this.$AbstractCommentLiveTypingController4;if(o===h.START){l.handleStartEvent();}else if(o===h.STOP)l.handleStopEvent();}this.$AbstractCommentLiveTypingController1=l;};j.prototype.$AbstractCommentLiveTypingController9=function(){if(this.$AbstractCommentLiveTypingController2||!this.$AbstractCommentLiveTypingController5)return;this.$AbstractCommentLiveTypingController2=true;this.bootloadPublisherModule(this.$AbstractCommentLiveTypingController8.bind(this));};j.prototype.attemptPublishStartEvent=function(){this.$AbstractCommentLiveTypingController4=h.START;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1){this.$AbstractCommentLiveTypingController1.handleStartEvent();}else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9();};j.prototype.attemptPublishStopEvent=function(){this.$AbstractCommentLiveTypingController4=h.STOP;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1){this.$AbstractCommentLiveTypingController1.handleStopEvent();}else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9();};f.exports=j;}),null);
__d('UFIAddCommentLiveTypingController',['AbstractCommentLiveTypingController','Bootloader'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('AbstractCommentLiveTypingController'));i=h&&h.prototype;function j(k,l,m){i.constructor.call(this,k,l,m);}j.prototype.bootloadPublisherModule=function(k){c('Bootloader').loadModules(["UFIAddCommentLiveTypingPublisher"],k,'UFIAddCommentLiveTypingController');};j.prototype.attemptPublishStartEvent=function(){i.attemptPublishStartEvent.call(this);};j.prototype.attemptPublishStopEvent=function(){i.attemptPublishStopEvent.call(this);};f.exports=j;}),null);
__d('UFIAttachMediaSection.react',['cx','fbt','Bootloader','Focus','React','UFICommentFileInputAcceptValues','XUIError.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={bootloaded:false,hasUploadFailure:false},this.$UFIAttachMediaSection1=null,this.$UFIAttachMediaSection2=function(){this.setState({hasUploadFailure:false});}.bind(this),this.$UFIAttachMediaSection3=function(){this.setState({hasUploadFailure:false});}.bind(this),this.$UFIAttachMediaSection4=function(){this.setState({hasUploadFailure:true});}.bind(this),this.$UFIAttachMediaSection5=function(event){this.props.onClick&&this.props.onClick();if(this.state.bootloaded)return;c('Bootloader').loadModules(["UFIUploader"],function(s){this.$UFIAttachMediaSection1=new s(this.refs.inputContainer,this.refs.inputControl,this.refs.input,this.props.getPhotoUploadData,this.props.prepareForAttachedPhotoPreview,this.props.prepareForAttachedVideoPreview,this.props.onPhotoUploadComplete,this.props.onVideoEncodeUpdate,this.props.onVideoUploadUpdate,this.props.onVideoUploadComplete,this.props.setFileInput,this.props.viewerActorID,this.$UFIAttachMediaSection2,this.$UFIAttachMediaSection3,this.$UFIAttachMediaSection4);}.bind(this),'UFIAttachMediaSection.react');this.setState({bootloaded:true});}.bind(this),o;}m.prototype.componentDidMount=function(){var n=this.refs,o=n.input,p=n.inputControl;if(o&&p)c('Focus').relocate(o,p);};m.prototype.componentWillUnmount=function(){this.$UFIAttachMediaSection1&&this.$UFIAttachMediaSection1.destroy();};m.prototype.render=function(){var n=this.props.allowVideoAttachments?i._("Attach a Photo or Video"):i._("Attach a Photo"),o=i._("There was a problem attaching the file, please try again"),p=this.state.hasUploadFailure,q=c('React').createElement('div',{className:"_r1a"+(' '+"UFIPhotoAttachLinkWrapper")+(' '+"_m")+(!!this.props.attachment?' '+"_5t1p":''),'data-hover':p?null:'tooltip','data-tooltip-alignh':p?null:'center','data-tooltip-content':p?null:n,onClick:this.$UFIAttachMediaSection5,ref:'inputContainer',role:'presentation'},c('React').createElement('span',{className:"UFICommentPhotoIcon",ref:'inputControl'},c('React').createElement('input',{accept:this.props.allowVideoAttachments?c('UFICommentFileInputAcceptValues').both:c('UFICommentFileInputAcceptValues').photos,'aria-label':n,className:"_n",name:'file',ref:'input',title:n,type:'file',key:'0'})));return c('React').createElement(c('XUIError.react'),{xuiError:p?o:null,xuiErrorPosition:'above',xuiErrorAlignh:'center'},q);};m.propTypes={getPhotoUploadData:l.func.isRequired,prepareForAttachedPhotoPreview:l.func.isRequired,prepareForAttachedVideoPreview:l.func,onPhotoUploadComplete:l.func.isRequired,onVideoUploadComplete:l.func,onVideoUploadUpdate:l.func,onVideoEncodeUpdate:l.func,onClick:l.func,setFileInput:l.func.isRequired,targetId:l.string,allowVideoAttachments:l.bool,attachment:l.object,viewerActorID:l.string.isRequired};f.exports=m;}),null);
__d("XFeedNUXSaveSeenStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false},env:{type:"Enum",enumType:0}});}),null);
__d('UFICommentingAsConstituentHeader.react',['cx','fbt','AsyncRequest','BootloadedComponent.react','Layout.react','Image.react','JSResource','React','UFIConfig','XFeedNUXSaveSeenStateController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Layout.react').Column,m=c('Layout.react').FillColumn;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={hasSeenCommentingAsConstituentNUX:false,commentingAsConstituentNUXVisible:true},this.$UFICommentingAsConstituentHeader2=function(){this.setState({commentingAsConstituentNUXVisible:false,hasSeenCommentingAsConstituentNUX:true});var t=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','commenting_as_constituent').setBool('seen',true).getURI();new (c('AsyncRequest'))(t).send();}.bind(this),p;}n.prototype.render=function(){if(!this.props.uri)return null;var o=null;if(c('UFIConfig').shouldShowCommentingAsConstituentNUX)if(!this.state.hasSeenCommentingAsConstituentNUX)o=this.$UFICommentingAsConstituentHeader1();return c('React').createElement('div',{className:"_2ys2"},c('React').createElement(c('Layout.react'),null,c('React').createElement(m,null,c('React').createElement(c('Image.react'),{src:'/images/civic_engagement/constituent_badges/'+'constituent-badge_12.png',className:"_2ys1"}),i._("You're commenting as a constituent")),c('React').createElement(l,null,c('React').createElement('a',{className:"_2ys3",href:this.props.uri,ref:'constituent_header_manage_button'},i._("Manage")))),o);};n.prototype.$UFICommentingAsConstituentHeader1=function(){return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFICommentingAsConstituentHeader.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.constituent_header_manage_button;}.bind(this),shown:this.state.commentingAsConstituentNUXVisible,position:'above',alignment:'right',width:'custom',customwidth:280,onCloseButtonClick:this.$UFICommentingAsConstituentHeader2},c('React').createElement('div',{className:"_3w4h"},i._("Your Constituent Badge is On")),c('React').createElement('div',{className:"_2e59"},i._("You can turn your badge on or off anytime in Town Hall Settings.")));};f.exports=n;}),null);
__d('UFIGifButton.react',['cx','fbt','Arbiter','Bootloader','FocusRelocator.react','Link.react','MessengerPlatformInterfaceType','React','ReactLayeredComponentMixin_DEPRECATED','classWithMixins','mixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=278;j=babelHelpers.inherits(m,c('classWithMixins')(c('React').Component,c('mixin')(c('ReactLayeredComponentMixin_DEPRECATED'))));k=j&&j.prototype;function m(){k.constructor.call(this);this.$UFIGifButton4=function(){this.setState({flyoutShown:false,query:''});}.bind(this);this.$UFIGifButton7=function(){this.$UFIGifButton3=this.state.flyoutShown;}.bind(this);this.$UFIGifButton6=function(){if(this.state.renderFlyout!==null){if(!this.$UFIGifButton3){this.props.onGifFlyoutShow&&this.props.onGifFlyoutShow();this.setState({flyoutShown:true});}return;}c('Bootloader').loadModules(["XUIContextualDialog.react","ChatContentSearchFlyout.react","ContextualLayerAutoFlip"],function(n,o,p){this.setState({flyoutShown:true,renderFlyout:function(){return {contextualDialog:c('React').createElement(n,{alignment:'right',behaviors:{flip:p},className:"_5trk",contextRef:function(){return this.$UFIGifButton1;}.bind(this),onBlur:this.$UFIGifButton4,onToggle:function(q){if(!q&&this.state.flyoutShown)this.$UFIGifButton4();}.bind(this),position:'above',shown:this.state.flyoutShown,hasActionableContext:true,width:l},c('React').createElement('div',null,c('React').createElement(o,{onEscKeyDown:this.$UFIGifButton4,onSelect:this.$UFIGifButton8,query:this.state.query,shown:this.state.flyoutShown,searchInterface:c('MessengerPlatformInterfaceType').FB_INTERFACE})))};}.bind(this)});this.props.onGifFlyoutShow&&this.props.onGifFlyoutShow();}.bind(this),'UFIGifButton.react');}.bind(this);this.$UFIGifButton8=function(n){this.props.onGifSelected(n);this.$UFIGifButton4();}.bind(this);this.$UFIGifButton5=function(n){this.$UFIGifButton1=n;}.bind(this);this.state={renderFlyout:null,flyoutShown:false,query:''};}m.prototype.getDefaultProps=function(){return {showTooltip:true};};m.prototype.componentDidMount=function(){this.$UFIGifButton2=c('Arbiter').subscribe('page_transition',function(){return this.$UFIGifButton4();}.bind(this));};m.prototype.componentWillUnmount=function(){this.$UFIGifButton2&&this.$UFIGifButton2.unsubscribe();};m.prototype.render=function(){var n=i._("Post a GIF");return c('React').createElement(c('FocusRelocator.react'),{from:this.$UFIGifButton1,to:this.refs.icon},c('React').createElement(c('Link.react'),{'aria-label':n,className:"_r1a UFICommentGifButton",'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':this.props.showTooltip?n:null,linkRef:this.$UFIGifButton5,onClick:this.$UFIGifButton6,onMouseDown:this.$UFIGifButton7,role:'button'},c('React').createElement('div',{ref:'icon',className:"UFICommentGifIcon"+(this.state.flyoutShown?' '+"UFICommentGifIconActive":'')}),this.props.children));};m.prototype.renderLayers=function(){return !this.state.renderFlyout||!this.state.flyoutShown?{}:this.state.renderFlyout();};f.exports=m;}),null);
__d('UFIMarkdownButton.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){var m=i._("Format text with Markdown");return c('React').createElement(c('Link.react'),{className:"_r1a _45-m",'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':m,'aria-label':m,onClick:this.props.onClick},c('React').createElement('div',{tabIndex:0,className:"_45-n"+(this.props.active?' '+"_45-o":'')}));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('UFITipJarButton.react',['cx','fbt','Bootloader','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$UFITipJarButton1=function(){c('Bootloader').loadModules(["PhotoSnowlift","VideoChannel","LiveSendTipButtonUtil"],function(n,o,p){var q=n.getInstance(),r=o.get();if(q.fullscreen||q.isOpen||r){p.openPanel(!!r,this.props.videoID,this.props.receiverID);}else p.bootloadSnowliftWithPanelOpen(this.props.permalink);}.bind(this),'UFITipJarButton.react');}.bind(this);this.$UFITipJarButton1=this.$UFITipJarButton1.bind(this);}l.prototype.render=function(){var m=i._("Send a Tip");return c('React').createElement(c('Link.react'),{className:"_r1a _qqp",'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':m,'aria-label':m,onClick:this.$UFITipJarButton1},c('React').createElement('div',{className:"_qqq",ref:'tipJar',tabIndex:0}));};f.exports=l;}),null);
__d("XUFICommentGIFPreprocessController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/gif_preprocess\/",{});}),null);
__d("XUFICommentMarkdownPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/markdown_preview\/",{comment_body:{type:"String"}});}),null);
__d('UFIAddComment.react',['cx','fbt','invariant','ActorURI','Arbiter','AsyncRequest','Badge.react','BootloadedComponent.react','Bootloader','ClipboardPhotoUploader','EmojiInputButton.react','Event','JSResource','Keys','Link.react','LitestandStoryInsertionStatus','MentionsInputUtils','React','ReactDOM','Run','SnowflakePermalinkUtils','SubscriptionsHandler','TextDelightGatekeeperChecks','TrackingNodes','UFIActorIconContainer.react','UFIAddCommentAction','UFIAddCommentLiveTypingController','UFIAttachMediaSection.react','UFICommentingAsConstituentHeader.react','UFICommercialBreakStore','UFIComposerIsTypingStore','UFIConfig','UFIGifButton.react','UFIImageBlock.react','UFIMarkdownButton.react','UFISharedDispatcher','UFIStickerButton.react','UFITipJarButton.react','URI','VideoPermalinkURI','XFeedNUXSaveSeenStateController','XUFICommentGIFPreprocessController','XUFICommentMarkdownPreviewController','getActiveElement','joinClasses','throttle'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=b.URL||b.webkitURL||{},n=c('React').PropTypes,o=i._("Write a comment..."),p=i._("Write a reply..."),q=i._("Write an answer..."),r="fcg fss UFICommentTip",s=19,t='/ajax/ufi/upload/',u='/ajax/ufi/sticker_preview/',v=1000,w='comment_content_change',x={UPLOAD:'uploading',ENCODE:'encoding'},y=false,z=false;k=babelHelpers.inherits(aa,c('React').Component);l=k&&k.prototype;function aa(ba){l.constructor.call(this,ba);this.$UFIAddComment10=function(event){if(this.props.isEditing&&c('Event').getKeyCode(event.nativeEvent)===c('Keys').ESC)this.context.dispatch(c('UFIAddCommentAction').cancel(this.props.contextArgs));if(this.$UFIAddComment1&&!this.$UFIAddComment2){c('Run').onBeforeUnload(this.$UFIAddComment11);this.$UFIAddComment2=true;}var ga=c('getActiveElement')();if(c('Event').getKeyCode(event.nativeEvent)===c('Keys').ESC)ga.blur();}.bind(this);this.$UFIAddComment12=function(ga){c('UFISharedDispatcher').dispatch(c('UFIAddCommentAction').changeContent(this.props.contextArgs,ga,this.props.replyCommentID));c('Arbiter').inform(w,{fbid:this.props.replyCommentID,text:ga,instanceid:this.props.contextArgs.instanceid,ftentidentifier:this.props.contextArgs.ftentidentifier});if(this.props.allowCommentMarkdown&&this.state.commentMarkdownEnabled)this.$UFIAddComment13(ga);}.bind(this);this.$UFIAddComment13=function(ga){var ha=c('XUFICommentMarkdownPreviewController').getURIBuilder().setString('comment_body',ga).getURI();new (c('AsyncRequest'))(ha).setHandler(this.$UFIAddComment14).send();}.bind(this);this.$UFIAddComment14=function(ga){if(!ga)return;this.setState({commentMarkdownPreviewContent:ga.payload?ga.payload.markup:null});}.bind(this);this.$UFIAddComment11=function(){var ga=b.PageTransitions;if(ga){var ha=c('URI').getNextURI(),ia=ga.getMostRecentURI();if(Object.prototype.hasOwnProperty.call(ha.getQueryData(),'theater')||Object.prototype.hasOwnProperty.call(ia.getQueryData(),'theater')||Object.prototype.hasOwnProperty.call(ha.getQueryData(),'sdialog')||c('SnowflakePermalinkUtils').isPermalinkURI(ha)||c('SnowflakePermalinkUtils').isPermalinkURI(ia)||c('VideoPermalinkURI').isValid(ha)&&ha.getQueryData().ref==='channel'||c('VideoPermalinkURI').isValid(ia)&&ia.getQueryData().ref==='channel')return;var ja=b.DialogNavigationStack;if(ja&&ja.isActiveURI(ha))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return i._("You haven't finished your comment yet. Do you want to leave without finishing?");}.bind(this);this.$UFIAddComment15=function(){this.setState({markdownNUXVisible:false,gifsInCommentsNUXVisible:false});setTimeout(function(){if(this.$UFIAddComment1)this.setState({isFocused:false});}.bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});}.bind(this);this.$UFIAddComment16=function(event){var ga=new (c('ClipboardPhotoUploader'))(t,this.$UFIAddComment17());this.$UFIAddComment18();this.$UFIAddComment3=[ga.subscribe('upload_start',this.$UFIAddComment19),ga.subscribe('upload_error',this.$UFIAddComment20),ga.subscribe('upload_success',function(ha,ia){this.$UFIAddComment21(ia);}.bind(this))];ga.handlePaste(event);}.bind(this);this.$UFIAddComment22=function(ga,event){this.setState({hasSubmitted:true});var ha=this.state.attachedPhoto||this.state.attachedVideo||this.state.attachedSticker||this.state.attachedGIF,ia=this.props.isEditing||ha;if(this.state.isLoadingPhoto||this.$UFIAddComment23()){return false;}else if(!ga.encodedValue.trim()&&!ia)return false;ga.encodedValue=ga.encodedValue.trim();if(this.state.commentMarkdownEnabled){ga.isMarkdown=true;this.setState({commentMarkdownEnabled:false,commentMarkdownPreviewContent:null});}if(ha){ga.attachedPhoto=this.state.attachedPhoto;ga.attachedVideo=this.state.attachedVideo;ga.attachedSticker=this.state.attachedSticker;if(this.state.attachedGIF)if(this.state.attachedGIF.source){ga.attachedShareURL=this.state.attachedGIF.source.url;}else if(this.state.attachedGIF.originalImageUrl)ga.attachedShareURL=this.state.attachedGIF.originalImageUrl;this.setState({isLoadingPhoto:false,attachedPhoto:null,attachedVideo:null,attachedSticker:null,attachedGIF:null});}else{ga.attachedPhoto=null;ga.attachedVideo=null;ga.attachedSticker=null;ga.attachedGIF=null;ga.attachedShareURL=null;}if(this.props.isEditing){this.context.dispatch(c('UFIAddCommentAction').submitEdit(this.props.contextArgs,this.props.editingComment,ga,event.target));}else this.context.dispatch(c('UFIAddCommentAction').submitNew(this.props.contextArgs,ga,event.target,this.props.replyCommentID));return true;}.bind(this);this.focus=function(){var ga={isCommenting:true,isFocused:true,hasSubmitted:false},ha=this.props.contextArgs.loggedOutLinkConfig;if(ha&&ha.showAddComment)c('Bootloader').loadModules(["AsyncDialog"],function(la){la.bootstrap(ha.addCommentAjaxifyURI,null,'dialog');},'UFIAddComment.react');var ia=c('TextDelightGatekeeperChecks').gk;if(ia.delights_text_trigger_prefetch_comment_anim_enable&&c('TextDelightGatekeeperChecks').commentAnimationURI)c('Bootloader').loadModules(["TextDelightAnimation"],function(la){la.setupCommentAnimation(c('TextDelightGatekeeperChecks').commentAnimationURI);},'UFIAddComment.react');if(this.props.allowGifAttachments&&c('UFIConfig').shouldShowGIFsInCommentsNux)if(!y){y=true;var ja=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','gif_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(ja).send();ga.gifsInCommentsNUXVisible=true;}if(this.props.allowCommentMarkdown&&c('UFIConfig').shouldShowMarkdownCommentNUX&&!c('UFIConfig').shouldShowGIFsInCommentsNux)if(!z){z=true;var ka=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','markdown_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(ka).send();ga.markdownNUXVisible=true;}this.setState(ga);if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();if(this.props.onFocus)this.props.onFocus();c('Arbiter').inform('UFIAddComment/focus',{});}.bind(this);this.$UFIAddComment28=function(ga,ha){this.setState({fileInput:ga,fileUploader:ha});}.bind(this);this.$UFIAddComment17=function(){var ga=this.props.viewerActorID,ha={profile_id:ga,target_id:this.props.targetID,source:s};ha[c('ActorURI').PARAMETER_ACTOR]=ga;return ha;}.bind(this);this.$UFIAddComment21=function(ga){if(!this.state.isLoadingPhoto)return;var ha=ga.getPayload();if(ha&&ha.fbid){this.setState({attachedPhoto:ha,isLoadingPhoto:false});}else this.$UFIAddComment20(null);}.bind(this);this.$UFIAddComment32=function(ga,ha){if(!this.state.attachedVideo||this.state.videoStatus!==x.ENCODE)return;if(ha.obj.progress<this.state.videoProgress)return;ha.obj.fbid=ha.obj.videoID;this.setState({attachedVideo:ha.obj,videoProgress:ha.obj.progress,videoStatus:x.ENCODE});if(this.$UFIAddComment36(ha.obj.stage))this.$UFIAddComment37();}.bind(this);this.$UFIAddComment33=function(ga){this.setState({videoProgress:ga});}.bind(this);this.$UFIAddComment31=function(ga){if(this.state.videoStatus!==x.UPLOAD)return;if(ga&&ga.video_id)this.setState({videoProgress:0,attachedVideo:ga,videoStatus:x.ENCODE});}.bind(this);this.$UFIAddComment20=function(event){c('Arbiter').inform('video_upload_cancel',{});if(this.state.fileInput)this.state.fileInput.clear();this.setState({attachedPhoto:null,attachedVideo:null,attachedGIF:null,videoStatus:null,videoFileURL:null,isLoadingPhoto:false,videoProgress:0,isVideoFileTranscodedGIF:false});}.bind(this);this.$UFIAddComment19=function(){this.setState({attachedPhoto:null,isLoadingPhoto:true});}.bind(this);this.$UFIAddComment30=function(){var ga=void 0,ha=this.state.fileInput?this.state.fileInput.input:null,ia=ha?ha.files[0]:null;if(ia&&m.createObjectURL)ga=m.createObjectURL(ia);this.setState({attachedVideo:null,videoStatus:x.UPLOAD,videoFileURL:ga,videoProgress:0,isVideoFileTranscodedGIF:Boolean(ia&&ia.type==='image/gif')});}.bind(this);this.$UFIAddComment38=function(ga){if(!this.state.isLoadingPhoto)return;var ha=ga.getPayload();if(ha&&ha.fbid){this.setState({attachedSticker:ha,isLoadingPhoto:false});}else{c('Bootloader').loadModules(["Dialog"],function(ia){var ja=i._("Sticker Failed"),ka=i._("There was a problem attaching the sticker.");new ia().setTitle(ja).setBody(ka).setButtons(ia.OK).show();},'UFIAddComment.react');this.$UFIAddComment34(null);}}.bind(this);this.$UFIAddComment34=function(event){this.setState({attachedSticker:null,isLoadingPhoto:false});}.bind(this);this.onStickerSelected=function(ga,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this.$UFIAddComment39(ga);return;}this.sendSticker(ga,event);}.bind(this);this.$UFIAddComment29=function(ga){c('Bootloader').loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],function(ha,ia,ja,ka){var la=ha.symbols[ga];if(!la)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(la);return;}if(!this.$UFIAddComment9)this.$UFIAddComment9=new ka(c('ReactDOM').findDOMNode(this.refs.mentionsinput.refs.textarea));var ma=this.refs.mentionsinput.refs.getTextFieldDOM(),na=ja.getInstance(ma),oa=na.getValue();this.$UFIAddComment9||j(0);var pa=ia.insertEmoticon(la,oa,this.$UFIAddComment9.getPos());na.setValue(pa.result);this.$UFIAddComment9||j(0);this.$UFIAddComment9.setPos(pa.start,pa.end);}.bind(this),'UFIAddComment.react');}.bind(this);this.$UFIAddComment27=function(){this.setState({markdownNUXVisible:false});}.bind(this);this.onGifSelected=function(ga){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this.setState({attachedGIF:ga});this.preprocessGIF(ga);return;}this.sendGIF(ga);}.bind(this);this.$UFIAddComment1=false;var ca=this.props.editingComment,da=ca.attachment,ea=da?da.type:null,fa=ea==='photo'?da:null;this.state={attachedPhoto:ca.photo_comment||fa,attachedVideo:ca.video_comment||null,attachedSticker:ea=='sticker'?da:null,attachedGIF:ea=='gif'?da:null,commentMarkdownPreviewContent:null,commentMarkdownEnabled:false,videoStatus:null,videoFileURL:null,videoProgress:0,isVideoFileTranscodedGIF:false,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,isFocused:Boolean(this.props.isEditing),gifsInCommentsNUXVisible:false,markdownNUXVisible:false,hasSubmitted:false,inCommercialBreak:false};}aa.prototype.$UFIAddComment23=function(){return this.state.videoStatus===x.UPLOAD||this.state.videoStatus===x.ENCODE&&this.state.videoProgress!==100;};aa.prototype.$UFIAddComment18=function(){if(this.$UFIAddComment3)this.$UFIAddComment3.forEach(function(ba){ba.unsubscribe();});};aa.prototype.componentWillMount=function(){this.$UFIAddComment2=false;this.$UFIAddComment6=c('LitestandStoryInsertionStatus').registerBlocker(function(){return this.state.isCommenting;}.bind(this));this.$UFIAddComment4&&this.$UFIAddComment4.release();this.$UFIAddComment4=new (c('SubscriptionsHandler'))();this.$UFIAddComment4.addSubscriptions(c('UFICommercialBreakStore').addListener(function(){this.setState({inCommercialBreak:c('UFICommercialBreakStore').getValueFor(this.props.contextArgs.instanceid)});}.bind(this)));this.$UFIAddComment5=null;if(c('UFIConfig').canPublishLive)this.$UFIAddComment4.addSubscriptions(c('UFIComposerIsTypingStore').addListener(function(){var ba=c('UFIComposerIsTypingStore').getValueFor(this.props.contextArgs.ftentidentifier);if(ba===null)return;if(!this.$UFIAddComment5)this.$UFIAddComment5=new (c('UFIAddCommentLiveTypingController'))(this.props.contextArgs.ftentidentifier,this.props.replyCommentID,this.props.viewerActorID);if(ba){this.$UFIAddComment5.attemptPublishStartEvent();}else this.$UFIAddComment5.attemptPublishStopEvent();}.bind(this)));};aa.prototype.$UFIAddComment24=function(){this.$UFIAddComment5&&this.$UFIAddComment5.destroy();this.$UFIAddComment5=null;};aa.prototype.componentWillReceiveProps=function(ba){var ca=this.props.contextArgs.ftentidentifier,da=ba.contextArgs.ftentidentifier;if(da!==ca||this.props.replyCommentID!==ba.replyCommentID||this.props.viewerActorID!==ba.viewerActorID)this.$UFIAddComment24();};aa.prototype.componentWillUnmount=function(){this.$UFIAddComment1=false;this.$UFIAddComment18();if(this.$UFIAddComment8)c('Arbiter').unsubscribe(this.$UFIAddComment8);if(this.$UFIAddComment7)c('Arbiter').unsubscribe(this.$UFIAddComment7);this.$UFIAddComment6&&this.$UFIAddComment6.unsubscribe();this.$UFIAddComment6=null;this.$UFIAddComment4&&this.$UFIAddComment4.release();this.$UFIAddComment24();};aa.prototype.$UFIAddComment25=function(){if(this.state.gifsInCommentsNUXVisible)return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.gif_button;}.bind(this),shown:this.state.gifsInCommentsNUXVisible,position:'above',width:'auto',alignment:'right'},i._("You can now add GIFs to comments"));return null;};aa.prototype.$UFIAddComment26=function(){if(this.state.markdownNUXVisible)return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.markdownButton;}.bind(this),shown:this.state.markdownNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this.$UFIAddComment27},i._("[FB-Only] Markdown in Comments! Click to enable."));return null;};aa.prototype.render=function(){var ba=this.props.contextArgs.loggedOutLinkConfig,ca=true;if(ba&&ba.showAddComment)ca=false;var da=(!this.props.contextArgs.collapseaddcomment||this.state.isCommenting)&&ca&&!this.props.contextArgs.hideActorPhoto,ea=null;if(this.props.subtitle){ea=c('React').createElement('span',{className:r},this.props.subtitle);}else if(!this.state.isFocused&&this.props.isEditing){ea=c('React').createElement('span',{className:r},i._("{cancel}",[i.param('cancel',c('React').createElement(c('Link.react'),{onClick:function(){return this.context.dispatch(c('UFIAddCommentAction').cancel(this.props.contextArgs));}.bind(this)},i._("Cancel")))]));}else if(this.props.isEditing){ea=c('React').createElement('span',{className:r},i._("Press Esc to {cancel}.",[i.param('cancel',c('React').createElement(c('Link.react'),{onMouseDown:function(){return this.context.dispatch(c('UFIAddCommentAction').cancel(this.props.contextArgs));}.bind(this)},i._("cancel")))]));}else if(this.props.multiCompanyGroupsCount&&this.state.isFocused){ea=c('React').createElement('div',{className:"fcg fsm _2pid"},c('React').createElement(c('Badge.react'),{key:'noncoworker',type:'work_non_coworker'}),c('React').createElement('span',{className:"_2pir _4zk5"},i._({"*":"People from {number} companies will see this.","268435456":"People from 1 company will see this."},[i.plural(this.props.multiCompanyGroupsCount,'number')])));}else if(this.props.showSendOnEnterTip)ea=c('React').createElement('span',{className:r},i._("Press Enter to post."));var fa=null,ga=null,ha=null,ia=null,ja=this.state.attachedPhoto||this.state.attachedSticker||this.state.attachedVideo||this.state.attachedGIF,ka=null,la=null;if(this.props.allowCommentMarkdown)ia=c('React').createElement(c('UFIMarkdownButton.react'),{active:this.state.commentMarkdownEnabled,ref:'markdownButton',onClick:function(){var bb=!this.state.commentMarkdownEnabled;this.setState({commentMarkdownEnabled:bb});if(this.refs.mentionsinput&&bb)this.$UFIAddComment13(this.refs.mentionsinput.getText());}.bind(this)});if(this.props.allowStickerAttachments&&!ja)ga=c('React').createElement(c('UFIStickerButton.react'),{ref:'sticker_button',onStickerSelected:this.onStickerSelected,onEmoticonSelected:this.$UFIAddComment29,onStickerFlyoutShow:function(){c('Arbiter').inform('comment_content_change',{addingAttachment:true});if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this)});if(this.props.allowGifAttachments&&!ja)ha=c('React').createElement(c('UFIGifButton.react'),{ref:'gif_button',onGifSelected:this.onGifSelected,onGifFlyoutShow:function(){if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this)});if(this.props.allowTipJar)la=c('React').createElement(c('UFITipJarButton.react'),{instanceID:this.props.contextArgs.instanceid,permalink:this.props.contextArgs.permalink,receiverID:this.props.targetID,videoID:this.props.contextArgs.ftentidentifier});if(this.props.allowPhotoAttachments||this.props.allowVideoAttachments){ka=this.$UFIAddComment16;fa=c('React').createElement(c('UFIAttachMediaSection.react'),{ref:'media_section',getPhotoUploadData:this.$UFIAddComment17,prepareForAttachedPhotoPreview:this.$UFIAddComment19,prepareForAttachedVideoPreview:this.$UFIAddComment30,allowVideoAttachments:this.props.allowVideoAttachments,onPhotoUploadComplete:this.$UFIAddComment21,onVideoUploadComplete:this.$UFIAddComment31,onVideoEncodeUpdate:this.$UFIAddComment32,onVideoUploadUpdate:this.$UFIAddComment33,setFileInput:this.$UFIAddComment28,targetId:this.props.targetID,onClick:function(){c('Arbiter').inform('comment_content_change',{addingAttachment:true});if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this),attachment:ja,viewerActorID:this.props.viewerActorID});}var ma=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.ADD_COMMENT_BOX),na='addComment_'+this.props.contextArgs.ftentidentifier,oa=void 0;if(this.props.replyCommentID){oa=p;}else if(this.props.isQAndA){oa=i._("Ask a question...");}else if(this.props.contextArgs.isaskquestion){oa=q;}else oa=o;var pa=this.props.contextArgs.viewoptionstypeobjects,qa=this.props.contextArgs.viewoptionstypeobjectsorder;if(this.props.attachedPhoto&&!this.props.subtitle)ea=null;var ra=void 0;if(this.state.attachedPhoto||this.state.isLoadingPhoto||this.state.attachedVideo||this.state.videoStatus===x.UPLOAD||this.state.attachedSticker||this.state.attachedGIF)ra=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFIAttachedMediaPreview.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('span',null),attachedPhoto:this.state.attachedPhoto,attachedVideo:this.state.attachedVideo,attachedSticker:this.state.attachedSticker,attachedGIF:this.state.attachedGIF,monitorHeight:this.props.contextArgs.monitorHeight,onRemoveAttachedMediaPreviewClicked:this.$UFIAddComment20,onRemoveAttachedStickerPreview:this.$UFIAddComment34,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto,videoFileURL:this.state.videoFileURL,videoStatus:this.state.videoStatus,videoProgress:this.state.videoProgress,isVideoFileTranscodedGIF:this.state.isVideoFileTranscodedGIF});var sa=this.props.contextArgs.mentionsinput,ta=null,ua=null,va=null;if(sa){ta=sa.inputComponent;ua=sa.viewComponent;va=sa.viewProps;}var wa=this.props.editingComment.body,xa=wa?c('MentionsInputUtils').generateDataFromTextWithEntities(wa):null,ya=null;if(this.props.allowCommentMarkdown&&this.state.commentMarkdownEnabled)ya=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFICommentMarkdownPreview.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('span',null),markup:this.state.commentMarkdownPreviewContent});var za=ta?c('React').createElement(ta,{disableInitTextarea:!ca,replyCommentID:this.props.replyCommentID,initialData:xa,placeholder:oa,datasource:this.props.mentionsDataSource,ref:'mentionsinput',viewComponent:ua,viewProps:va,viewOptionsTypeObjects:pa,viewOptionsTypeObjectsOrder:qa,hashtags:this.props.contextArgs.sht,showHashtagTypeahead:c('UFIConfig').showHashtagTypeahead,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this.$UFIAddComment22,onFocus:this.focus,onBlur:this.$UFIAddComment15,onContentChange:this.$UFIAddComment12,onPaste:ka,ftEntIdentifier:this.props.contextArgs.ftentidentifier,instanceID:this.props.contextArgs.instanceid,isBroadcasterUFI:this.props.contextArgs.isBroadcasterUFI,isTahoeUFI:this.props.contextArgs.isTahoeUFI}):null,ab=c('React').createElement('div',{className:'UFICommentContainer'},c('React').createElement('div',{className:"_fmi UFIInputContainer"},za,c('React').createElement('div',{className:"_fmk UFICommentAttachmentButtons _5op2"},c('React').createElement(c('EmojiInputButton.react'),{buttonClassName:"_r1a UFICommentEmojiButton",iconActiveClassName:"UFICommentEmojiIconActive",iconClassName:"UFICommentEmojiIcon",onClick:function(){if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this),onSelect:function(bb){this.refs.mentionsinput.insertEmoji(bb);}.bind(this)}),ia,fa,ha,ga,la)),ya,ra,ea);if(da)ab=c('React').createElement(c('UFIImageBlock.react'),{className:"UFIMentionsInputWrap"+(this.props.allowStickerAttachments?' '+"UFIStickersEnabledInput":'')+(this.props.allowCommentMarkdown?' '+"UFIMarkdownEnabledInput":'')+(this.props.allowGifAttachments?' '+"UFIGifEnabledInput":'')+(this.props.allowTipJar?' '+"UFITipJarEnabledInput":'')},c('React').createElement('div',{className:'UFIReplyActorPhotoWrapper',onClick:this.focus,role:'presentation'},c('React').createElement(c('UFIActorIconContainer.react'),{actorID:this.props.viewerActorID})),ab);return c('React').createElement('div',{ref:function(bb){return this.rootNode=bb;}.bind(this),id:na,className:c('joinClasses')("UFIRow"+(' '+"_4oep")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(this.state.inCommercialBreak?' '+"hidden_elem":''),this.props.className),onKeyDown:this.$UFIAddComment10,'data-ft':ma},this.$UFIAddComment35(),ab,this.$UFIAddComment25(),this.$UFIAddComment26());};aa.prototype.componentDidUpdate=function(ba,ca){if(!ca.attachedPhoto&&this.state.attachedPhoto||!ca.attachedSticker&&this.state.attachedSticker||!ca.attachedVideo&&this.state.attachedVideo||!ca.isCommenting&&this.state.isCommenting){this.refs.mentionsinput.focus();}else if(this.props.keepFocus&&this.state.hasSubmitted)this.refs.mentionsinput.focus();if(ba.viewerActorID!==this.props.viewerActorID){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this.$UFIAddComment17());this.$UFIAddComment20();}};aa.prototype.componentDidMount=function(){this.$UFIAddComment1=true;this.$UFIAddComment13=c('throttle')(this.$UFIAddComment13,v,this);if(!this.props.allowPhotoAttachments&&!this.props.allowVideoAttachments)return;if(this.props.replyCommentID===null){this.$UFIAddComment7=c('Arbiter').subscribe('focusCommentField'+this.props.contextArgs.ftentidentifier,function(ba){this.refs.mentionsinput.focus();}.bind(this));if(this.props.contextArgs.issnowlift)this.$UFIAddComment8=c('Arbiter').subscribe('newRemixedImage'+this.props.contextArgs.ftentidentifier,function(ba,ca){var event={clipboardData:{items:[ca]}};this.$UFIAddComment16(event);}.bind(this));}};aa.prototype.$UFIAddComment35=function(){if(this.props.constituentBanner)return c('React').createElement(c('UFICommentingAsConstituentHeader.react'),{uri:this.props.constituentBanner});return null;};aa.prototype.insertMention=function(ba){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(ba);};aa.prototype.$UFIAddComment36=function(ba){return ba==='finish';};aa.prototype.$UFIAddComment37=function(){this.state.fileInput&&this.state.fileInput.clear();};aa.prototype.$UFIAddComment39=function(ba){this.setState({attachedSticker:null,isLoadingPhoto:true});new (c('AsyncRequest'))(u).setData({sticker_id:ba}).setErrorHandler(this.$UFIAddComment34).setHandler(this.$UFIAddComment38).send();};aa.prototype.sendSticker=function(ba,event){var ca={encodedValue:'',visibleValue:'',attachedPhoto:null,attachedSticker:{fbid:ba}};this.context.dispatch(c('UFIAddCommentAction').submitNew(this.props.contextArgs,ca,event.target,this.props.replyCommentID));};aa.prototype.$UFIAddComment40=function(){this.setState({gifsInCommentsNUXVisible:false});};aa.prototype.preprocessGIF=function(ba){var ca=c('XUFICommentGIFPreprocessController').getURIBuilder().getURI();new (c('AsyncRequest'))(ca).setData({gif_url:ba.source.url}).send();};aa.prototype.sendGIF=function(ba){var ca={encodedValue:'',visibleValue:'',attachedShareURL:ba.source.url};if(this.rootNode)this.context.dispatch(c('UFIAddCommentAction').submitNew(this.props.contextArgs,ca,this.rootNode,this.props.replyCommentID));};aa.contextTypes={dispatch:n.func};f.exports=aa;}),null);
__d('UFIAddCommentLink.react',['cx','fbt','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){var m=c('joinClasses')("UFIRow"+(' '+"UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),n=void 0;if(this.props.isQAndA){n=i._("Ask a question...");}else if(this.props.isGroupQA){n=i._("Write an answer...");}else n=i._("Write a comment...");return c('React').createElement('div',{className:m,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},n));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('UFIAnimatedCommentList.react',['cx','React','Visibility','ifRequired'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PureComponent;i=babelHelpers.inherits(l,k);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.node=null,n;}l.prototype.render=function(){return c('React').createElement('div',{ref:function(m){return this.node=m;}.bind(this),className:"UFIAnimatedCommentList"},this.props.children);};l.prototype.componentWillEnter=function(m){var n=this.node;if(!n||this.props.isLatestCommentLocal||c('Visibility').isHidden()){m();return;}c('ifRequired')('CSSAnimationBuilder',function(o){var p=this.props.isStreamingFromBottom?n.lastChild.clientHeight:-n.firstChild.clientHeight;o.keyframeAnimation(n).defineKeyframes({'0%':{transform:'translateY('+p+'px)'},'100%':{transform:'translateY(0px)'}}).setTimingFunction('ease-in-out').setDuration(.25).setMemoize(true).setIterationCount(1).setFinishedCallback(m).start();}.bind(this));};f.exports=l;}),null);
__d('PublicConversationsUnicornTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:PublicConversationsUnicornLoggerConfig',this.$PublicConversationsUnicornTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:PublicConversationsUnicornLoggerConfig',this.$PublicConversationsUnicornTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$PublicConversationsUnicornTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$PublicConversationsUnicornTypedLogger1=babelHelpers['extends']({},this.$PublicConversationsUnicornTypedLogger1,j);return this;};h.prototype.setCommentFbid=function(j){this.$PublicConversationsUnicornTypedLogger1.comment_fbid=j;return this;};h.prototype.setVC=function(j){this.$PublicConversationsUnicornTypedLogger1.vc=j;return this;};var i={comment_fbid:true,vc:true};f.exports=h;}),null);
__d('ProfileBrowserLink',['URI'],(function a(b,c,d,e,f,g){var h='/ajax/browser/dialog/',i='/browse/',j=function l(m,n,o){return new (c('URI'))(m+n).setQueryData(o);},k={constructPageURI:function l(m,n){return j(i,m,n);},constructDialogURI:function l(m,n){return j(h,m,n);}};f.exports=k;}),null);
__d('ProfileBrowserTypes',[],(function a(b,c,d,e,f,g){var h={LIKES:'likes',FRIEND_CHECKINS:'friendcheckins',FRIENDED_FANS_OF:'friended_fans_of',GROUP_ADMINS:'group_admins',GROUP_MEMBERS:'group_members',GROUP_MESSAGE_VIEWERS:'group_message_viewers',LIVE_VIDEO_VIEWERS:'live_video_viewers',MUTUAL_FRIENDS:'mutual_friends',TODO_LIST_ASSIGNEES:'todo_list_assignees',GROUP_JOIN_REQUESTERS_FRIENDS_IN_GROUP:'group_join_requesters_friends_in_group'};f.exports=h;}),null);
__d('UFICommentLikeCount.react',['cx','fbt','ActorURI','NumberFormat','ProfileBrowserLink','ProfileBrowserTypes','React','URI'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=function o(p,q,r){var s=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:p.fbid,comment_from:p.author,comment_likecount:p.likecount||0,comment_id:p.id,cache_buster:p.likeconfirmhash||0});if(q)s.addQueryData({viewas:q});return c('ActorURI').create(s,r);};j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.prototype.render=function(){var o=this.props.comment,p=o.likecount||0,q=c('NumberFormat').formatInteger(p),r=i._({"*":"{number} Likes","268435456":"1 Like"},[i.plural(p,'number')]),s=c('ProfileBrowserTypes').LIKES,t={id:o.fbid},u=m(this.props.comment,this.props.contextArgs.viewas,this.props.actorForPost),v=c('React').createElement('span',{className:"UFICommentReactionIconContainer"},c('React').createElement('i',{className:"_3j7l _2p78 _9-y"})),w=c('React').createElement('span',null,q),x="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''),y=c('ProfileBrowserLink').constructDialogURI(s,t).toString(),z=c('ProfileBrowserLink').constructPageURI(s,t).toString(),aa='dialog',ba=this.props.contextArgs.loggedOutLinkConfig;if(ba&&ba.showLikeLink){y=ba.likeAjaxifyURI;z='#';}return c('React').createElement('a',{ajaxify:y,'aria-label':r,className:x,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':u.toString(),href:z,rel:aa,role:'button'},v,w);};function n(){j.apply(this,arguments);}n.propTypes={actorForPost:l.string,comment:l.object.isRequired,contextArgs:l.object.isRequired};f.exports=n;}),null);
__d('addFocusEvents',['Deferred','Event','React','SubscriptionList'],(function a(b,c,d,e,f,g){var h=c('React').Component,i=void 0,j=function(k){return function(){var l,m;l=babelHelpers.inherits(n,h);m=l&&l.prototype;n.prototype.componentDidMount=function(){'use strict';if(!i){var o,p;i=new (c('SubscriptionList'))(function(){o=c('Event').listen(window,'blur',function(){i&&i.fireCallbacks(true);p&&p.remove();p=c('Event').listen(document.documentElement,'focusin',function(){i&&i.fireCallbacks(false);p&&p.remove();p=null;});});},function(){o&&o.remove();p&&p.remove();o=null;p=null;i=null;});}this.subscription=i.add(function(q){this.locked=q;}.bind(this));};n.prototype.componentWillUnmount=function(){'use strict';this.subscription&&this.subscription.remove();};n.prototype.onClick=function(event){'use strict';this.props.onClick&&this.props.onClick(event);if(this.deferred)this.deferred.resolve(this.props.onMouseFocus);};n.prototype.onFocus=function(event){'use strict';if(this.deferred)this.deferred.reject();if(this.locked)return;this.deferred=new (c('Deferred'))();this.deferred.done(function(o){o&&o(event);this.deferred=null;}.bind(this),function(){this.deferred=null;}.bind(this));};n.prototype.onKeyUp=function(event){'use strict';this.props.onKeyUp&&this.props.onKeyUp(event);if(this.deferred)this.deferred.resolve(this.props.onKeyboardFocus);};n.prototype.render=function(){'use strict';var o=this.props,p=o.onKeyboardFocus,q=o.onMouseFocus,r=babelHelpers.objectWithoutProperties(o,['onKeyboardFocus','onMouseFocus']);return c('React').createElement(k,babelHelpers['extends']({},r,{onClick:this.onClick.bind(this),onFocus:this.onFocus.bind(this),onKeyUp:this.onKeyUp.bind(this)}));};function n(){'use strict';l.apply(this,arguments);}return n;}();}.bind(this);f.exports=j;}),null);
__d('UFIReactionsLinkImpl.react',['cx','fbt','BanzaiLogger','BootloadedComponent.react','Bootloader','Event','JSResource','React','ReactDOM','ReactionNuxTypeEnum','ShimButton.react','SubscriptionsHandler','UFICommentAction','UFIConfig','UFILikeWebDriverIDs','UFIReactionIconImpl.react','UFIReactionTypes','UFIStoryAction','addFocusEvents','shallowCompare','curry'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').Component,m=c('React').PropTypes,n=c('UFIConfig').reactionsFunnelLogger,o=c('UFIConfig').reactionsHasCommentFunnelLogger,p=c('UFIConfig').reactionsHasFunnelLogger,q=false,r=false,s=null,t=null,u=null,v=void 0,w=c('React').createElement('div',null),x=150,y=c('UFIReactionTypes').reactions,z=Object.keys(y),aa=20,ba=525,ca=750,da=700,ea=850,fa=500,ga='ontouchstart' in window,ha=i._("Show more reactions"),ia=i._("New! React to what's happening in different parts of the video"),ja=[],ka=function oa(){if(!s){var pa=function qa(ra){s=ra;if(ja){ja.forEach(function(sa){return sa();});ja=null;}};if(c('UFIConfig').reactionsHasAnimatedIconsOnHover){c('Bootloader').loadModules(["UFIReactionsMenuWithAnimatedVectorIcons.react"],pa,'UFIReactionsLinkImpl.react');}else if(c('UFIConfig').reactionsHasStaticVectorDock){c('Bootloader').loadModules(["UFIReactionsMenuWithStaticVectorIcons.react"],pa,'UFIReactionsLinkImpl.react');}else c('Bootloader').loadModules(["UFIReactionsMenuImpl.react"],pa,'UFIReactionsLinkImpl.react');}},la=function oa(pa){if(!t||!u||!v){var qa=function ra(sa,ta,ua){t=sa;u=ta;v=ua;pa();};c('Bootloader').loadModules(["SpatialReactionsProductionStore","SphericalVideoComponentActions","SpatialReactionClickAnimation","SpatialReactionFunnelLoggingStore"],qa,'UFIReactionsLinkImpl.react');}else pa();},ma=c('addFocusEvents')('a');j=babelHelpers.inherits(na,l);k=j&&j.prototype;function na(oa,pa){'use strict';k.constructor.call(this,oa,pa);this.$UFIReactionsLink2=function(){if(this.state.dialogShown)this.forceUpdate();}.bind(this);this.hideDialog=function(){this.setState({dialogShown:false,isScrubbing:false});}.bind(this);this.showDialog=function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();if(!this.state.dialogShown)this.state.logToFunnel&&n.menuShow(this.state.logAsComment);q=true;this.setState({dialogShown:true,NUXShown:false});}.bind(this);this.onClick=function(event){var ra,sa=this;event.preventDefault();var ta=this.props,ua=ta.reaction,va=ta.suggestedReaction;if(!ua||ua===c('UFIReactionTypes').LIKE||!y[ua]){(function(){if(!ua&&sa.props.nuxConfig){var wa=sa.props.nuxConfig.nuxType;if(wa===c('ReactionNuxTypeEnum').LIKE_CLICK||wa===c('ReactionNuxTypeEnum').LIKE_CLICK_RENUX)sa.maybeShowNUX();}var xa=va&&sa.hasSuggestedReaction?va:c('UFIReactionTypes').LIKE;ua=ua?c('UFIReactionTypes').NONE:xa;var ya=c('curry')(sa.onReactionChange,ua);sa.$UFIReactionsLink3(ua,true);if(sa.$UFIReactionsLink5()){la(function(){if(t&&u){var za=t.getVideoPlayerController(this.props.contextArgs.instanceid);if(za&&ua===c('UFIReactionTypes').LIKE){u.clickLikeButton(za.getVideoPlayerID());event.persist();if(!this.$UFIReactionsLink1)this.$UFIReactionsLink1=new v(za,c('UFIReactionTypes').LIKE,ya);this.$UFIReactionsLink1.click(event);}else ya(event);}}.bind(sa));}else ya(event);})();}else this.onReactionChange(0,event);this.setState({dialogShown:false,isScrubbing:false});}.bind(this);this.onClickCapture=function(event){event.stopPropagation();this.setState({isLongPressing:false});}.bind(this);this.onContextMenu=function(event){if(this.state.isTouchDown)event.preventDefault();}.bind(this);this.onMouseDown=function(event){clearTimeout(this.hoverTimeout);}.bind(this);this.onMouseEnter=function(event){clearTimeout(this.hoverTimeout);var ra=this.props.comment?da:ba;if(!this.state.dialogShown)this.hoverTimeout=setTimeout(function(){this.showDialog();if(this.$UFIReactionsLink5())la(function(){if(t&&u){var sa=t.getVideoPlayerController(this.props.contextArgs.instanceid);if(sa)u.openReactionMenu(sa.getVideoPlayerID());}}.bind(this));}.bind(this),ra);ka();if(!this.state.dialogShown&&this.state.logToFunnel)this.logFunnelTimeout=setTimeout(function(){return n.likeButtonEnter(this.props.reaction,this.state.logAsComment);}.bind(this),x);}.bind(this);this.onMouseLeave=function(event){clearTimeout(this.hoverTimeout);clearTimeout(this.logFunnelTimeout);var ra=this.props.comment?ea:ca;if(this.state.dialogShown)if(this.$UFIReactionsLink5()){la(function(){if(t&&t.shouldLeaveReactionMenuOpen()){this.$UFIReactionsLink6(this.hideDialog);}else this.hoverTimeout=setTimeout(function(){this.hideDialog();if(t&&u){var sa=t.getVideoPlayerController(this.props.contextArgs.instanceid);if(sa)u.closeReactionMenu(sa.getVideoPlayerID());}}.bind(this),ra);}.bind(this));}else this.hoverTimeout=setTimeout(this.hideDialog,ra);}.bind(this);this.onReactionMenuMouseEnter=function(event){clearTimeout(this.hoverTimeout);}.bind(this);this.onTouchStart=function(event){if(!this.state.dialogShown){this.mouseDownTime=Date.now();this.mouseUpTime=0;this.longPressTimeout=setTimeout(function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();this.setState({dialogShown:true,NUXShown:false,isLongPressing:true});}.bind(this),fa);ka();}this.setState({isTouchDown:true,isLongPressing:false});}.bind(this);this.onTouchEnd=function(event){if(this.state.isLongPressing)this.mouseUpTime=Date.now();this.dragStartX=null;this.dragStartY=null;clearTimeout(this.longPressTimeout);this.setState({isTouchDown:false});}.bind(this);this.onTouchMove=function(event){if(this.state.isScrubbing)return;var ra=event.touches[0],sa=ra.clientX,ta=ra.clientY;if(this.dragStartX===null&&this.dragStartY===null){this.dragStartX=sa;this.dragStartY=ta;return;}if(typeof this.dragStartX==='number'&&typeof this.dragStartY==='number'&&(this.dragStartX>sa+aa||this.dragStartX<sa-aa||this.dragStartY>ta+aa||this.dragStartY<ta-aa))this.setState({isScrubbing:true});}.bind(this);this.onReactionChange=function(ra,event){var sa=arguments.length<=2||arguments[2]===undefined?null:arguments[2],ta=arguments.length<=3||arguments[3]===undefined?null:arguments[3];this.$UFIReactionsLink3(ra);var ua=c('ReactDOM').findDOMNode(this.refs.trigger);if(this.state.logToFunnel)event.target===ua?n.likeButtonClick(ra,this.state.logAsComment):n.reactionSelection(ra,this.state.logAsComment);var va=void 0;if(this.props.comment){va=c('UFICommentAction').changeReaction(this.props.contextArgs,this.props.comment,ra,ua);}else va=c('UFIStoryAction').changeReaction(this.props.contextArgs,ra,ua,sa,ta);this.context.dispatch(va);var wa=function(){this.setState({dialogShown:false,isScrubbing:false});}.bind(this);if(this.$UFIReactionsLink5()){la(function(){if(t)if(t.shouldLeaveReactionMenuOpen()){this.$UFIReactionsLink6(function(){wa();});}else wa();}.bind(this));}else wa();}.bind(this);this.onReactionMouseEnter=function(ra,event){if(this.reactionsHoverStartTimeMap[ra]===0)this.reactionsHoverStartTimeMap[ra]=Date.now();}.bind(this);this.onReactionMouseLeave=function(ra,event){if(this.reactionsHoverStartTimeMap[ra]){this.reactionsHoverTotalTimeMap[ra]+=Date.now()-this.reactionsHoverStartTimeMap[ra];this.reactionsHoverStartTimeMap[ra]=0;}}.bind(this);this.onKeyboardFocus=function(){this.allowKeyboardFocus=true;this.showDialog();}.bind(this);this.onScreenReaderTrigger=function(){r=true;this.allowKeyboardFocus=true;this.showDialog();}.bind(this);this.dragStartX=null;this.dragStartY=null;this.hasSuggestedReaction=c('UFIConfig').reactionsHasSuggestedReaction;this.subscriptionsHandler=new (c('SubscriptionsHandler'))();if(ja)ja.push(this.$UFIReactionsLink2);var qa=false;if(n&&(p&&this.props.comment===undefined||o&&this.props.comment!==undefined))qa=true;this.state={dialogShown:false,isLongPressing:false,isScrubbing:false,isTouchDown:false,logToFunnel:qa,logAsComment:!!this.props.comment&&o,NUXShown:false,shouldBounce:false};}na.prototype.shouldComponentUpdate=function(oa,pa){'use strict';return c('shallowCompare')(this,oa,pa);};na.prototype.componentWillReceiveProps=function(oa){'use strict';this.setState({shouldBounce:!!oa.reaction&&oa.reaction!==this.props.reaction});};na.prototype.componentWillUpdate=function(oa,pa){'use strict';if(this.state.dialogShown&&!pa.dialogShown)this.$UFIReactionsLink3(this.props.reaction);};na.prototype.componentDidUpdate=function(oa,pa){var qa,ra=this;'use strict';if(!pa.dialogShown&&this.state.dialogShown){if(ga)(function(){var sa=void 0;ra.subscriptionsHandler.addSubscriptions(c('Event').listen(document.documentElement,'touchstart',function(event){sa=event.touches[0];}),c('Event').listen(document.documentElement,'touchmove',function(event){sa=event.touches[0];}),c('Event').listen(document.documentElement,'touchend',function(event){if(sa&&!this.refs.root.contains(document.elementFromPoint(sa.clientX,sa.clientY)))this.setState({dialogShown:false,isScrubbing:false});}.bind(ra)));})();}else if(pa.dialogShown&&!this.state.dialogShown){this.subscriptionsHandler.release();this.subscriptionsHandler=new (c('SubscriptionsHandler'))();}};na.prototype.componentDidMount=function(){'use strict';this.$UFIReactionsLink4();if(this.props.nuxConfig){var oa=this.props.nuxConfig.nuxType;if(oa===c('ReactionNuxTypeEnum').SPATIAL_REACTIONS_NUX)this.maybeShowNUX();}};na.prototype.componentWillUnmount=function(){'use strict';this.subscriptionsHandler.release();if(ja){var oa=ja.indexOf(this.$UFIReactionsLink2);if(oa!==-1)ja.splice(oa,1);}};na.prototype.maybeShowNUX=function(){'use strict';var oa=null;if(this.props.nuxConfig)oa=this.props.nuxConfig.nuxType;if(!q){q=true;this.setState({NUXShown:true,dialogShown:false});if(oa!==c('ReactionNuxTypeEnum').SPATIAL_REACTIONS_NUX)c('BanzaiLogger').log('WebReactionsNuxLoggerConfig',{feedback_id:this.props.contextArgs.ftentidentifier,'interface':'www'});}};na.prototype.onDragStart=function(event){'use strict';event.preventDefault();};na.prototype.renderMenu=function(){'use strict';if(this.state.dialogShown)ka();if(!s)return null;var oa=this.allowKeyboardFocus;this.allowKeyboardFocus=false;return c('React').createElement(s,{allowKeyboardFocus:oa,initialReaction:this.props.reaction,isLongPressing:this.state.isLongPressing,isScreenReader:r,instanceId:this.props.contextArgs.instanceid,onMouseEnter:this.onReactionMenuMouseEnter,onMouseLeave:this.onMouseLeave,onReactionClick:this.onReactionChange,onBlur:this.hideDialog,onFocus:this.showDialog,onReactionMouseEnter:this.onReactionMouseEnter,onReactionMouseLeave:this.onReactionMouseLeave,shown:this.state.dialogShown,supportedReactions:this.props.supportedReactions,showSpatialReactions:this.$UFIReactionsLink5()});};na.prototype.renderTrigger=function(){'use strict';var oa=this.props,pa=oa.reaction,qa=oa.suggestedReaction;if(pa&&!y[pa])pa=null;var ra=pa?c('UFILikeWebDriverIDs').UNLIKE_LINK:c('UFILikeWebDriverIDs').LIKE_LINK,sa=void 0,ta=void 0,ua=void 0,va=void 0;if(this.props.comment){ra=this.props.comment.parentcommentid?c('UFILikeWebDriverIDs').LIKE_LINK_REPLY:c('UFILikeWebDriverIDs').LIKE_LINK_COMMENT;var wa=false;if(!pa){sa=y[c('UFIReactionTypes').LIKE].display_name;}else{sa=y[pa].display_name;va=y[pa].color;wa=true;}ua="UFILikeLink"+(' '+"UFIReactionLink")+(wa?' '+"UFILinkBright":'');}else{if(!pa){sa=qa&&this.hasSuggestedReaction?y[qa].display_name:y[c('UFIReactionTypes').LIKE].display_name;}else sa=y[pa].display_name;if(pa&&pa!=c('UFIReactionTypes').LIKE||!pa&&qa&&this.hasSuggestedReaction&&qa!=c('UFIReactionTypes').LIKE)ta=c('React').createElement(c('UFIReactionIconImpl.react'),{className:"_1ktw",grayscale:!pa&&!!qa,reaction:pa||qa,size:'13'});ua="UFILikeLink"+(' '+"_4x9-")+(' '+"_4x9_")+(!ta?' '+"_48-k":'')+(pa?' '+"UFILinkBright":'')+(this.state.shouldBounce?' '+"_3_mo":'');va=pa?y[pa].color:null;}return c('React').createElement(ma,{'aria-pressed':!!pa,className:ua,'data-testid':ra,href:'#',onClick:this.onClick,onClickCapture:this.state.isLongPressing?this.onClickCapture:null,onContextMenu:this.onContextMenu,onDragStart:this.onDragStart,onKeyboardFocus:s?null:this.onKeyboardFocus,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onTouchEnd:ga?this.onTouchEnd:null,onTouchMove:ga?this.onTouchMove:null,onTouchStart:ga?this.onTouchStart:null,ref:'trigger',role:'button',style:{color:va},tabIndex:0},ta,sa);};na.prototype.renderNUX=function(){'use strict';var oa=this.refs.root,pa=this.props.comment!==undefined,qa=this.props.nuxConfig&&this.props.nuxConfig.nuxType===c('ReactionNuxTypeEnum').SPATIAL_REACTIONS_NUX,ra=this.props.nuxConfig&&this.props.nuxConfig.titleOverride,sa=this.props.nuxConfig&&this.props.nuxConfig.textOverride;if(!this.state.NUXShown||!oa)return null;if(qa){ra=ia;sa=null;}return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:w,bootloadLoader:c('JSResource')('UFIReactionsNUX.react').__setRef('UFIReactionsLinkImpl.react'),context:oa,titleOverride:ra,textOverride:sa,isCommentReactionNux:pa,isSpatialReactionNux:qa,nuxKey:this.props.nuxConfig&&this.props.nuxConfig.nuxKey});};na.prototype.renderScreenReaderTrigger=function(){'use strict';if(s)return null;return c('React').createElement(c('ShimButton.react'),{className:'accessible_elem','data-accessibilityid':'virtual_cursor_trigger',inline:true,tabIndex:-1,onClick:this.onScreenReaderTrigger},ha);};na.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_khz"+(this.state.isScrubbing?' '+"_4bdq":''),ref:'root'},this.renderTrigger(),this.renderScreenReaderTrigger(),this.renderMenu(),this.renderNUX());};na.prototype.$UFIReactionsLink4=function(){'use strict';this.dialogShownTime=0;this.reactionsHoverStartTimeMap={};this.reactionsHoverTotalTimeMap={};z.forEach(function(oa){this.reactionsHoverStartTimeMap[oa]=0;this.reactionsHoverTotalTimeMap[oa]=0;}.bind(this));};na.prototype.$UFIReactionsLink5=function(){'use strict';return !!this.props.contextArgs.showSpatialReactions&&!this.props.comment;};na.prototype.$UFIReactionsLink6=function(oa){var pa;'use strict';if(t)(function(){var qa=t.addListener(function(){if(t&&!t.shouldLeaveReactionMenuOpen()){qa.remove();oa();}});})();};na.prototype.$UFIReactionsLink3=function(oa,pa){'use strict';if(this.dialogShownTime!==0){var qa={feedback_id:this.props.contextArgs.ftentidentifier,final_reaction:oa,initial_reaction:this.props.reaction,'interface':'www',long_press_duration:this.mouseDownTime!==0&&this.mouseUpTime!==0?this.mouseUpTime-this.mouseDownTime:0,non_reaction_like:pa,time_spent:Date.now()-this.dialogShownTime};for(var ra in this.reactionsHoverTotalTimeMap){var sa='time_spent_'+y[ra].name.toLowerCase();qa[sa]=this.reactionsHoverTotalTimeMap[ra];}c('BanzaiLogger').log('UserReactionsLoggerConfig',qa);this.$UFIReactionsLink4();}};na.contextTypes={dispatch:m.func};f.exports=na;}),null);
__d('UFICommentLikeLink.react',['cx','fbt','React','ReactionNuxTypeEnum','TrackingNodes','UFICommentAction','UFIConfig','UFIReactionsLinkImpl.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='ufi_comment_like_link',n='ufi_reply_like_link';j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;o.getCanRender=function(p){return !!(p&&(p.canviewerreact||p.viewercanlike||p.hasviewerliked));};o.prototype.render=function(){var p=this.props.comment,q=this.props.feedback,r=this.props.contextArgs;if(!this.constructor.getCanRender(p))return null;if(p.canviewerreact&&!r.isaskquestion){return c('React').createElement('span',{className:"_6a _3-me"},this.$UFICommentLikeLink1(p,q,r));}else if(p.viewercanlike||p.hasviewerliked)return this.$UFICommentLikeLink2(p,q,r);return null;};o.prototype.$UFICommentLikeLink1=function(p,q,r){var s=null;if(c('UFIConfig').reactionsHasCommentsNux)s={nuxKey:'reactions_comments',titleOverride:i._("New! React to a Comment"),textOverride:i._("Hover over the Like link to see all reactions."),nuxType:c('ReactionNuxTypeEnum').LIKE_CLICK};return c('React').createElement(c('UFIReactionsLinkImpl.react'),{contextArgs:babelHelpers['extends']({},r,{ftentidentifier:p.id}),comment:p,nuxConfig:s,reaction:p.viewerreaction,supportedReactions:q.supportedreactions,ftIdentifier:r.ftentidentifier});};o.prototype.$UFICommentLikeLink2=function(p,q,r){var s=r.loggedOutLinkConfig,t=c('TrackingNodes').getTrackingInfo(p.hasviewerliked?c('TrackingNodes').types.UNLIKE_LINK:c('TrackingNodes').types.LIKE_LINK),u=p.hasviewerliked?i._("Unlike this comment"):i._("Like this comment"),v=p.parentcommentid?n:m,w=!p.hasviewerliked||s?i._("Like"):i._("Unlike");if(r.isaskquestion&&!p.parentcommentid){u=p.hasviewerliked?i._("Unvote for this answer"):i._("Vote for this answer");w=!p.hasviewerliked||s?i._("Upvote"):i._("Upvoted");}var x=null,y=null;if(s&&s.showLikeLink){x='dialog';y=s.likeAjaxifyURI;}return c('React').createElement('a',{className:'UFILikeLink','data-ft':t,'data-testid':v,href:'#',rel:x,ajaxify:y,onClick:function(event){return this.context.dispatch(c('UFICommentAction').toggleLike(r,p,event.target));}.bind(this),role:'button',title:u},w);};function o(){j.apply(this,arguments);}o.propTypes={comment:l.object.isRequired,contextArgs:l.object.isRequired,feedback:l.object.isRequired};o.contextTypes={dispatch:l.func};f.exports=o;}),null);
__d('FBCollapsibleList.react',['Link.react','React','getObjectValues'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes,k={COMMA:'comma',NEWLINE:'newline'};h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.state={numShown:this.props.numVisible},this.$FBCollapsibleList1=function(){return this.state.numShown<this.$FBCollapsibleList6();}.bind(this),this.$FBCollapsibleList2=function(){var r=this.$FBCollapsibleList6();return this.props.showLessLink&&this.props.numVisible<r&&this.state.numShown>=r;}.bind(this),this.$FBCollapsibleList4=function(){var r=this.$FBCollapsibleList6()-this.props.numVisible;return c('React').createElement(c('Link.react'),{onClick:this.$FBCollapsibleList7,key:'seeMore'},c('React').createElement('b',null,'Show more ','(',r,')'));}.bind(this),this.$FBCollapsibleList5=function(){return c('React').createElement(c('Link.react'),{onClick:this.$FBCollapsibleList8,key:'seeLess'},c('React').createElement('b',null,'Show less'));}.bind(this),this.$FBCollapsibleList3=function(r,s){switch(this.props.delimiter){case k.NEWLINE:return [c('React').createElement('div',{key:r.key},r)];case k.COMMA:return s?[r]:[r,', '];default:throw new Error('Invalid delimiter: '+this.props.delimiter);}}.bind(this),this.$FBCollapsibleList8=function(){this.setState({numShown:this.props.numVisible});}.bind(this),this.$FBCollapsibleList6=function(){if(!!this.props.maxShowMore&&this.props.maxShowMore<this.props.children.length)return this.props.maxShowMore;return this.props.children.length;}.bind(this),this.$FBCollapsibleList7=function(){this.setState({numShown:this.$FBCollapsibleList6()});}.bind(this),n;}l.prototype.render=function(){'use strict';var m=this.$FBCollapsibleList1(),n=this.$FBCollapsibleList2(),o=Math.min(this.state.numShown,this.props.children.length),p=m||n,q=[];for(var r=0;r<o;r++){var s=!p&&r===o-1;q.push(this.$FBCollapsibleList3(this.props.children[r],s));}if(m){q.push(this.$FBCollapsibleList4());}else if(n)q.push(this.$FBCollapsibleList5());return this.props.display=='block'?c('React').createElement('div',this.props,q):c('React').createElement('span',this.props,q);};l.propTypes={delimiter:j.oneOf(c('getObjectValues')(k)),display:j.oneOf(['inline','block']),numVisible:j.number.isRequired,maxShowMore:j.number,showLessLink:j.bool};l.Delimiters=k;l.defaultProps={children:[],delimiter:k.NEWLINE,display:'block',showLessLink:false};f.exports=l;}),null);
__d('UFICommentMetadata.react',['cx','fbt','BootloadedComponent.react','Bootloader','FBCollapsibleList.react','JSResource','Middot.react','React','ReactDOM','Timestamp.react','TrackingNodes','UFIConstants','URI','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('UFIConstants').UFIStatus,m='ufi_comment_timestamp',n="UFIFailureMessageIcon",o="UFIFailureMessage",p="uiLinkSubtle",q=function s(t){var u=t.status;return u===l.FAILED_ADD||u===l.FAILED_EDIT;};j=babelHelpers.inherits(r,c('React').Component);k=j&&j.prototype;function r(){var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=k.constructor).call.apply(s,[this].concat(v)),this.editLinkRef=null,t;}r.prototype.render=function(){var s=this.props,t=s.comment,u=s.onRetrySubmit,v=void 0,w=void 0,x=t.timestamp;if(q(t)){v=[c('React').createElement('span',{key:'failure',className:o},c('React').createElement('i',{className:n}),i._("Unable to post comment.")),t.allowRetry&&u?[' ',c('React').createElement('a',{key:'rety-submit',onClick:u,href:'#',role:'button'},i._("Try Again"))]:null];}else if(x){var y=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.SOURCE);w=c('React').createElement(c('Timestamp.react'),{shorten:this.props.shortenTimestamp,time:x.time,text:x.text,verbose:x.verbose});if(this.props.showPermalink)w=c('React').createElement('a',{key:'timestamp-message',className:p,href:this.props.permalink,'data-ft':y,'data-testid':m,target:this.props.permalinkTarget},w);}var z=null;if(t.originalTimestamp){var aa=new (c('URI'))('/ajax/edits/browser/comment').addQueryData({comment_token:t.id}).toString();z=[c('React').createElement(c('Middot.react'),{key:'middot-editNote'}),c('React').createElement('a',{ajaxify:aa,className:'uiLinkSubtle','data-hover':'tooltip','data-tooltip-content':i._("Show edit history"),href:'#',key:'edit-link',ref:function(ga){return this.editLinkRef=ga;}.bind(this),rel:'dialog',role:'button',title:i._("Show edit history")},i._("Edited"))];}var ba=null,ca=t.creator_data;if(ca)ba=[c('React').createElement(c('BootloadedComponent.react'),{key:'creator',bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),{size:'small'}),bootloadLoader:c('JSResource')('UFICreatorInfo.react').__setRef('UFICommentMetadata.react'),creatorID:ca.creatorID,creatorType:ca.creatorType,creatorName:ca.creatorName,labelType:ca.labelType,pageID:ca.pageID,profileURI:ca.profileURI}),c('React').createElement(c('Middot.react'),{key:'middot-creator'})];var da=null;if(t.body&&t.body.markdown_enabled&&t.body.markup)da=[c('React').createElement(c('Middot.react'),{key:'middot-markdownNote'}),c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('a',{className:'uiLinkSubtle'},i._("Formatted")),bootloadLoader:c('JSResource')('UFICommentMarkdownFormattedLink.react').__setRef('UFICommentMetadata.react'),comment:t,key:'markdown-link'})];var ea=t.reportedBy,fa=null;if(ea&&ea.length>0)fa=[c('React').createElement(c('Middot.react'),{key:'middot-reportedByMessage'}),c('React').createElement('span',{key:'reportedByMessage'},i._("Reported by {Comma-separated list of names}",[i.param('Comma-separated list of names',c('React').createElement(c('FBCollapsibleList.react'),{numVisible:2,showLessLink:true,display:'inline',delimiter:'comma'},ea))]))];return c('React').createElement('span',null,ba,w,v,z,da,fa);};r.prototype.componentWillUpdate=function(s){var t=this.props.comment,u=s.comment;if(!t.editnux&&!!u.editnux)c('Bootloader').loadModules(["LegacyContextualDialog"],function(v){if(!this.editLinkRef)return;var w=new v();w.init(u.editnux).setContext(c('ReactDOM').findDOMNode(this.editLinkRef)).setWidth(300).setPosition('below').show();}.bind(this),'UFICommentMetadata.react');};f.exports=r;}),null);
__d('sortReactionTypes',['UFIReactionTypes'],(function a(b,c,d,e,f,g){var h={};c('UFIReactionTypes').ordering.forEach(function(j,k){h[j]=k;});function i(j,k){return Object.keys(j).map(function(l){return Number(l);}).sort(function(l,m){if(k&&l===c('UFIReactionTypes').LIKE)return -1;if(j[l]['default']===j[m]['default'])return h[l]-h[m];return j[m]['default']-j[l]['default'];});}f.exports=i;}),null);
__d('UFICommentReactionCount.react',['cx','ActorURI','ClientIDs','React','UFIReactionsBlingTokens.react','UFIReactionsProfileBrowserUtils','XUFIReactionsSocialSentenceTooltipController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.comment,n={entidentifier:m.id,reactioncount:m.reactioncount,reactioncountmap:m.reactioncountmap,actorforpost:this.props.actorForPost,supportedreactions:this.props.supportedReactions},o="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''),p="UFICommentReactionsBling"+(' '+"_4ar-")+(' '+"_ipn"),q=c('ActorURI').create(c('XUFIReactionsSocialSentenceTooltipController').getURIBuilder().setString('ft_ent_identifier',m.id).setString('client_id',c('ClientIDs').getNewClientID()).setInt('user_count',m.reactioncount).getURI(),this.props.actorForPost),r=c('UFIReactionsProfileBrowserUtils').getDialogURI(n),s=c('UFIReactionsProfileBrowserUtils').getPageURI(n),t=this.props.contextArgs.loggedOutLinkConfig;if(t&&t.showLikeLink){r=t.likeAjaxifyURI;s='#';}return c('React').createElement('a',{ajaxify:r,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':q,href:s,rel:'dialog',role:'button'},c('React').createElement(c('UFIReactionsBlingTokens.react'),{className:p,feedback:n,contextArgs:this.props.contextArgs,max:3,noLinks:true,size:'13'},c('React').createElement('span',{className:o},m.reactioncountreduced)));};function l(){i.apply(this,arguments);}l.propTypes={actorForPost:k.string,comment:k.object.isRequired,contextArgs:k.object.isRequired,supportedReactions:k.array};f.exports=l;}),null);
__d('UFICommentShareLink.react',['cx','fbt','BootloadedComponent.react','Event','JSResource','React','ReactDOM','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=false;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.getCanRender=function(o){return !!(o&&o.canshare&&o.commentshareuri);};function n(o,p){k.constructor.call(this,o,p);this.$UFICommentShareLink1=new (c('SubscriptionsHandler'))();this.state={nuxShown:false};}n.prototype.componentDidMount=function(){var o=c('ReactDOM').findDOMNode(this.refs.root);if(o&&this.$UFICommentShareLink2())this.$UFICommentShareLink1.addSubscriptions(c('Event').listen(o,'click',this.$UFICommentShareLink3.bind(this)));};n.prototype.componentWillUnmount=function(){this.$UFICommentShareLink1.release();};n.prototype.componentWillReceiveProps=function(o){if(this.props.comment&&!this.props.comment.hasviewerliked&&o.comment&&o.comment.hasviewerliked)this.$UFICommentShareLink4();};n.prototype.$UFICommentShareLink3=function(){this.setState({nuxShown:false});};n.prototype.$UFICommentShareLink2=function(){return this.props.contextArgs&&this.props.contextArgs.commentShareNuxConfig&&this.props.contextArgs.commentShareNuxConfig.nuxKey||null;};n.prototype.$UFICommentShareLink4=function(){if(m||!this.$UFICommentShareLink2())return;m=true;this.setState({nuxShown:true});};n.prototype.$UFICommentShareLink5=function(){if(!this.state.nuxShown)return null;var o=this.$UFICommentShareLink2();if(!o)return null;return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',{className:"hidden_elem"}),bootloadLoader:c('JSResource')('UFICommentShareNUX.react').__setRef('UFICommentShareLink.react'),nuxContext:this.refs.root,nuxKey:o});};n.prototype.render=function(){var o=this.props.comment;if(!this.constructor.getCanRender(o))return null;var p=i._("Share this comment"),q=i._("Share");return c('React').createElement('a',{className:'share_action_link',href:o.commentshareuri,role:'button',ref:'root',rel:'dialog',title:p},q,this.$UFICommentShareLink5());};n.propTypes={comment:l.object.isRequired,contextArgs:l.object.isRequired};f.exports=n;}),null);
__d("XVideoBroadcastPinnedCommentsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/pinnedcomments\/",{});}),null);
__d('UFILivePinnedCommentLink.react',['cx','fbt','AsyncRequest','BanzaiODS','React','UFILivePinnedCommentStore','UFISharedDispatcher','UFIStoryAction','UFIVideoPlayerRegistry','XVideoBroadcastPinnedCommentsController','ifRequired'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.onLinkClick=function(){var r=c('UFILivePinnedCommentStore').getPinnedCommentID(this.props.contextArgs.ftentidentifier);if(this.props.isPinned){c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(this.props.contextArgs));}else c('UFISharedDispatcher').dispatch(c('UFIStoryAction').pinComment(this.props.contextArgs,this.props.commentID));var s=this.props.contextArgs.isBroadcasterUFI?this.getCurrentBroadcastTime():c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTime(this.props.contextArgs.instanceid);if(s===null){c('BanzaiODS').bumpEntityKey('streaming_comments','pin_with_no_timestamp');return;}var t=c('XVideoBroadcastPinnedCommentsController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(t).setData({video_id:this.props.contextArgs.fluentContentToken,video_time_offset:s,comment_fbid:this.props.isPinned?null:this.props.commentFBID}).setMethod('POST').setErrorHandler(function(u){if(r){c('UFISharedDispatcher').dispatch(c('UFIStoryAction').pinComment(this.props.contextArgs,r));}else c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(this.props.contextArgs));}.bind(this)).send();}.bind(this),n;}l.prototype.getCurrentBroadcastTime=function(){return c('ifRequired')('LiveControlPanelStore',function(m){return m.getCurrentBroadcastTime();})||c('ifRequired')('LiveVideoBroadcastBroadcastStore',function(m){return m.getCurrentBroadcastTime();});};l.prototype.render=function(){var m=i._("Unpin Comment"),n=i._("Pin Comment");return c('React').createElement('a',{className:"uiLink",href:'#',onClick:this.onLinkClick},this.props.isPinned?m:n);};f.exports=l;}),null);
__d("XVideoBroadcastClearPinCommentEventAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/pinnedcomments\/clear\/",{});}),null);
__d('UFILiveVODUnpinCommentLink.react',['cx','fbt','AsyncRequest','Bootloader','React','UFILivePinnedCommentStore','UFISharedDispatcher','UFIStoryAction','XVideoBroadcastClearPinCommentEventAsyncController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$UFILiveVODUnpinCommentLink1=function(){c('Bootloader').loadModules(["SimpleXUIDialog"],function(r){r.showConfirm(i._("If you unpin this comment, you won't be able to pin it again."),i._("Unpin Comment"),function(s){if(!s)return;new (c('AsyncRequest'))().setURI(c('XVideoBroadcastClearPinCommentEventAsyncController').getURIBuilder().getURI()).setData({pin_event_id:this.props.pinEventID}).setMethod('POST').setHandler(function(t){if(this.props.commentID===c('UFILivePinnedCommentStore').getPinnedCommentID(this.props.contextArgs.ftentidentifier))c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(this.props.contextArgs));}.bind(this)).send();}.bind(this));}.bind(this),'UFILiveVODUnpinCommentLink.react');}.bind(this),n;}l.prototype.render=function(){return c('React').createElement('a',{className:"uiLink",href:'#',onClick:this.$UFILiveVODUnpinCommentLink1},i._("Unpin Comment"));};f.exports=l;}),null);
__d('UFIPrivateReplyIndicator.react',['fbt','PagesPrivateReplyConstants','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('PagesPrivateReplyConstants').Status;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.willRender=function(m){return m===k.ALREADY_REPLIED;};l.prototype.render=function(){if(this.props.replyStatus===k.ALREADY_REPLIED)return c('React').createElement('span',null,h._("Page responded privately"));return null;};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d("XPagesMessagingPrivateReplyDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/private_reply\/dialog\/",{activity_id:{type:"String",required:true},hide_attachments:{type:"Bool",defaultValue:false}});}),null);
__d('UFIPrivateReplyLink.react',['cx','fbt','ActorURI','Link.react','PagesPrivateReplyConstants','React','XPagesMessagingPrivateReplyDialogController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('PagesPrivateReplyConstants').Status,m=c('PagesPrivateReplyConstants').Type;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.willRender=function(o,p){if(!o)return false;if(o.hasReplyPermission&&p===o.pageID)return true;return false;};n.prototype.render=function(){var o=this.props.context;if(o.hasReplyPermission&&this.props.actorID===o.pageID){if(o.status===l.REPLYABLE){return this.$UFIPrivateReplyLink1();}else if(o.status===l.ALREADY_REPLIED)return this.$UFIPrivateReplyLink2();return this.$UFIPrivateReplyLink3();}return null;};n.prototype.$UFIPrivateReplyLink1=function(){var o=c('ActorURI').create(c('XPagesMessagingPrivateReplyDialogController').getURIBuilder().setString('activity_id',this.props.activityID).getURI(),this.props.context.pageID);return c('React').createElement(c('Link.react'),{className:"_50u0 _14hj",href:o,rel:'dialog'},this.$UFIPrivateReplyLink4());};n.prototype.$UFIPrivateReplyLink3=function(){var o=void 0;switch(this.props.context.status){case l.EXPIRED:o=i._({"comments":"You can't send a message response to comments that are older than 6 months.","reviews":"You can't send a message response to reviews that are older than 6 months.","posts":"You can't send a message response to posts that are older than 6 months."},[i['enum'](this.$UFIPrivateReplyLink5(),{comments:'comments',reviews:'reviews',posts:'posts'})]);break;case l.NOT_USER_CREATED:o=i._("Pages can't send private messages to other Pages.");break;case l.CANNOT_MESSAGE:o=i._("This person can't receive a message reply from your Page.");break;}return c('React').createElement('span',{className:"_50u0 _50u4",'data-hover':o?'tooltip':null,'data-tooltip-content':o},this.$UFIPrivateReplyLink4());};n.prototype.$UFIPrivateReplyLink2=function(){return c('React').createElement(c('Link.react'),{className:"_50u0 _14hk",href:this.props.context.permalink||'#'},this.props.seeResponseLabel?i._("See Response"):this.$UFIPrivateReplyLink4());};n.prototype.$UFIPrivateReplyLink4=function(){return i._("Message");};n.prototype.$UFIPrivateReplyLink5=function(){switch(this.props.context.activityType){case m.COMMENT_PAGE_POST:case m.COMMENT_WALL_POST:case m.COMMENT_REVIEW:return 'comments';case m.REVIEW:return 'reviews';default:return 'posts';}};function n(){j.apply(this,arguments);}f.exports=n;}),null);
__d('UFISpamCount',['UFISpamCountImpl'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('UFISpamCountImpl').module||{enabled:false};}),null);
__d('UFICommentActions.react',['ix','cx','fbt','BootloadedComponent.react','CommentApprovalsResponsibleUserAction','FluxContainer','JSResource','Middot.react','PublicConversationsUnicornTypedLogger','React','ReactFragment','UFIAcceptedAnswerStore','UFIAddCommentAction','UFICentralUpdates','UFICommentAction','UFICommentLikeCount.react','UFICommentLikeLink.react','UFICommentMetadata.react','UFICommentReactionCount.react','UFICommentShareLink.react','UFIConfig','UFIConstants','UFILivePinnedCommentLink.react','UFILivePinnedCommentStore','UFILiveVODUnpinCommentLink.react','UFIPrivateReplyIndicator.react','UFIPrivateReplyLink.react','UFISharedDispatcher','UFISpamCount','UFIStoryAction','WebCommentViewOption','emptyFunction','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=c('UFIConstants').UFIStatus,o="fsm fwn fcg UFICommentActions",p="UFIDeletedMessageIcon",q="UFIDeletedMessage";k=babelHelpers.inherits(r,c('React').Component);l=k&&k.prototype;r.getStores=function(){return [c('UFIAcceptedAnswerStore'),c('UFILivePinnedCommentStore')];};r.calculateState=function(s,t){var u=t.comment,v=t.feedback,w=c('UFIAcceptedAnswerStore').get(u.ftentidentifier,v.acceptedanswer),x=c('UFILivePinnedCommentStore').getPinnedCommentID(u.ftentidentifier),y=this.calculatePinActionLinkState(u,x);return {acceptedAnswerState:w,pinActionLinkState:y};};r.calculatePinActionLinkState=function(s,t){if(s.__typename==='local')return 'None';if(t===s.id)return 'MayUnpin';return 'MayPin';};function r(s){l.constructor.call(this,s);this.$UFICommentActions1=function(){this.context.dispatch(c('UFIStoryAction').changeAcceptedAnswer(this.props.contextArgs,this.props.comment,true));}.bind(this);this.$UFICommentActions2=function(){this.context.dispatch(c('UFIStoryAction').changeAcceptedAnswer(this.props.contextArgs,this.props.comment,false));}.bind(this);this.state=r.calculateState(null,s);}r.prototype.render=function(){var s,t=this.props,u=t.comment,v=t.permalink,w=t.feedback,x=t.parentCanComment,y=t.markedAsSpamHere,z=u.status===n.SPAM_DISPLAY,aa=t.showReplyLink,ba=t.hideAsSpamForPageAdmin,ca=void 0,da=void 0,ea=void 0,fa=void 0,ga=void 0,ha=void 0,ia=void 0,ja=void 0,ka=void 0,la=void 0,ma=void 0,na=void 0,oa=void 0,pa=void 0,qa=u.__typename!=='local'&&u.status!==n.LIVE_DELETED&&!u.tipOptionIndex;if(qa){if(u.needsApproval||u.canAppeal||u.canSecure||u.appealStatus!==null)na=c('React').createElement('a',{onClick:function(event){return this.context.dispatch(c('UFICommentAction').remove(t.contextArgs,t.comment,event.target,c('emptyFunction')));}.bind(this),href:'#',role:'button'},j._("Delete"));if(u.canAppeal&&u.appealStatus!==c('CommentApprovalsResponsibleUserAction').APPEALED)oa=c('React').createElement('a',{onClick:function(event){return this.context.dispatch(c('UFICommentAction').appealSpam(t.contextArgs,u,event.target,t.feedback));}.bind(this),href:'#',role:'button'},j._("Not Spam"));if(u.canSecure&&u.appealStatus!==c('CommentApprovalsResponsibleUserAction').SECURED_ACCOUNT)pa=c('React').createElement('a',{onClick:function(event){return this.context.dispatch(c('UFICommentAction').secureAccount(t.contextArgs,u,event.target,t.feedback));}.bind(this),href:'#',role:'button'},j._("I didn't post this"));if(u.needsApproval)ma=c('React').createElement('a',{onClick:function(event){return this.context.dispatch(c('UFICommentAction').keepSpam(t.contextArgs,u,event));}.bind(this),href:'#',role:'button'},j._("Keep Comment"));if(z&&!y){if(t.viewerCanMarkNotSpam)ca=c('React').createElement('a',{onClick:function(event){return this.context.dispatch(c('UFICommentAction').markAsNotSpam(t.contextArgs,u,event));}.bind(this),className:"UFICommentNotSpamLink",href:'#',role:'button'},j._("Unhide"));if(ba&&w.isthreaded&&u.cancomment&&aa)ha=this.renderCommentReply(u);}else{da=c('UFICommentLikeLink.react').getCanRender(u)?c('React').createElement(c('UFICommentLikeLink.react'),{comment:u,contextArgs:t.contextArgs,feedback:w}):null;if(w.isthreaded&&u.cancomment&&aa||!!u.parentcommentid&&w.cancomment&&x)ha=this.renderCommentReply(u);if(u.canviewerreact&&!t.contextArgs.isaskquestion){fa=u.reactioncount>0?c('React').createElement(c('UFICommentReactionCount.react'),{comment:u,actorForPost:w.actorforpost,supportedReactions:w.supportedreactions,contextArgs:t.contextArgs}):null;}else fa=u.likecount>0?c('React').createElement(c('UFICommentLikeCount.react'),{comment:u,actorForPost:w.actorforpost,contextArgs:t.contextArgs}):null;if(u.spamcount&&c('UFISpamCount').enabled)ga=c('React').createElement(c('UFISpamCount'),{count:u.spamcount});ia=this.renderMessageReply(u,w);}if(u.attachment&&u.attachment.type==='share'&&!u.attachment.disableRemove&&u.canremove){var ra="_460h";ja=c('React').createElement('a',{className:ra,href:'#',onClick:function(event){return this.context.dispatch(c('UFICommentAction').removePreview(t.contextArgs,u,event.target));}.bind(this),role:'button'},j._("Remove Preview"));}if(c('UFICommentShareLink.react').getCanRender(u))ea=c('React').createElement(c('UFICommentShareLink.react'),{contextArgs:t.contextArgs,comment:u});}if(c('UFIConfig').publicConversationsUnicornWhitelist)ka=c('React').createElement('a',{className:'share_action_link',href:'#',role:'button',title:'[FB Only] Mark this comment as a great comment for futher review.',onClick:function hb(event){return new (c('PublicConversationsUnicornTypedLogger'))().setCommentFbid(u.fbid).log();}},'Unicorn');var sa=t.contextArgs.islivestreaming?null:c('React').createElement(c('UFICommentMetadata.react'),{comment:u,onRetrySubmit:function(){return this.context.dispatch(c('UFIAddCommentAction').retrySubmit(t.contextArgs,u));}.bind(this),permalink:v,shortenTimestamp:t.contextArgs.shortenTimestamp,showPermalink:t.showPermalink,contextArgs:t.contextArgs}),ta=null;if(t.contextArgs.enablePinLiveComments&&!u.tipOptionIndex)if(t.contextArgs.islivestreaming&&this.state.pinActionLinkState!=='None'){ta=c('React').createElement(c('UFILivePinnedCommentLink.react'),{commentID:u.id,commentFBID:u.fbid,contextArgs:t.contextArgs,isPinned:this.state.pinActionLinkState==='MayUnpin'});}else if(t.contextArgs.isLiveVOD&&this.state.pinActionLinkState==='MayUnpin'){var ua=c('UFILivePinnedCommentStore').getPinEventID(t.contextArgs.ftentidentifier);if(ua!==null)ta=c('React').createElement(c('UFILiveVODUnpinCommentLink.react'),{commentID:u.id,contextArgs:t.contextArgs,pinEventID:ua});}var va={};if(w.customcommentactionlinks){var wa=function hb(ib){var jb=w.customcommentactionlinks[ib];if(jb.showInMenu)return 'continue';var kb=function lb(event){return c('UFICentralUpdates').inform(jb.type,{comment:u,feedback:w});};va[jb.type]=c('React').createElement('a',{href:'#',onClick:kb,role:'button'},jb.title);};for(var xa in w.customcommentactionlinks){var s=wa(xa);if(s==='continue')continue;}}var ya=void 0;if(u.needsApproval){ya=babelHelpers['extends']({keepToggle:ma,deleteToggle:na,metadata:sa},va);}else if(u.canAppeal||u.canSecure||(u.appealStatus===c('CommentApprovalsResponsibleUserAction').APPEALED||u.appealStatus===c('CommentApprovalsResponsibleUserAction').SECURED_ACCOUNT)&&!u.isApproved){ya=babelHelpers['extends']({appealToggle:oa,secureToggle:pa,deleteToggle:na,metadata:sa},va);}else if(this.props.orderingMode===c('WebCommentViewOption').LIVE_STREAMING){ya=babelHelpers['extends']({likeToggle:da,unicornButton:ka,spamToggle:ca,likeCount:fa,spamCount:ga,livePinCommentLink:ta,metadata:sa},va);}else if(w.isqanda){ya=babelHelpers['extends']({likeCount:fa,spamCount:ga,likeToggle:da,unicornButton:ka,commentReply:ha,shareComment:ea,messageReply:ia,spamToggle:ca},va,{livePinCommentLink:ta,metadata:sa,removePreview:ja});}else if(t.contextArgs.isaskquestion&&!u.parentcommentid){if(qa)la=this.renderAcceptAnswerButton(t.contextArgs,w,u);ya=babelHelpers['extends']({likeToggle:da,unicornButton:ka,commentReply:ha,messageReply:ia,spamToggle:ca,removePreview:ja,shareComment:ea,likeCount:fa,spamCount:ga,acceptAnswerButton:la},va,{livePinCommentLink:ta,metadata:sa});}else if(t.contextArgs.entstream){ya=babelHelpers['extends']({livePinCommentLink:ta,metadata:sa,likeToggle:da,unicornButton:ka,likeCount:fa,commentReply:ha,messageReply:ia,shareComment:ea,spamCount:ga,spamToggle:ca,removePreview:ja},va);}else if(w.isthreaded){ya=babelHelpers['extends']({likeToggle:da,unicornButton:ka,commentReply:ha,messageReply:ia,spamToggle:ca,removePreview:ja,shareComment:ea,likeCount:fa,spamCount:ga},va,{livePinCommentLink:ta,metadata:sa});}else ya=babelHelpers['extends']({livePinCommentLink:ta,metadata:sa,likeToggle:da,unicornButton:ka,shareComment:ea,likeCount:fa,spamCount:ga,commentReply:ha,messageReply:ia,spamToggle:ca,removePreview:ja},va);if(u.status===n.LIVE_DELETED){var za=j._("Comment deleted"),ab=c('React').createElement('span',{className:q},c('React').createElement('i',{'aria-label':za,className:p,'data-hover':'tooltip','data-tooltip-content':za,role:'img'}));ya.deletionWarning=ab;}if(u.isApproved){var bb=j._("This comment was originally marked as spam");ya.isApproved=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('Image.react').__setRef('UFICommentActions.react'),bootloadPlaceholder:c('React').createElement('span',null),'data-hover':'tooltip','data-tooltip-content':bb,'aria-label':bb,src:h("119369"),'data-tooltip-alignh':'left'});}var cb=true,db={};for(var eb in ya){var fb=ya[eb];if(fb){var gb=c('React').createElement(c('Middot.react'),{key:'middot-'+eb});db[eb]=cb?fb:c('ReactFragment').create({middot:gb,action:fb});cb=false;}}return c('React').createElement('div',{className:o},c('ReactFragment').create(db));};r.prototype.renderCommentReply=function(s){return c('React').createElement('a',{className:"UFIReplyLink _460i",href:'#',onClick:function(){var t=this.props,u=t.contextArgs,v=t.feedback;if(v.isthreaded&&s.cancomment){this.context.dispatch(c('UFIStoryAction').showReplies(u,s.id,s));}else if(s.parentcommentid)this.context.dispatch(c('UFIStoryAction').showReplies(u,s.parentcommentid,s));if(v.targetiscomment)c('UFISharedDispatcher').dispatch(c('UFIStoryAction').showComments(u));}.bind(this),role:'button'},j._("Reply"));};r.prototype.renderMessageReply=function(s,t){if(s.messagereply){if(c('UFIPrivateReplyLink.react').willRender(s.messagereply,t.actorforpost)){return c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:t.actorforpost,activityID:s.id,context:s.messagereply,seeResponseLabel:true});}else if(c('UFIPrivateReplyIndicator.react').willRender(s.messagereply.status))return c('React').createElement(c('UFIPrivateReplyIndicator.react'),{replyStatus:s.messagereply.status});}else if(s.chattobuy){var u="_460j";return c('React').createElement('a',{className:u,href:s.chattobuy,role:'button',rel:'async-dialog'},j._("Message"));}return null;};r.prototype.renderAcceptAnswerButton=function(s,t,u){var v=t.actorid===t.actorforpost;if(this.state.acceptedAnswerState.type==='NoneAccepted'){if(!v)return null;var w="_460k";return c('React').createElement('a',{className:w,onClick:this.$UFICommentActions1,role:'button',tabIndex:'0'},j._("Accept answer"));}if(this.state.acceptedAnswerState.id!==u.id)return null;var x="_460l";return v?c('React').createElement('a',{className:x,onClick:this.$UFICommentActions2,role:'button',tabIndex:'0'},j._("Unaccept answer")):j._("Accepted answer");};r.contextTypes={dispatch:m.func};f.exports=c('FluxContainer').create(r,{withProps:true});}),null);
__d("XAnimatedImageInLiveCommentPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/gifs\/in_live_comment\/",{});}),null);
__d("XVideoInLiveCommentPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/in_live_comment\/",{});}),null);
__d('UFICommentAttachment.react',['cx','AsyncRequest','BootloadedComponent.react','CSS','DOM','DOMQuery','HTML','Image.react','JSResource','Link.react','LitestandShareAttachment','Random','React','ReactDOM','SubscriptionsHandler','UFILocallyComposedCommentStore','XAnimatedImageInLiveCommentPreviewController','XUISpinner.react','XVideoInLiveCommentPreviewController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k='ufi_comment_photo',l=80,m='ufi_comment_sticker';i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.state={localCommentIDs:c('UFILocallyComposedCommentStore').getStateForInstance(this.props.comment.ufiinstanceid),randomInstanceID:Math.floor(c('Random').random()*10000)};}n.prototype.$UFICommentAttachment2=function(o){return o.photo_comment||o.video_comment||o.attachment;};n.prototype.$UFICommentAttachment3=function(o,p){var q=void 0,r=void 0,s=void 0;if(p>o){s=l/p;q=o*s;r=p*s;}else{s=l/o;q=o*s;r=p*s;}return {height:Math.round(q),width:Math.round(r)};};n.prototype.componentDidMount=function(){var o=this.$UFICommentAttachment2(this.props.comment);if(o)this.renderAttachment(o);this.$UFICommentAttachment1=new (c('SubscriptionsHandler'))();this.$UFICommentAttachment1.addSubscriptions(c('UFILocallyComposedCommentStore').addListener(function(){this.setState({localCommentIDs:c('UFILocallyComposedCommentStore').getStateForInstance(this.props.comment.ufiinstanceid)});}.bind(this)));};n.prototype.shouldComponentUpdate=function(o,p){var q=this.$UFICommentAttachment2(this.props.comment),r=this.$UFICommentAttachment2(o.comment);if(!q&&!r)return false;if(!q||!r||q.markup!=r.markup){return true;}else return false;};n.prototype.componentDidUpdate=function(o){var p=this.$UFICommentAttachment2(this.props.comment);if(!p)return;if(p.type!=='sticker'&&p.type!=='photo')this.renderAttachment(p);};n.prototype.componentWillUnmount=function(){if(this.refs&&this.refs.contents){var o=c('ReactDOM').findDOMNode(this.refs.contents);c('DOM').empty(o);}this.$UFICommentAttachment1&&this.$UFICommentAttachment1.release();};n.prototype.renderAttachment=function(o){if(o&&this.refs&&this.refs.contents&&o.markup){var p=o.markup;if(c('HTML').isHTML(p.markup))p=c('HTML').replaceJSONWrapper(p.markup).getRootNode();var q=p.parentNode,r=c('ReactDOM').findDOMNode(this.refs.contents);if(q&&q!==r)p=p.cloneNode(true);if(this.props.disableTheater){var s=p.querySelector('a[rel="theater"]');if(s)c('DOM').setAttributes(s,{target:'_blank',rel:''});}c('DOM').setContent(r,p);if(o.type=='share'){var t="_6m2",u=r&&c('CSS').hasClass(r,t)?r:c('DOMQuery').scry(r,'.'+t)[0];u=u?u:r;if(u instanceof HTMLElement)c('LitestandShareAttachment').init(u);}}else if(o&&o.type=='video'&&!o.markup){var v=c('XVideoInLiveCommentPreviewController').getURIBuilder();new (c('AsyncRequest'))(v.getURI()).setMethod('POST').setData({video_id:o.target.id}).setHandler(function(w){this.renderAttachment(w.payload.video_preview.video_comment);}.bind(this)).send();}else if(o&&o.type=='gif'&&!o.markup)new (c('AsyncRequest'))(c('XAnimatedImageInLiveCommentPreviewController').getURIBuilder().getURI()).setMethod('POST').setData({comment_id:this.props.comment.id,dom_selector:'div#'+this.$UFICommentAttachment4()}).send();};n.prototype.renderSticker=function(o){var p=this.$UFICommentAttachment3(Number(o.metadata.height),Number(o.metadata.width)),q=null,r=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){q=o.metadata.sprite_uri_2x;r=o.metadata.source_uri_2x;}else{q=o.metadata.sprite_uri;r=o.metadata.source_uri;}return c('React').createElement(c('BootloadedComponent.react'),{accessibilityLabel:o.metadata.accessibilityLabel,bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),null),bootloadLoader:c('JSResource')('Sticker.react').__setRef('UFICommentAttachment.react'),animationTrigger:'load_and_hover',frameCount:o.metadata.frameCount,frameRate:o.metadata.frameRate,framesPerCol:o.metadata.framesPerCol,framesPerRow:o.metadata.framesPerRow,spriteURI:q,sourceHeight:p.height,sourceURI:r,sourceWidth:p.width,testID:m});};n.prototype.renderPhoto=function(o){var p="_2rn3 _4-eo";return c('React').createElement('div',{className:"_4iv9"},c('React').createElement(c('Link.react'),{className:p,'data-testid':k,href:o.metadata.url},c('React').createElement('div',{style:{height:o.metadata.height}},c('React').createElement(c('Image.react'),{src:o.metadata.preview_uri}))));};n.prototype.renderShare=function(o){return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('UFILiveCommentLinkPreview.react').__setRef('UFICommentAttachment.react'),attachment:o});};n.prototype.renderLivePlaceInfo=function(o){return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('PlaceListLiveCommentAttachment.react').__setRef('UFICommentAttachment.react'),commentID:this.props.comment.fbid,data:o,postID:this.props.comment.ftentidentifier});};n.prototype.renderPlaceInfo=function(o){var p=this.props.comment.__typename==='local'||this.state.localCommentIDs[this.props.comment.id];return c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),null),bootloadLoader:c('JSResource')('MultiPlacePageInfoCard.react').__setRef('UFICommentAttachment.react'),isLocallyComposed:p},o.props));};n.prototype.renderProductInfo=function(o){return c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),null),bootloadLoader:c('JSResource')('ProductRecommendationCard.react').__setRef('UFICommentAttachment.react')},o.props));};n.prototype.$UFICommentAttachment4=function(){return 'gif_comment_attachment_'+this.props.comment.id+this.state.randomInstanceID;};n.prototype.render=function(){var o=this.$UFICommentAttachment2(this.props.comment);if(o)if(o&&o.type==='sticker'){return this.renderSticker(o);}else if(o&&o.type==='gif'){return c('React').createElement('div',{ref:'contents',id:this.$UFICommentAttachment4()},c('React').createElement(c('XUISpinner.react'),null));}else if(o&&o.type==='photo'){return this.renderPhoto(o);}else if(o&&o.type==='live_share'){return this.renderShare(o);}else if(o&&o.type=='comment_place_info'){return this.renderPlaceInfo(o);}else if(o&&o.type=='live_comment_place_info'){return this.renderLivePlaceInfo(o);}else if(o&&o.type=='comment_product_info'){return this.renderProductInfo(o);}else return c('React').createElement('div',{ref:'contents'});return c('React').createElement('span',null);};f.exports=n;}),null);
__d('HovercardLinkInterpolator',['cx','fbt','Badge.react','HovercardLink','Link.react','React','URI','isFacebookURI','isRTL'],(function a(b,c,d,e,f,g,h,i){function j(k,l,m,n,o){var p=arguments.length<=5||arguments[5]===undefined?null:arguments[5],q=l.entity,r=m||(q.external?'_blank':null),s,t=(!q.external?"profileLink":'')+(q.weakreference?' '+"weakReference":''),u,v=q.hashtag?k.substring(1):k;u=c('isRTL')(v)?'rtl':'ltr';var w=new (c('URI'))(q.url);if(c('isFacebookURI')(w))w.addQueryData({hc_location:o});var x=q.shimhash?q.shimhash:null,y=!q.external&&!q.hashtag&&!q.photo&&!q.note&&!q.statusupdate&&!q.video,z=y?{'data-hovercard':c('HovercardLink').constructEndpointWithGroupLocationAndExtraParams(q,n,q.hovercardlocation?q.hovercardlocation:o,null,p).toString()}:{};if(q.hashtag){s=c('React').createElement('a',babelHelpers['extends']({},z,{className:"_58cn",dir:u,href:w.toString(),target:r}),c('React').createElement('span',{'aria-label':i._("hashtag"),className:"_58cl"},k.substring(0,1)),c('React').createElement('span',{className:"_58cm"},k.substring(1)));}else{var aa=[];if(q.weakreference)aa.push(c('React').createElement('i',{key:'weakreference',className:'UFIWeakReferenceIcon'}));aa.push(k);if(q.noncoworker)aa.push(c('React').createElement(c('Badge.react'),{key:'noncoworker',type:'work_non_coworker'}));if(q.dialogurl){s=c('React').createElement(c('Link.react'),babelHelpers['extends']({},z,{className:t,dir:u,ajaxify:q.dialogurl,rel:'dialog',target:r}),aa);}else s=c('React').createElement(c('Link.react'),babelHelpers['extends']({},z,{className:t,dir:u,href:{url:w.toString(),shimhash:x},target:r}),aa);}return s;}f.exports=j;}),null);
__d('URITruncator',['fbt','URI'],(function a(b,c,d,e,f,g,h){var i=3,j=h._("..."),k=j.length||j.toString().length;function l(m,n){if(!m||n===undefined||m.length<=n||n<=k||m.toString().length<=k)return m;if(!c('URI').isValidURI(m))return m.substring(0,n-k)+j;var o=new (c('URI'))(m),p=o.getOrigin();if(p.length>n-k)return p.substring(0,n-k)+j;var q=false;if(!!o.getFragment()){q=true;o.setFragment('');if(o.toString().length<=n-k)return o.toString()+j;}var r=o.getQueryData();if(r){var s=Object.keys(r);if(s.length>0){q=true;for(var t=s.length-1;t>=0;t--){o.removeQueryData(s[t]);if(o.toString().length<=n-k)return o.toString()+j;}}}var u=o.getPath()+(q?j:''),v=u.split('/'),w=p.length+u.length-n,x=0;while(w>0&&v.length>x+1){var y=x+1,z=v[y];if(w+k+i<=z.length){var aa=z.length-1,ba=z.length-w-k,ca=/[a-zA-Z0-9]/;w+=k;while(w>0){while(aa>0&&ca.test(z[aa])){aa--;w--;}while(aa>0&&!ca.test(z[aa])){aa--;w--;}}if(aa===0)aa=ba-1;v[y]=z.substring(0,aa+1)+j;}else{x++;w-=z.length;if(x===1){w+=k;}else w--;}}if(x>0){if(v[v.length-1].length===0&&v.length===x+2)x++;v.splice(1,x,j);}var da=p+v.join('/');if(da.length>n)da=da.substring(0,n-k)+j;return da;}f.exports=l;}),null);
__d('VideoTimestampsClicksWWWTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:VideoTimestampsClicksWWWLoggerConfig',this.$VideoTimestampsClicksWWWTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:VideoTimestampsClicksWWWLoggerConfig',this.$VideoTimestampsClicksWWWTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$VideoTimestampsClicksWWWTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$VideoTimestampsClicksWWWTypedLogger1=babelHelpers['extends']({},this.$VideoTimestampsClicksWWWTypedLogger1,j);return this;};h.prototype.setCommentID=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.comment_id=j;return this;};h.prototype.setIsContentTimestamp=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.is_content_timestamp=j;return this;};h.prototype.setLocalCommentFeedbackID=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.local_comment_feedback_id=j;return this;};h.prototype.setVC=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.vc=j;return this;};h.prototype.setVideoTimestamp=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.video_timestamp=j;return this;};var i={comment_id:true,is_content_timestamp:true,local_comment_feedback_id:true,vc:true,video_timestamp:true};f.exports=h;}),null);
__d('transformTextRanges',['UnicodeUtils'],(function a(b,c,d,e,f,g){var h=function i(j,k,l){if(!j||!k||!l)return j;k.sort(function(s,t){return s.offset-t.offset;});var m=0;for(var n=0;n<k.length;n++){k[n].offset+=m;var o=c('UnicodeUtils').substr(j,k[n].offset,k[n].length),p=c('UnicodeUtils').strlen(o),q=l(o,k[n]),r=c('UnicodeUtils').strlen(q);if(o!==q){j=c('UnicodeUtils').substr(j,0,k[n].offset)+q+c('UnicodeUtils').substr(j,k[n].offset+k[n].length);k[n].length=r;m+=r-p;}}return j;};f.exports=h;}),null);
__d('UFICommentUtils',['Bootloader','HovercardLinkInterpolator','React','UFIConstants','UFIVideoPlayerRegistry','URI','URITruncator','VideoTimestampsClicksWWWTypedLogger','transformTextRanges'],(function a(b,c,d,e,f,g){'use strict';var h={getCommentTextWithTruncatedURIs:function i(j,k){if(c('UFIConstants').commentURLTruncationLength)if(j&&j.length>0)k=c('transformTextRanges')(k,j,function(l,m){var n=m.entity.external||m.entity.__type__&&m.entity.__type__.name==='ExternalUrl';return n?c('URITruncator')(l,c('UFIConstants').commentURLTruncationLength):l;});return k;},getCommentBodyInterpolator:function i(j,k,l,m){return function(n,o){if(o.videoTimestamp){if(m)return c('React').createElement('span',null,o.entity);var p=function t(u){u.preventDefault();new (c('VideoTimestampsClicksWWWTypedLogger'))().setVideoTimestamp(o.integerTimestamp).setCommentID(l).setIsContentTimestamp(false).log();if(k){c('UFIVideoPlayerRegistry').seekAvailableVideoPlayerController(k,o.integerTimestamp);c('UFIVideoPlayerRegistry').scrollToAvailableVideo(k);}return false;};return c('React').createElement('a',{className:'TimestampLink',onClick:p,href:'#'},o.entity);}else if(o.sphericalViewport){var q=function t(u){u.preventDefault();if(k)c('UFIVideoPlayerRegistry').setAvailableVideoPlayerControllerSphericalViewport(k,{yaw:o.yaw,pitch:o.pitch});return false;};return c('React').createElement('a',{onClick:q,href:'#'},o.entity);}else if(o.sphericalViewportAndTimestamp){var r=function t(u){u.preventDefault();if(k){c('UFIVideoPlayerRegistry').setAvailableVideoPlayerControllerSphericalViewport(k,{yaw:o.yaw,pitch:o.pitch});c('UFIVideoPlayerRegistry').seekAvailableVideoPlayerController(k,o.integerTimestamp);}return false;};return c('React').createElement('a',{onClick:r,href:'#'},o.entity);}else if(o.entity&&o.entity.__type__=='EntTextDelightCampaign'){var s=null;if(o.animationURI)s=function t(u){u.preventDefault();c('Bootloader').loadModules(["TextDelightAnimation"],function(v){v.playCommentAnimationOnTap(o.animationURI,o.entity.id);},'UFICommentUtils');};return c('React').createElement('span',{style:o.highlightStyle,onClick:s},n);}else return c('HovercardLinkInterpolator')(n,o,'_blank',j,'ufi');};},shallowCopyRanges:function i(j){if(!j)return j;var k=[];j.forEach(function(l){k.push(babelHelpers['extends']({},l));});return k;},annotateProfileURIIfPublic:function i(j,k){if(!j)return k;return new (c('URI'))(k).addQueryData('rc','p').toString();},shouldShowTranslateAll:function i(j,k,l,m){if(!j)return false;var n=0,o=void 0,p=void 0;for(var q=0;q<j.length;q++){o=j[q];if(o.istranslatable&&!o.translationdata&&!m[o.id])n++;if(n>1)return true;if(l[o.id]){p=k?k[o.id]:[];for(var r=0;r<p.length;r++){o=p[r];if(o.istranslatable&&!o.translationdata&&!m[o.id])n++;if(n>1)return true;}}}return false;}};f.exports=h;}),null);
__d('UFIActor.react',['cx','fbt','Badge.react','Focus','HovercardLink','Locale','React','ReactDOM','UFICommentUtils','UFIConfig','UserHovercardLocation'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.componentDidMount=function(){if(this.props.focusOnMount)c('Focus').setWithoutOutline(c('ReactDOM').findDOMNode(this.refs.authorName));};l.prototype.render=function(){var m=this.props.author,n=c('Locale').isRTL()?'rtl':'ltr',o=(this.props.isAuthorWeakReference?"weakReference":'')+(' '+"UFICommentActorName"),p=[];if(this.props.isAuthorWeakReference)p.push(c('React').createElement('i',{className:'UFIWeakReferenceIcon',key:'icon'}));if(this.props.useFirstName){p.push(m.firstName);}else if(this.props.author.isBusinessPersona&&this.props.author.assetRole){p.push(m.name+' '+i._("(")+this.props.author.assetRole+i._(")"));}else p.push(m.name);if(this.props.isAuthorNonCoworker)p.push(c('React').createElement(c('Badge.react'),{key:'noncoworker',type:'work_non_coworker'}));var q=this.props.customTextTag;if(q&&q.text&&q.classname)p.push(c('React').createElement('span',{className:q.classname,key:'customtexttag'},q.text));var r=this.props.isAdminViewer?c('UserHovercardLocation').UFI_ADMIN:c('UserHovercardLocation').UFI,s=Object.assign({},this.props);delete s.author;delete s.customTextTag;delete s.delimiter;delete s.dialogUrl;delete s.disableAuthorLink;delete s.focusOnMount;delete s.groupOrEventID;delete s.hovercardLocation;delete s.isAdminViewer;delete s.isAuthorNonCoworker;delete s.isAuthorWeakReference;delete s.isPublic;delete s.showHovercard;delete s.useFirstName;var t=this.props.showHovercard?c('HovercardLink').constructEndpointWithGroupLocationAndExtraParams(m,this.props.groupOrEventID,this.props.hovercardLocation?this.props.hovercardLocation:r,this.props.isAuthorWeakReference,{is_public:this.props.isPublic}).toString():null,u=m.uri&&!this.props.disableAuthorLink?c('React').createElement('a',babelHelpers['extends']({},s,{className:o,'data-hovercard':t,'data-ft':this.props['data-ft'],dir:n,href:c('UFICommentUtils').annotateProfileURIIfPublic(!!this.props.isPublic,m.uri),ref:'authorName'}),p):c('React').createElement('span',{className:o,dir:n,ref:'authorName'},p);if(this.props.dialogUrl)u=c('React').createElement('a',babelHelpers['extends']({},s,{className:o,'data-hovercard':t,'data-ft':this.props['data-ft'],dir:n,ajaxify:this.props.dialogUrl,rel:'dialog',ref:'authorName'}),p);return c('React').createElement('span',{className:c('UFIConfig').showCommonalityContext&&this.props.commonalityString?"UFICommentActorNameSpan":''},u,c('React').Children.map(this.props.children,function(v){return v?[v.key==='badge'||v.key==='constituentTitle'||v.key==='commonalityContext'||v.key==='neighborBadge'?'':this.props.delimiter,v]:null;}.bind(this)));};function l(){j.apply(this,arguments);}l.defaultProps={delimiter:' \u00b7 ',isAdminViewer:false,isPublic:false};f.exports=l;}),null);
__d('UFICommonalityContext.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){return c('React').createElement('span',{className:'UFICommentCommonalityContext',title:this.props.commonalityString},this.props.commonalityString);};function k(){h.apply(this,arguments);}k.PropTypes={commonalityString:j.string.isRequired};f.exports=k;}),null);
__d('UFISocialContext.react',['fbt','HovercardLink','ProfileBrowserLink','ProfileBrowserTypes','React','URI'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=27;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.topMutualFriend,n=this.props.otherMutualCount,o=this.props.commentAuthor,p=c('HovercardLink').constructEndpoint(m).toString(),q=c('React').createElement('a',{href:m.uri,'data-hovercard':p,key:'top'},m.name),r=o.name.length+m.name.length,s=void 0;if(n===0){s=h._("Friends with {name}",[h.param('name',q)]);}else if(r<k){var t=void 0;if(n==1){t=h._("1 other");}else t=h._({"*":"{count} others"},[h.param('count',n,[0])]);s=h._("Friends with {name} and {others}",[h.param('name',q),h.param('others',this.getOthersLink(t,o,m))]);}else{var u=h._({"*":"{count} mutual friends"},[h.param('count',n+1,[0])]);s=this.getOthersLink(u,o);}return c('React').createElement('span',{className:'UFICommentSocialContext'},s);};l.prototype.getOthersLink=function(m,n,o){var p=c('ProfileBrowserTypes').MUTUAL_FRIENDS,q={uid:n.id},r=new (c('URI'))('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:n.id});if(o)r.addQueryData({exclude_id:o.id});var s=c('ProfileBrowserLink').constructDialogURI(p,q).toString();return c('React').createElement('a',{ajaxify:s,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':r.toString(),href:c('ProfileBrowserLink').constructPageURI(p,q).toString(),key:'others',rel:'dialog'},m);};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d('UFICommentAuthorName.react',['Badge.react','React','TrackingNodes','UFIActor.react','UFICommonalityContext.react','UFIConfig','UFISocialContext.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props,m=l.author,n=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_NAME);return c('React').createElement(c('UFIActor.react'),{author:m,'data-ft':n,commonalityString:l.commonalityString,disableAuthorLink:l.disableAuthorLink,focusOnMount:l.focusOnMount,customTextTag:l.customTextTag,groupOrEventID:l.groupOrEventID,hovercardLocation:l.hovercardLocation,isAdminViewer:l.isAdminViewer,isAuthorNonCoworker:l.isAuthorNonCoworker,isAuthorWeakReference:l.isAuthorWeakReference,isPublic:this.props.isPublic,key:'author',dialogUrl:l.dialogUrl,showHovercard:l.showHovercard,useFirstName:l.useFirstName},l.isFeatured?c('React').createElement(c('Badge.react'),{key:'badge',size:'xsmall',type:'verified'}):null,this.$UFICommentAuthorName1(m),this.$UFICommentAuthorName2(l.neighborBadge),l.socialContext?c('React').createElement(c('UFISocialContext.react'),{topMutualFriend:l.authorProfiles[l.socialContext.topmutualid],otherMutualCount:l.socialContext.othermutualcount,commentAuthor:m}):null,c('UFIConfig').showCommonalityContext&&l.commonalityString?c('React').createElement(c('UFICommonalityContext.react'),{commonalityString:l.commonalityString,key:'commonalityContext'}):null);};k.prototype.$UFICommentAuthorName1=function(l){var m=this.props.constituentTitle;if(m&&m.titleModule&&m.titleModule instanceof Function){var n=m.titleModule;return c('React').createElement(n,{authorFirstName:l.firstName,authorId:l.id,commentId:m.commentId,ftId:m.ftId,isOwner:m.isOwner,key:'constituentTitle',officeTitle:m.officeTitle,representativeName:m.representativeName,representativeId:m.representativeId,upsellEnabled:m.upsellEnabled});}else return null;};k.prototype.$UFICommentAuthorName2=function(l){if(l&&l.component&&l.component instanceof Function){var m=l.component,n=l.props;return c('React').createElement(m,babelHelpers['extends']({key:'neighborBadge'},n));}return null;};function k(){h.apply(this,arguments);}k.propTypes={author:j.object.isRequired,authorProfiles:j.object.isRequired,commonalityString:j.string,constituentTitle:j.object,customTextTag:j.object,dialogUrl:j.string,disableAuthorLink:j.bool,focusOnMount:j.bool,groupOrEventID:j.string,hovercardLocation:j.string,isAdminViewer:j.bool,isAuthorNonCoworker:j.bool,isAuthorWeakReference:j.bool,isFeatured:j.bool,isPublic:j.bool,neighborBadge:j.object,showHovercard:j.bool,socialContext:j.object,useFirstName:j.bool};f.exports=k;}),null);
__d('IntlLang',['UnicodeBidi'],(function a(b,c,d,e,f,g){'use strict';var h={HE:'\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF'+'\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA'+'\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828'+'\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E'+'\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C'+'\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F'},i=new RegExp('['+h.HE+']');function j(l){var m=c('UnicodeBidi').firstStrongChar(l);if(m===null)return null;if(i.exec(m))return 'he';return null;}var k={getLang:j};f.exports=k;}),null);
__d('findSplitPointForText',[],(function a(b,c,d,e,f,g){function h(i,j,k){var l=null,m=i.split('\n');if(j&&i.length>j)l=j;if(k&&m.length>k){var n=m.slice(0,k).join('\n').length;if(l!==null){l=Math.min(n,l);}else l=n;}return l;}f.exports=h;}),null);
__d('partitionTextAndRanges',['UnicodeUtils'],(function a(b,c,d,e,f,g){function h(k,l){var m=k.offset+k.length;return l>k.offset&&l<m;}function i(k,l){for(var m=0;m<k.length;m++){var n=k[m];if(h(n,l))return n.offset;}return l;}var j=function k(l,m,n){var o=[],p=[],q=i(m,n);for(var r=0;r<m.length;r++){var s=m[r];if(s.offset<q){o.push(s);}else p.push(babelHelpers['extends']({},s,{offset:s.offset-q}));}return {before:{ranges:o,text:c('UnicodeUtils').substr(l,0,q)},after:{ranges:p,text:c('UnicodeUtils').substr(l,q)}};};f.exports=j;}),null);
__d('TruncatedTextWithEntities.react',['React','SeeMore.react','TextWithEntities.react','findSplitPointForText','partitionTextAndRanges'],(function a(b,c,d,e,f,g){var h,i,j=30;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$TruncatedTextWithEntities1=function(q){if(!this.props.allowSeeMoreLinebreakOnLongWords||!q)return false;if(q.length<=j)return false;var r=/(^|\s)(\S+)$/,s=r.exec(q),t=s?s[2]:null;return !!(t&&t.length>j);}.bind(this),m;}k.prototype.render=function(){'use strict';var l=this.props.text||'',m=this.props.ranges||[];l=l.replace(/\s*$/,'');var n=this.props.maxLines,o=this.props.maxLength;if(o&&l.length>o){var p=this.props.truncationPercent||.6;o=Math.floor(p*o);}var q=null;if(!this.props.shouldExpand)q=c('findSplitPointForText')(l,o,n);if(q!==null){while(l[q-1]==='\n')q--;var r=c('partitionTextAndRanges')(l,m,q),s=this.$TruncatedTextWithEntities1(r.before.text);return c('React').createElement('span',{'data-ft':this.props['data-ft'],dir:this.props.dir,lang:this.props.lang},c('React').createElement(c('SeeMore.react'),{className:this.props.className,clickCallback:this.props.markViewerHasInteracted,allowSeeMoreLinebreak:s},c('React').createElement(c('TextWithEntities.react'),{interpolator:this.props.interpolator,ranges:r.before.ranges,aggregatedRanges:this.props.aggregatedRanges,text:r.before.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}),c('React').createElement(c('TextWithEntities.react'),{interpolator:this.props.interpolator,ranges:r.after.ranges,aggregatedRanges:this.props.aggregatedRanges,text:r.after.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji})));}else return c('React').createElement('span',{'data-ft':this.props['data-ft'],dir:this.props.dir,lang:this.props.lang},c('React').createElement(c('TextWithEntities.react'),{className:this.props.className,interpolator:this.props.interpolator,ranges:m,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:l,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}));};f.exports=k;}),null);
__d('UFICommentBody.react',['cx','IntlLang','Locale','React','TrackingNodes','TruncatedTextWithEntities.react','UFICommentUtils','UFIConfig','UFIConstants','UnicodeBidi'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.commentText,o=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_MESSAGE),p=c('UnicodeBidi').isDirectionLTR(n),q=!p,r=p&&c('Locale').isRTL()?'ltr':q&&!c('Locale').isRTL()?'rtl':null,s=c('IntlLang').getLang(n),t=c('UFICommentUtils').getCommentBodyInterpolator(m.groupOrEventID,m.ufiInstanceID,m.commentFBID,!!m.isLiveStreaming),u=c('React').createElement(c('TruncatedTextWithEntities.react'),{key:'comment-body',className:"UFICommentBody",interpolator:t,ranges:m.commentRanges,text:n,truncationPercent:c('UFIConstants').commentTruncationPercent,maxLength:m.maxLength,maxLines:m.maxLines,renderEmoticons:c('UFIConfig').renderEmoticons,renderEmoji:c('UFIConfig').renderEmoji,'data-ft':o,dir:r,lang:s,markViewerHasInteracted:this.props.markViewerHasInteracted,allowSeeMoreLinebreakOnLongWords:true,shouldExpand:this.props.shouldExpand});if(m.socialContext){u=c('React').createElement('div',{key:'body'},u);}else{var v=(p&&c('Locale').isRTL()?"_5wjy":'')+(p&&c('Locale').isRTL()?' '+"_5wjz":'')+(q&&!c('Locale').isRTL()?' '+"_5wj-":'')+(q&&!c('Locale').isRTL()?' '+"_5wj_":'');u=v?c('React').createElement('div',{key:'body',className:v},u):[' ',u];}return c('React').createElement('span',null,u);};function l(){i.apply(this,arguments);}l.propTypes={commentText:k.string.isRequired,commentRanges:k.array,groupOrEventID:k.string,maxLength:k.number,maxLines:k.number,socialContext:k.object,markViewerHasInteracted:k.func,ufiInstanceID:k.string,commentFBID:k.oneOfType([k.string,k.number]),isLiveStreaming:k.bool,shouldExpand:k.bool};f.exports=l;}),null);
__d('UFICommentLiveVideoAnnouncementImage.react',['ix','cx','Image.react','LiveVideoAnnouncementGlyph','React','fbglyph'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.render=function(){var m=this.$UFICommentLiveVideoAnnouncementImage1();if(!m)return c('React').createElement('span',null);return this.props.isJoinEvent?c('React').createElement('div',{className:"_15lj"},c('React').createElement(c('Image.react'),{className:"_24l1",src:m})):c('React').createElement('div',{className:"_15lj",style:{backgroundColor:'gray'}},c('React').createElement(c('Image.react'),{className:"_15lk",height:20,src:m,width:20}));};l.prototype.$UFICommentLiveVideoAnnouncementImage1=function(){if(this.props.image)return this.props.image;switch(this.props.glyphName){case c('LiveVideoAnnouncementGlyph').COMMENT:return h("114673");case c('LiveVideoAnnouncementGlyph').EYE:return h("114860");case c('LiveVideoAnnouncementGlyph').BULB:return h("114492");case c('LiveVideoAnnouncementGlyph').LIKE:return h("115160");default:return null;}};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('XUIEditButton.react',['cx','fbt','XUIAbstractGlyphButton.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';var m=this.props.label,n=this.props.title;if(!this.props.title&&!this.props.tooltip)n=m;return c('React').createElement(c('XUIAbstractGlyphButton.react'),babelHelpers['extends']({},this.props,{label:m,title:n,'data-hover':this.props.tooltip&&'tooltip','data-tooltip-alignh':this.props.tooltip&&'center','data-tooltip-content':this.props.tooltip,className:c('joinClasses')(this.props.className,"_5upq _5upr")}));};function l(){'use strict';j.apply(this,arguments);}l.defaultProps={label:i._("Edit")};f.exports=l;}),null);
__d('UFICommentMenu.react',['ix','cx','Bootloader','Image.react','React','XUICloseButton.react','XUIEditButton.react','fbglyph','joinClasses','keyMirror'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l,m,n,o,p=c('React').PropTypes,q=void 0,r=void 0,s=void 0,t=void 0,u=c('keyMirror')({EDIT:true,CLOSE:true,CHEVRON:true,TOOLTIP:true});j=babelHelpers.inherits(v,c('React').Component);k=j&&j.prototype;function v(){var y,z;for(var aa=arguments.length,ba=Array(aa),ca=0;ca<aa;ca++)ba[ca]=arguments[ca];return z=(y=k.constructor).call.apply(y,[this].concat(ba)),this.state={bootloading:false,bootloaded:false,needsExpand:false},this.onClickGuard=function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});c('Bootloader').loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],function(da,ea,fa){q=da;r=ea;s=fa;t=fa.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}.bind(this),'UFICommentMenu.react');}else if(this.props.onClick)this.props.onClick(event);}.bind(this),z;}v.prototype.shouldComponentUpdate=function(y,z){if(this.state.needsExpand&&!z.needsExpand)return false;return true;};v.prototype.render=function(){var y=void 0;switch(this.props.menuType){case u.EDIT:y=c('XUIEditButton.react');break;case u.CLOSE:y=c('XUICloseButton.react');break;case u.TOOLTIP:y=w;break;case u.CHEVRON:default:y=x;break;}if(this.props.menuData&&this.state.bootloaded){var z=this.props.menuData.map(function(ba){return c('React').createElement(t,{'data-testid':ba.testid,key:ba.value,value:ba.value},ba.label);}),aa=c('React').createElement(s,{onItemClick:this.props.onAction},z);return c('React').createElement(r,babelHelpers['extends']({},this.props,{alignh:'right',layerBehaviors:[q],menu:aa,ref:'menu'}),c('React').createElement(y,babelHelpers['extends']({},this.props,{href:'#',onClick:this.onClickGuard})));}return c('React').createElement(y,babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_1-be"),href:'#',onClick:this.onClickGuard}));};v.prototype.componentDidUpdate=function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}};v.MenuType=u;v.propTypes={menuData:p.array,menuType:p.oneOf(Object.keys(u)).isRequired,onAction:p.func,onClick:p.func};l=babelHelpers.inherits(w,c('React').Component);m=l&&l.prototype;w.prototype.render=function(){return c('React').createElement('a',this.props,c('React').createElement(c('Image.react'),{'data-hover':'tooltip','data-tooltip-content':this.props.tooltip,'aria-label':this.props.tooltip,src:h("126426"),'data-tooltip-alignh':'center'}));};function w(){l.apply(this,arguments);}n=babelHelpers.inherits(x,c('React').Component);o=n&&n.prototype;x.prototype.render=function(){return c('React').createElement('a',this.props,c('React').createElement(c('Image.react'),{'data-hover':'tooltip','data-tooltip-content':this.props.tooltip,'aria-label':this.props.tooltip,src:h("125792")}));};function x(){n.apply(this,arguments);}f.exports=v;}),null);
__d('UFICommentTranslation.react',['cx','ContentTranslationStrings','Link.react','React','TranslationTrigger','TruncatedTextWithEntities.react','UFIConfig','UFIConstants','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);var m=this.props.translationData;this.state={shouldExpand:this.props.shouldExpand||!!m&&m.trigger===c('TranslationTrigger').SEE_TRANSLATION};}k.prototype.render=function(){if(!this.props.showTranslation)return c('React').createElement(c('Link.react'),{className:"UFITranslateLink",onClick:function(){return this.$UFICommentTranslation1();}.bind(this)},c('ContentTranslationStrings').SEE_TRANSLATION);var l=this.props.translationData;if(!l)return c('React').createElement('div',{className:"UFITranslateLink"},c('React').createElement(c('XUISpinner.react'),{background:'light',size:'small'}));var m=l.translatedText;if(!m||!m.text)return c('React').createElement('div',{className:"UFITranslationErrorText"},c('ContentTranslationStrings').NO_TRANSLATION_AVAILABLE);var n=this.props.isShowingOriginal||l.trigger===c('TranslationTrigger').LOGGED_OUT_AUTO_TRANSLATION,o=n?null:c('React').createElement('div',{className:"UFITranslateAttribution"},c('ContentTranslationStrings').getTranslatedFrom(l.sourceDialectName)),p=n?c('React').createElement('div',{className:"UFITranslateAttribution"},c('ContentTranslationStrings').AUTOMATICALLY_TRANSLATED):c('React').createElement(c('Link.react'),{className:"UFITranslateLink",onClick:function(){return this.$UFICommentTranslation2();}.bind(this)},c('ContentTranslationStrings').SEE_ORIGINAL_LINK);return c('React').createElement('div',null,o,c('React').createElement('div',{className:"UFITranslatedText"},c('React').createElement(c('TruncatedTextWithEntities.react'),{className:"UFICommentBody",ranges:m.ranges,text:m.text,truncationPercent:c('UFIConstants').commentTruncationPercent,maxLength:c('UFIConstants').commentTruncationLength,maxLines:c('UFIConstants').commentTruncationMaxLines,renderEmoticons:c('UFIConfig').renderEmoticons,renderEmoji:c('UFIConfig').renderEmoji,dir:m.dir,shouldExpand:this.state.shouldExpand,markViewerHasInteracted:function(){return this.setState({shouldExpand:!this.state.shouldExpand});}.bind(this)}),p));};k.prototype.$UFICommentTranslation1=function(){this.props.onSeeTranslation&&this.props.onSeeTranslation();};k.prototype.$UFICommentTranslation2=function(){this.props.onSeeOriginal&&this.props.onSeeOriginal();};k.defaultProps={shouldExpand:false};f.exports=k;}),null);
__d('UFICommentVPVDLogging',['csx','Banzai','Parent','UFIConfig','UFIOrderingModeStore','UFIStopWatch','UFIStreamingCommentsMode','WebCommentViewOption'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('UFIConfig').commentVPVD;function j(k){var l=k.renderedComment,m=l.comment,n=l.isLivePinnedComment,o=k.contextArgs,p=k.node,q=k.stopWatch;if(q.state()===c('UFIStopWatch').COUNTING)return {state:'still visible - not logged',instanceid:o.instanceid,fbid:m.fbid,duration_ms:q.milliseconds()};var r=q.milliseconds();if(r>=0&&r<i.min_duration_to_log)return {state:'small duration - not logged',instanceid:o.instanceid,fbid:m.fbid,duration_ms:r};var s=null,t=null;if(p){var u=c('Parent').byClass(p,"public/feedobject/root");if(u){var v=u.getAttribute('data-ft');if(v)s=JSON.parse(v);t=u.getAttribute('data-referrer');}}var w=c('UFIOrderingModeStore').getState().get(o.instanceid),x=c('UFIStreamingCommentsMode').NONE;if(w===c('WebCommentViewOption').LIVE_STREAMING)if(o.islivestreaming){x=c('UFIStreamingCommentsMode').LIVE;}else if(o.isLiveVOD)x=c('UFIStreamingCommentsMode').ON_DEMAND;var y={comment_fbid:m.fbid,comment_id:m.id,container_module:o.location,duration_ms:r,is_live_pinned_comment:n,is_on_sponsored_story:!!o.isSponsored,is_page_comment:!!o.isPage,is_reply:!!m.parentcommentid,mf_story_key:s?s.mf_story_key:null,order_mode:w,qid:s?s.qid:null,referrer_source:t,streaming_comments_mode:x};q.reset();c('Banzai').post('comment_vpvd',y);return babelHelpers['extends']({state:'logged',instanceid:o.instanceid,fbid:m.fbid,duration_ms:r},y);}f.exports={log:j};}),null);
__d('UFICommentVPVDState',['invariant','Arbiter','Parent','UFICommentVisibilityStore','UFICommentVPVDLogging','UFIConfig','UFIRootRegistry','UFIStopWatch','UFIVisibility','UserActivity','ViewportTrackingHelper','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('UFIConfig').commentVPVD,j={INFOCUS:'INFOCUS',BLURRED_NEW:'BLURRED_NEW',BLURRED_INACTIVE:'BLURRED_INACTIVE',BLURRED_SNOWLIFT_OTHER:'BLURRED_SNOWLIFT_OTHER',BLURRED_UNDER_LAYER:'BLURRED_UNDER_LAYER',BLURRED_NO_NODE:'BLURRED_NO_NODE'},k='changed',l=new (c('Arbiter'))(),m=null,n=false,o=false,p={};function q(w){if(!i.debug_console)return;console.table&&console.table([{isFocusInLayer:n,isSnowliftOpen:o,userIsActive:c('UserActivity').isActive(i.idle_timeout)}]);console.table&&console.table(Object.keys(p).map(function(x){var y=p[x];return {instanceID:y.contextArgs.instanceid,fbid:y.renderedComment.comment.fbid,state:y.state,visibility:y.visibility,counting:y.stopWatch.state()};}));}function r(w){var x=Object.keys(w);if(!x.length)return;x.forEach(function(y){return t(w[y]);});p=babelHelpers['extends']({},p,w);l.inform(k);}function s(w,x){var y;r((y={},y[w]=x,y));}function t(w){if(w.visibility==c('UFIVisibility').VISIBLE&&w.state==j.INFOCUS){w.stopWatch.start();}else w.stopWatch.pause();}function u(w){if(!c('UserActivity').isActive(i.idle_timeout))return j.BLURRED_INACTIVE;if(n&&!o){if(!w.node)return j.BLURRED_NO_NODE;if(!m)return j.BLURRED_UNDER_LAYER;w.node||h(0);m||h(0);var x=c('ViewportTrackingHelper').isDescendantOf(w.node,m);return x?j.INFOCUS:j.BLURRED_UNDER_LAYER;}if(o)if(c('UFIRootRegistry').isSnowliftNode(w.contextArgs.rootid)){return j.INFOCUS;}else return j.BLURRED_SNOWLIFT_OTHER;return j.INFOCUS;}var v={subscribe:function w(x){return l.subscribe(k,x);},unsubscribe:function w(x){l.unsubscribe(x);},getState:function w(){return p;},getKey:function w(x,y){var z=x.isLivePinnedComment?'/P':'';return y.instanceid+'/'+x.comment.fbid+z;},initComment:function w(x,y,z){var aa=v.getKey(x,y),ba=p[aa];if(!ba&&!z){return;}else if(!ba){var ca={renderedComment:x,contextArgs:y,node:z,state:j.BLURRED_NEW,stopWatch:new (c('UFIStopWatch'))(),visibility:c('UFICommentVisibilityStore').getVisibility(c('UFICommentVisibilityStore').getState(),y,x)};ca.state=u(ca);s(aa,ca);}else if(!z){ba.stopWatch.pause();s(aa,babelHelpers['extends']({},ba,{state:j.BLURRED_NO_NODE}));}else s(aa,babelHelpers['extends']({},ba,{node:z,state:u(ba)}));},updateAllStates:function w(x){r(Object.keys(p).reduce(function(y,z){y[z]=babelHelpers['extends']({},p[z],{state:u(p[z])});return y;},{}));q(x);},cleanupUFIInstance:function w(x){var y=[];Object.keys(p).filter(function(z){return p[z].contextArgs.instanceid==x;}).forEach(function(z){p[z].stopWatch.pause();var aa=c('UFICommentVPVDLogging').log(p[z]);if(i.debug_console)y.push(aa);delete p[z];});if(i.debug_console)console.table&&console.table(y);},onCommentVisibilityChanged:function w(){var x=c('UFICommentVisibilityStore').getState();r(Object.keys(p).reduce(function(y,z){var aa=p[z],ba=aa.renderedComment,ca=aa.contextArgs,da=aa.visibility,ea=c('UFICommentVisibilityStore').getVisibility(x,ca,ba),fa=da!=ea;if(!fa)return y;y[z]=babelHelpers['extends']({},p[z],{visibility:ea});return y;},{}));q('UFICommentVisibilityStore.changed');},onClickDocument:function w(){var x=c('getActiveElement')();if(!x){m=null;n=false;}else{m=c('Parent').byClass(x,'uiContextualLayerParent');n=!!m;}},onSnowliftOpen:function w(){o=true;},onSnowliftClose:function w(){o=false;},debug:function w(){q('debug');}};f.exports=v;}),null);
__d('UserActivityEmitter',['invariant','EventEmitter','UserActivity','TimeSlice','clearTimeout','setTimeout'],(function a(b,c,d,e,f,g,h){'use strict';var i='change',j={};k.factory=function(l){if(!j[l])j[l]=new k(l);return j[l];};function k(l){this.$UserActivityEmitter5=250;this.$UserActivityEmitter6=function(){if(this.$UserActivityEmitter4=='INACTIVE'){this.$UserActivityEmitter4='ACTIVE';this.$UserActivityEmitter2.emit(i,'ACTIVE');}if(this.$UserActivityEmitter3)c('clearTimeout')(this.$UserActivityEmitter3);this.$UserActivityEmitter3=c('setTimeout')(c('TimeSlice').guard(this.$UserActivityEmitter7,'UserActivityEmitter idleTimeout',{isContinuation:false}),this.$UserActivityEmitter5);}.bind(this);this.$UserActivityEmitter7=function(){this.$UserActivityEmitter4='INACTIVE';this.$UserActivityEmitter2.emit(i,'INACTIVE');c('clearTimeout')(this.$UserActivityEmitter3);this.$UserActivityEmitter3=null;}.bind(this);l>c('UserActivity').EVENT_INTERVAL_MS||h(0);this.$UserActivityEmitter5=l;this.$UserActivityEmitter2=new (c('EventEmitter'))();this.$UserActivityEmitter4=c('UserActivity').isActive(l)?'ACTIVE':'INACTIVE';this.$UserActivityEmitter1=c('UserActivity').subscribe(this.$UserActivityEmitter6);if(this.$UserActivityEmitter4=='ACTIVE')this.$UserActivityEmitter6();}k.prototype.subscribe=function(l){return this.$UserActivityEmitter2.addListener(i,l);};k.prototype.getState=function(){return this.$UserActivityEmitter4;};f.exports=k;}),null);
__d('UFICommentVPVD',['Arbiter','Event','SubscriptionsHandler','UFICommentVisibilityStore','UFICommentVPVDLogging','UFICommentVPVDState','UFIConfig','UFIInstanceActionType','UFISharedDispatcher','UserActivityEmitter'],(function a(b,c,d,e,f,g){'use strict';var h=c('UFIConfig').commentVPVD,i=false,j=null,k=new (c('SubscriptionsHandler'))(),l=null,m=null;function n(){if(j)return;j=setTimeout(function(){j=null;var p=c('UFICommentVPVDState').getState(),q=[];Object.keys(p).forEach(function(r){var s=c('UFICommentVPVDLogging').log(p[r]);if(h.debug_console)q.push(s);});if(h.debug_console)console.table&&console.table(q);},10);}var o={init:function p(){if(i||!c('UFICommentVPVDState'))return;i=true;m=c('UFISharedDispatcher').register(function(q){if(q.type==c('UFIInstanceActionType').REMOVE)c('UFICommentVPVDState').cleanupUFIInstance(q.instanceID);});l=c('UserActivityEmitter').factory(h.idle_timeout);k=new (c('SubscriptionsHandler'))();k.addSubscriptions(c('UFICommentVisibilityStore').addListener(function(){var q=c('UFICommentVPVDState').getState();c('UFICommentVPVDState').onCommentVisibilityChanged();if(q!==c('UFICommentVPVDState').getState())n();}),{remove:function q(){if(m){c('UFISharedDispatcher').unregister(m);m=null;}}},c('Event').listen(document.documentElement,'click',function(){c('UFICommentVPVDState').onClickDocument();c('UFICommentVPVDState').updateAllStates('document onClick');n();}),l.subscribe(function(q){c('UFICommentVPVDState').updateAllStates('user-active = '+q);if(q!='ACTIVE')n();}),c('Arbiter').subscribe('reflow',function(){c('UFICommentVPVDState').updateAllStates('reflow');n();}),c('Arbiter').subscribe('PhotoSnowlift.OPEN',function(){c('UFICommentVPVDState').onSnowliftOpen();c('UFICommentVPVDState').updateAllStates('PhotoSnowlift.OPEN');n();}),c('Arbiter').subscribe('PhotoSnowlift.CLOSE',function(){c('UFICommentVPVDState').onSnowliftClose();c('UFICommentVPVDState').updateAllStates('PhotoSnowlift.CLOSE');n();}));},enableVPVDLogging:function p(q){if(!q.location||!h.locations)return false;return h.everywhere||h.locations.includes(q.location);}};f.exports=o;}),null);
__d('UFICommentVPVDTracker.react',['cx','React','ReactDOM','SubscriptionsHandler','UFICommentAction','UFICommentVisibilityStore','UFICommentVPVD','UFICommentVPVDState','UFIConfig','UFISharedDispatcher','UFIVisibility','ViewportTrackingHelper','onCommentIsVisible'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').Children,l=c('React').PropTypes,m=c('UFIConfig').commentVPVD;function n(p){return c('UFICommentVisibilityStore').getVisibility(c('UFICommentVisibilityStore').getState(),p.contextArgs)===c('UFIVisibility').VISIBLE;}i=babelHelpers.inherits(o,c('React').Component);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.state={isVisible:false};this.isCommentVisible=function(q){if(!n(this.props))return false;var r={height:q.bottom-q.top,width:0};return c('ViewportTrackingHelper').isVisibleInDimension(r,c('ReactDOM').findDOMNode(this),m.min_visible_size);}.bind(this);this.onCommentVisibilityChanged=function(q){this.setState({isVisible:q});c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeVisibility(this.props.contextArgs,this.props.renderedComment,q?c('UFIVisibility').VISIBLE:c('UFIVisibility').HIDDEN));}.bind(this);if(c('UFICommentVPVD').enableVPVDLogging(p.contextArgs))c('UFICommentVPVD').init();this.$UFICommentVPVDTracker1=new (c('SubscriptionsHandler'))();}o.prototype.componentDidMount=function(){if(c('UFICommentVPVD').enableVPVDLogging(this.props.contextArgs))this.$UFICommentVPVDTracker1.addSubscriptions(c('onCommentIsVisible')(this.isCommentVisible,this.onCommentVisibilityChanged));};o.prototype.componentWillUnmount=function(){this.$UFICommentVPVDTracker1.release();};o.prototype.render=function(){var p=this.props,q=this.state,r=k.only(p.children);if(!c('UFICommentVPVD').enableVPVDLogging(p.contextArgs))return r;var s=m.debug_html;return c('React').createElement('div',{'data-debugstate':s?q.isVisible?'fully visible':'not fully visible':null,className:"_3b-9"+(s?' '+"_3b-a":'')+(s&&q.isVisible?' '+"_3b-b":'')+(s&&!q.isVisible?' '+"_3b-c":''),ref:function t(u){return c('UFICommentVPVDState').initComment(p.renderedComment,p.contextArgs,u);}},r);};o.propTypes={renderedComment:l.object.isRequired,contextArgs:l.object.isRequired};f.exports=o;}),null);
__d('UFICommentVPVTracker.react',['OnVisible.react','React','UFICommentVPVs','UFIConfig','clearTimeout','setTimeout'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={timer:null},this.maybeScheduleVPVLogging=function(){if(this.state.timer!==null)return;var q=this.props.comment.id,r=this.props.contextArgs.instanceid;if(c('UFICommentVPVs').hasLoggedVPV(r,q))return;this.setState({timer:c('setTimeout')(function(){c('UFICommentVPVs').logVPV(r,q);this.setState({timer:null});}.bind(this),c('UFIConfig').vpvLoggingTimeout)});}.bind(this),this.cancelScheduledVPVLogging=function(){if(this.state.timer===null)return;c('clearTimeout')(this.state.timer);this.setState({timer:null});}.bind(this),m;}k.prototype.render=function(){var l=this.props.comment.id,m=this.props.contextArgs.instanceid,n=this.props.children,o=c('UFICommentVPVs').hasLoggedVPV(m,l);return c('React').createElement(c('OnVisible.react'),{onVisible:o?null:this.maybeScheduleVPVLogging,onHidden:o?null:this.cancelScheduledVPVLogging},n);};k.prototype.shouldComponentUpdate=function(l,m){return m.timer===this.state.timer;};k.prototype.componentWillReceiveProps=function(){this.cancelScheduledVPVLogging();};k.prototype.componentWillUnmount=function(){this.cancelScheduledVPVLogging();};k.propTypes={comment:j.object.isRequired,contextArgs:j.object.isRequired};f.exports=k;}),null);
__d('TimeOffset',[],(function a(b,c,d,e,f,g){'use strict';var h={timeToTimestamp:function i(j){if(j<=0)return '0:00';var k=Math.floor(j/3600),l=k?k+':':'';l+=((k?'0':'')+Math.floor(j%3600/60)).slice(-2)+':';return l+('0'+j%60).slice(-2);}};f.exports=h;}),null);
__d('UFILiveCommentTimestamp.react',['cx','fbt','CommentPostedLiveState','Middot.react','React','TimeOffset','Tooltip.react','UFIVideoPlayerRegistry','VideoTimestampsClicksWWWTypedLogger'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n,o=this.props,p=o.comment,q=o.contextArgs,r=!p.parentcommentid,s=null;if(r)(function(){var u=typeof p.videoTimeOffset==='number'?p.videoTimeOffset:0;s=c('React').createElement('a',{className:"_39g5",onClick:function v(event){event.preventDefault();var w=new (c('VideoTimestampsClicksWWWTypedLogger'))().setVideoTimestamp(u).setIsContentTimestamp(true);if(p.__typename==='local'){w.setLocalCommentFeedbackID(p.ftentidentifier);}else w.setCommentID(p.fbid);w.log();c('UFIVideoPlayerRegistry').seekAvailableVideoPlayerController(q.instanceid,u);},role:'button',tabIndex:'0'},c('TimeOffset').timeToTimestamp(u));})();var t=null;if(p.postedLiveState===c('CommentPostedLiveState').LIVE){t=c('React').createElement(c('Tooltip.react'),{tooltip:i._("Comment posted while the video was live")},c('React').createElement(c('Middot.react'),{className:"_5rr7"}));}else if(p.postedLiveState===c('CommentPostedLiveState').ON_DEMAND){t=c('React').createElement(c('Tooltip.react'),{tooltip:i._("Comment posted after the live video ended")},c('React').createElement(c('Middot.react'),{className:"_5rra"}));}else t=c('React').createElement(c('Middot.react'),{className:"_5rra"});return c('React').createElement('span',null,t,s);};function m(){j.apply(this,arguments);}m.propTypes={comment:l.shape({fbid:l.string,__typename:l.string,postedLiveState:l.oneOf([c('CommentPostedLiveState').LIVE,c('CommentPostedLiveState').ON_DEMAND]),videoTimeOffset:l.number,parentcommentid:l.string}).isRequired,contextArgs:l.shape({instanceid:l.string.isRequired}).isRequired};f.exports=m;}),null);
__d('VideoTipJarCommentBackground.react',['ix','Image.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=[h("99652"),h("99653"),h("99654")];i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=k[parseInt(this.props.tipOptionIndex,10)];return m?c('React').createElement(c('Image.react'),{src:m}):null;};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d("XUnifiedQueueReportedCommentsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/groups\/{groupid}\/write_async\/reported_comments\/",{groupid:{type:"Int",required:true},commentid:{type:"Int"},keep:{type:"Bool",defaultValue:false},block:{type:"Bool",defaultValue:false},uid:{type:"Int"}});}),null);
__d('UFIComment.react',['ix','cx','fbt','AsyncRequest','BootloadedComponent.react','Bootloader','CommentApprovalsResponsibleUserAction','DOMContainer.react','FluxContainer','HovercardLink','HTML','Image.react','InlineBlock.react','JSResource','LiveWWWFeedbackTypedLogger','React','ReactDOM','Text.react','TrackingNodes','TranslationTrigger','UFIAcceptedAnswerStore','UFIActorIconContainer.react','UFICentralUpdates','UFICommentAction','UFICommentActions.react','UFICommentAttachment.react','UFICommentAuthorName.react','UFICommentBody.react','UFICommentLiveVideoAnnouncementImage.react','UFICommentMenu.react','UFICommentTranslation.react','UFICommentUtils','UFICommentVPVDTracker.react','UFICommentVPVTracker.react','UFIConfig','UFIConstants','UFIImageBlock.react','UFILiveCommentTimestamp.react','UFISharedDispatcher','UserHovercardLocation','VideoTipJarCommentBackground.react','WebCommentViewOption','XFeedNUXSaveSeenStateController','XUIButton.react','XUnifiedQueueReportedCommentsController','emptyFunction','fbglyph','joinClasses','keyMirror'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=c('UFIConstants').UFIStatus,o={NEWSSTAND:'newsstand'},p=c('keyMirror')({edit:true,hide:true,remove:true,embed:true,manageConstituentBadge:true,showConstituentTitle:true,hideConstituentTitle:true,delete_comment_and_remove_commenter:true}),q='ufi_comment_close_button',r='ufi_highlighted_comment',s='ufi_comment_menu_delete',t='ufi_comment_menu_edit',u='ufi_comment_menu_hide',v='ufi_comment_menu_embed',w='ufi_comment_menu_manage_constituent_badge',x='ufi_comment_menu_delete_comment_and_remove_commenter',y={testid:s,value:p.remove,label:j._("Delete Comment...")},z={testid:u,value:p.hide,label:j._("Hide Comment")},aa={testid:v,value:p.embed,label:j._("Embed")},ba={testid:x,value:p.delete_comment_and_remove_commenter,label:j._("Delete Comment And Remove Member")},ca={testid:s,value:p.remove,label:j._("Delete...")},da={testid:w,value:p.manageConstituentBadge,label:j._("Manage Constituent Badge")},ea=null,fa=function ka(la){var ma=la.status;return ma===n.FAILED_ADD||ma===n.FAILED_EDIT;},ga=function ka(la,ma){return !!la.tipOptionIndex&&ma===o.NEWSSTAND;};function ha(ka){return ka.commenterIsFOF!==undefined&&ka.userIsMinor!==undefined&&ka.reportLink!==undefined;}k=babelHelpers.inherits(ia,c('React').Component);l=k&&k.prototype;ia.getStores=function(){return [c('UFIAcceptedAnswerStore')];};ia.calculateState=function(ka,la){var ma=la.comment,na=la.feedback,oa=c('UFIAcceptedAnswerStore').get(ma.ftentidentifier,na.acceptedanswer),pa=oa.type==='Accepted'&&oa.id==ma.id;return babelHelpers['extends']({},ka,{isAcceptedAnswer:pa});};function ia(ka){l.constructor.call(this,ka);ja.call(this);var la=ka.comment;this.state={isHighlighting:la.highlightcomment,wasHighlighted:la.highlightcomment,markedAsSpamHere:false,isAcceptedAnswer:false,isInlinePageDeleted:false,isInlineBanned:false,loggedLiveUpdate:false,hideConstituentTitleNUXVisible:true,showBody:false,hideSpamComment:this.$UFIComment1()};}ia.prototype.$UFIComment10=function(){return [y,z];};ia.prototype.$UFIComment11=function(){return [{testid:t,value:p.edit,label:j._("Edit...")},ca];};ia.prototype.$UFIComment12=function(){this.setState({showBody:!c('UFIConfig').shouldTranslationsReplaceContent});if(!this.props.comment.translationdata)this.context.dispatch(c('UFICommentAction').translate(this.props.contextArgs,this.props.comment,c('TranslationTrigger').SEE_TRANSLATION));};ia.prototype.$UFIComment13=function(){var ka=null,la=null,ma=null,na=c('UFICommentMenu.react').MenuType.CLOSE,oa=this.props.comment,pa=oa.canEditConstituentTitle,qa=oa.canembed&&c('UFIConfig').showCommentEmbedOption;if(this.$UFIComment1()){var ra=void 0;if(oa.needsApproval){ra=this.props.authorProfiles[oa.author].name;}else ra=this.props.feedback.actorname;return {closeTooltip:j._("Only you and {author_name} can see this comment",[j.param('author_name',ra)]),menuType:c('UFICommentMenu.react').MenuType.TOOLTIP,onClick:ka,menuData:la};}if(oa.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor&&oa.canedit){ma=qa?j._("Edit, delete or embed this"):j._("Edit or delete this");na=c('UFICommentMenu.react').MenuType.EDIT;if(pa){la=[da];la=la.concat(this.$UFIComment11());}else la=this.$UFIComment11();}else if(this.props.showRemoveReportMenu){ma=qa?j._("Remove, report or embed this"):j._("Remove or report this");la=this.$UFIComment10();}else if(this.props.feedback.customcommentactionlinks){ma=qa?j._("Remove this"):j._("Remove or embed this");la=[y];na=c('UFICommentMenu.react').MenuType.EDIT;}else{ma=qa?j._("Remove or embed this"):j._("Remove this");if(!qa){ka=this.$UFIComment5;}else la=[ca];}}else if(this.props.feedback.customcommentactionlinks){ma=qa?j._("Hide or embed this"):j._("Hide this");la=[z];na=c('UFICommentMenu.react').MenuType.EDIT;}else if(oa.canreport){ma=qa?j._("Hide or embed this"):j._("Hide this");if(!qa){ka=this.$UFIComment2;}else la=[z];}if(qa){if(!la)la=[];la.push(aa);na=c('UFICommentMenu.react').MenuType.CHEVRON;}if(oa.canremove&&!this.props.viewerIsAuthor&&oa.canviewerremovecommenter){if(!la)la=[];la.push(ba);}if(this.props.feedback.customcommentactionlinks)for(var sa in this.props.feedback.customcommentactionlinks){var ta=this.props.feedback.customcommentactionlinks[sa];if(!ta.showInMenu)continue;if(!la)la=[];la.push({testid:ta.type,value:ta.type,label:ta.title});}return {closeTooltip:ma,menuType:na,onClick:ka,menuData:la};};ia.prototype.$UFIComment14=function(){var ka=this.props.comment,la=this.$UFIComment13(),ma=la.onClick,na=la.menuData,oa=la.closeTooltip,pa=la.menuType,qa=null,ra=(!this.$UFIComment1()?"UFICommentCloseButton":'')+(ma===null&&na===null&&!this.$UFIComment1()?' '+"hdn":'')+(qa!==null?' '+"UFICommentCloseButtonNux":'')+(this.$UFIComment1()?' '+"UFICommentSpamTooltip":''),sa=null,ta=null;if(this.props.contextArgs.viewas){sa='/ajax/profile/link_disabled_in_viewas.php';ta='dialog';ma=null;}return c('React').createElement('span',{className:"_36rj"},c('React').createElement(c('UFICommentMenu.react'),{ajaxify:sa,'aria-label':oa,className:ra,'data-testid':q,onClick:ma,rel:ta,tooltip:oa,menuData:na,menuType:pa,onAction:this.$UFIComment9,ref:'comment_menu'}),qa);};ia.prototype.componentDidMount=function(){var ka,la=this;if(this.state.isHighlighting)(function(){var ma=c('ReactDOM').findDOMNode(la),na=parseInt(la.props.comment.scrolltopoffset||0,10);c('Bootloader').loadModules(["UFIScrollHighlight"],function(oa){setTimeout(oa.actOn.bind(null,ma,na),0);},'UFIComment.react');la.setState({isHighlighting:false});})();if(this.props.comment.fbid)c('UFISharedDispatcher').dispatch(c('UFICommentAction').mounted(this.props.contextArgs,{comment:this.props.comment,isLivePinnedComment:Boolean(this.props.isLivePinnedComment)}));};ia.prototype.componentWillUnmount=function(){if(this.props.comment.fbid)c('UFISharedDispatcher').dispatch(c('UFICommentAction').unmounted(this.props.contextArgs,{comment:this.props.comment,isLivePinnedComment:Boolean(this.props.isLivePinnedComment)}));};ia.prototype.shouldComponentUpdate=function(ka,la){var ma=this.props,na=this.state;return ka.comment!==ma.comment||ka.showReplyLink!==ma.showReplyLink||ka.isFirst!==ma.isFirst||ka.isLast!==ma.isLast||ka.isFirstCommentComponent!==ma.isFirstCommentComponent||ka.isLastCommentComponent!==ma.isLastCommentComponent||ka.isFirstComponent!==ma.isFirstComponent||ka.isLastComponent!==ma.isLastComponent||ka.isFeatured!==ma.isFeatured||ka.hasPartialBorder!==ma.hasPartialBorder||ka.showTranslation!==ma.showTranslation||la.wasHighlighted!==na.wasHighlighted||la.isHighlighting!==na.isHighlighting||la.markedAsSpamHere!==na.markedAsSpamHere||la.isInlinePageDeleted!==na.isInlinePageDeleted||la.isInlineBanned!==na.isInlineBanned||la.hideConstituentTitleNUXVisible!==na.hideConstituentTitleNUXVisible||la.showBody!==na.showBody||la.hideSpamComment!==na.hideSpamComment;};ia.prototype.$UFIComment15=function(ka,la){var ma=c('XUnifiedQueueReportedCommentsController').getURIBuilder().setInt('groupid',la).getURI();new (c('AsyncRequest'))(ma).setData({commentid:ka.fbid,uid:ka.author,keep:true,block:false}).send();};ia.prototype.$UFIComment16=function(ka,la){var ma=c('XUnifiedQueueReportedCommentsController').getURIBuilder().setInt('groupid',la).getURI();new (c('AsyncRequest'))(ma).setData({commentid:ka.fbid,uid:ka.author,keep:false,block:false}).send();};ia.prototype.$UFIComment17=function(ka,la){var ma=c('XUnifiedQueueReportedCommentsController').getURIBuilder().setInt('groupid',la).getURI();new (c('AsyncRequest'))(ma).setData({commentid:ka.fbid,uid:ka.author,keep:false,block:true}).send();};ia.prototype.$UFIComment1=function(){var ka=this.props.comment,la=ka.needsApproval,ma=ka.canAppeal,na=ka.canSecure,oa=ka.appealStatus,pa=ka.isApproved;return la||ma||na||(oa===c('CommentApprovalsResponsibleUserAction').APPEALED||oa===c('CommentApprovalsResponsibleUserAction').SECURED_ACCOUNT)&&!pa;};ia.prototype.render=function(){var ka=this.props,la=ka.contextArgs,ma=ka.comment,na=ka.feedback,oa=ma.status===n.DELETED,pa=ma.status===n.LIVE_DELETED,qa=ma.status===n.SPAM_DISPLAY,ra=this.state.hideSpamComment;if(oa)return null;var sa=this.state.markedAsSpamHere,ta=this.state.isInlinePageDeleted,ua=this.props.hideAsSpamForPageAdmin,va=this.state.isInlineBanned;if(ma.islive&&!this.state.loggedLiveUpdate){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setCommentID(ma.id).log();this.setState({loggedLiveUpdate:true});}var wa=ha(ma),xa=!ma.status&&(ma.isunseen||ma.__typename==='local');if(!ma.status&&na.lastseentime){var ya=ma.originalTimestamp||ma.timestamp.time;xa=xa||ya>na.lastseentime;}var za=la.markedcomments;if(za&&za[ma.legacyid])xa=true;if(this.props.orderingMode===c('WebCommentViewOption').LIVE_STREAMING||this.props.isLivePinnedComment)xa=false;var ab="UFIRow"+(this.props.isFirst?' '+"_48ph":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(this.state.isAcceptedAnswer?' '+"UFIAcceptedAnswer":'')+(this.props.isLivePinnedComment?' '+"UFILivePinnedComment":'')+(!!this.props.comment.neighborBadge?' '+"uiContextualLayerParent":''),bb=j._("Comment"),cb=j._("Comment reply"),db=ma.parentcommentid?cb:bb;if(wa)if(ea){var eb=null,fb=null,gb=null,hb=null;if(ua){gb=va?this.$UFIComment8:this.$UFIComment7;if(ta){eb=j._("You've deleted this comment so no one can see it.");}else if(sa){eb=j._("Now this is only visible to the person who wrote it and their friends.");hb=this.$UFIComment4;fb=this.$UFIComment3;}}else if(sa){eb=j._("This comment has been hidden.");hb=this.$UFIComment4;fb=this.$UFIComment3;}if(eb)return c('React').createElement('div',{className:ab,role:'article','aria-label':db},c('React').createElement(ea,{notice:eb,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:fb,onBanAction:gb,onDeleteAction:hb,isInlineBanned:va,isInlinePageDeleted:ta,hideAsSpamForPageAdmin:ua,pageID:this.props.feedback.ownerid}));}else c('Bootloader').loadModules(["UFICommentRemovalControls.react"],function(lb){ea=lb;setTimeout(function(){this.forceUpdate();}.bind(this));}.bind(this),'UFIComment.react');var ib=c('joinClasses')(ab,"UFIComment"+(fa(ma)?' '+"UFICommentFailed":'')+(ga(ma,la.location)?' '+"UFITipJarComment":'')+(pa||qa||this.$UFIComment1()&&!ra||ma.parentNeedsApproval?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(' '+"_4oep")+(this.props.hasPartialBorder?' '+"UFIPartialBorder":'')+(xa?' '+"UFIUnseenItem":'')+(ma.isAnnouncement?' '+"UFICommentLiveVideoAnnouncement":'')),jb=this.renderComment(),kb=la.mayLogVPVs&&this.props.orderingMode===c('WebCommentViewOption').FILTERED;if(ma.__typename!=='local'&&!ma.isAnnouncement){if(kb)jb=c('React').createElement(c('UFICommentVPVTracker.react'),{comment:ma,contextArgs:la},jb);jb=c('React').createElement(c('UFICommentVPVDTracker.react'),{renderedComment:{comment:ma,isLivePinnedComment:Boolean(this.props.isLivePinnedComment)},contextArgs:this.props.contextArgs},jb);}return c('React').createElement('div',{className:ib,role:'article','aria-label':db,'data-testid':this.state.wasHighlighted?r:null,'data-ft':this.props['data-ft']},jb);};ia.prototype.$UFIComment18=function(ka,la){var ma=this.props,na=ma.comment,oa=ma.feedback,pa=this.state.hideSpamComment,qa=na.appealStatus,ra=na.body?na.body.text:'',sa=c('UFICommentUtils').shallowCopyRanges(na.body&&na.body.ranges),ta=c('React').createElement('a',{className:"UFICommentShowComment",onClick:function(){return this.setState({hideSpamComment:false});}.bind(this),role:'button',tabIndex:'0'},j._("Show comment"));if(pa&&this.$UFIComment1()){var ua=void 0;if(qa===c('CommentApprovalsResponsibleUserAction').SECURED_ACCOUNT&&na.needsApproval===false){ua=c('React').createElement(c('Text.react'),null,j._({"*":"Thanks for securing your account. We recommend deleting this comment now. If you don't, it will be automatically deleted in {number} days.","268435456":"Thanks for securing your account. We recommend deleting this comment now. If you don't, it will be automatically deleted in 1 day."},[j.plural(na.daysToExpire,'number')]));var va=c('React').createElement('a',{className:"UFICommentShowComment",onClick:function(event){return this.$UFIComment5(event);}.bind(this),role:'button',tabIndex:'0'},j._("Delete"));return c('React').createElement('span',null,ua,ta,j._("or"),va);}ua=na.needsApproval?c('React').createElement(c('Text.react'),null,j._("{name}'s comment was marked as spam.",[j.param('name',la)])):c('React').createElement(c('Text.react'),null,j._("Your comment was marked as spam."));return c('React').createElement('span',null,ua,ta);}ra=c('UFICommentUtils').getCommentTextWithTruncatedURIs(sa,ra);var wa=null,xa=null;if(!ma.isLocallyComposed&&!this.state.wasHighlighted){xa=c('UFIConstants').commentTruncationLength;wa=c('UFIConstants').commentTruncationMaxLines;}if(na.body&&na.body.markdown_enabled&&na.body.markup)if(c('HTML').isHTML(na.body.markup)){return c('React').createElement('span',{dangerouslySetInnerHTML:na.body.markup});}else return c('React').createElement(c('DOMContainer.react'),null,na.body.markup);return c('React').createElement(c('UFICommentBody.react'),{socialContext:na.socialcontext,commentText:ra,commentRanges:sa,groupOrEventID:oa.grouporeventid,maxLength:xa,maxLines:wa,markViewerHasInteracted:this.props.markViewerHasInteracted,shouldExpand:ka,ufiInstanceID:this.props.contextArgs.instanceid,commentFBID:na.fbid,isLiveStreaming:ma.contextArgs.islivestreaming});};ia.prototype.renderComment=function(){var ka=this.props,la=ka.comment,ma=ka.permalink,na=ka.feedback,oa=ka.authorProfiles[la.author],pa=la.status===n.SPAM_DISPLAY,qa=la.status===n.LIVE_DELETED,ra=!(pa||qa),sa=false;if(this.props.featuredCommentIDs&&this.props.featuredCommentIDs.indexOf(this.props.comment.fbid)>-1)sa=true;var ta=na.canremoveall||la.hiddenbyviewer,ua=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.SMALL_ACTOR_PHOTO),va=void 0;if(!ka.contextArgs.viewas&&!la.isAnnouncement){if(!oa)throw new Error('Got unexpected null author on comment '+JSON.stringify(la)+' with profiles '+JSON.stringify(ka.authorProfiles));va=c('HovercardLink').constructEndpointWithGroupLocationAndExtraParams(oa,na.grouporeventid,la.hovercardlocation?la.hovercardlocation:c('UserHovercardLocation').UFI,la.isauthorweakreference,{on_public_ufi:na.ispublic}).toString();}var wa=ka.contextArgs.disableCommentAuthorLink,xa=la.isAnnouncement?null:c('React').createElement(c('UFICommentAuthorName.react'),{author:oa,authorProfiles:ka.authorProfiles,commonalityString:la.commonalityString,constituentTitle:la.constituentTitle,disableAuthorLink:wa,focusOnMount:ka.focusOnMount,customTextTag:la.customtexttag,groupOrEventID:na.grouporeventid,isAdminViewer:ka.feedback.isadminviewer,isAuthorNonCoworker:la.isauthornoncoworker,isAuthorWeakReference:la.isauthorweakreference,isFeatured:ka.isFeatured,isPublic:na.ispublic,dialogUrl:la.dialogurl,hovercardLocation:la.hovercardlocation,neighborBadge:la.neighborBadge,showHovercard:!!va,socialContext:la.socialcontext}),ya=this.$UFIComment18(sa,xa),za=la.translationdata,ab=za&&za.translatedText&&za.translatedText.text,bb=!ab||this.state.showBody||za.trigger===c('TranslationTrigger').LOGGED_OUT_AUTO_TRANSLATION,cb=this.props.showTranslation&&!za||!!za&&(!c('UFIConfig').shouldTranslationsReplaceContent||!bb||!ab||za.trigger===c('TranslationTrigger').LOGGED_OUT_AUTO_TRANSLATION),db=void 0;if(la.isAnnouncement){db=c('React').createElement('div',{className:"UFICommentLiveVideoAnnouncementBody"},c('React').createElement(c('InlineBlock.react'),{alignv:'middle',className:"UFICommentLiveVideoAnnouncementMessage",height:32},ya),c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFILiveVideoAnnouncementCTAContainer.react').__setRef('UFIComment.react'),bootloadPlaceholder:c('React').createElement('span',null),comment:la}));}else db=c('React').createElement('span',null,bb?ya:null,la.istranslatable||!!za?c('React').createElement(c('UFICommentTranslation.react'),{translationData:za,showTranslation:cb,isShowingOriginal:bb,shouldExpand:sa,onSeeTranslation:function(){return this.$UFIComment12();}.bind(this),onSeeOriginal:function(){return this.setState({showBody:true});}.bind(this)}):null);var eb=null;if(ka.contextArgs.isLiveVOD||!ka.contextArgs.islivestreaming&&ka.contextArgs.showVODCommentTimestamps&&ka.comment.videoTimeOffset)eb=c('React').createElement(c('UFILiveCommentTimestamp.react'),{comment:la,contextArgs:ka.contextArgs});var fb=void 0;if(la.attachment_status)fb=c('React').createElement('div',{className:"_50f8"},la.attachment_status);var gb=c('React').createElement(c('UFICommentAttachment.react'),{comment:ka.comment}),hb=void 0;if(this.state.hideSpamComment){hb=c('React').createElement('div',null);}else if(la.isAnnouncement){hb=c('React').createElement(c('UFICommentLiveVideoAnnouncementImage.react'),{accentColor:la.accentColor,glyphName:la.glyphName,image:la.image,isJoinEvent:la.isJoinEvent});}else{hb=c('React').createElement(c('UFIActorIconContainer.react'),{actorID:la.author});if(la.dialogurl){hb=c('React').createElement('a',{'data-ft':ua,'data-hovercard':va,ajaxify:la.dialogurl,rel:'dialog'},hb);}else if(oa.uri||oa.isBusinessPersona)hb=c('React').createElement('a',{'data-ft':ua,'data-hovercard':va,href:c('UFICommentUtils').annotateProfileURIIfPublic(na.ispublic,oa.uri)},hb);}var ib=null;if(this.state.isAcceptedAnswer){ib=c('React').createElement('span',{className:"UFIAcceptedAnswerLabel"},j._("Accepted Answer"));}else if(this.props.isLivePinnedComment){var jb=j._("Pinned Comment");ib=c('React').createElement('span',{className:"UFILivePinnedCommentLabel"},c('React').createElement(c('Image.react'),{className:'UFILivePinnedCommentGlyph',src:h("139486")}),jb);}var kb=la.tipOptionIndex?c('React').createElement(c('VideoTipJarCommentBackground.react'),{tipOptionIndex:la.tipOptionIndex}):null,lb=la.isReported?c('React').createElement('div',null,c('React').createElement(c('XUIButton.react'),{label:j._("Ignore"),type:'button',onClick:function(){return this.$UFIComment15(la,na.grouporeventid);}.bind(this)}),c('React').createElement(c('XUIButton.react'),{label:j._("Delete"),type:'button',onClick:function(){return this.$UFIComment16(la,na.grouporeventid);}.bind(this)}),c('React').createElement(c('XUIButton.react'),{label:j._("Delete and Block"),type:'button',onClick:function(){return this.$UFIComment17(la,na.grouporeventid);}.bind(this)})):null,mb=la.isAnnouncement||this.state.hideSpamComment?null:c('React').createElement(c('UFICommentActions.react'),{comment:la,feedback:na,parentCanComment:ka.parentCanComment,permalink:ma,viewerCanMarkNotSpam:Boolean(ta),showPermalink:ka.showPermalink,showReplyLink:ka.showReplyLink,contextArgs:ka.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:ka.hideAsSpamForPageAdmin||this.state.hideSpamComment,hideSpamComment:this.state.hideSpamComment,orderingMode:ka.orderingMode});return c('React').createElement('div',null,ib,c('React').createElement(c('UFIImageBlock.react'),{spacing:'medium'},hb,c('React').createElement('div',{className:'UFICommentContentBlock'},c('React').createElement('div',{className:'UFICommentContent'},!this.state.hideSpamComment?xa:null,eb,xa||eb?' ':null,db,!this.state.hideSpamComment?gb:null),fb,mb,lb,ra?this.$UFIComment14():null),kb));};ia.propTypes={authorProfiles:m.object.isRequired,comment:m.object.isRequired,contextArgs:m.object.isRequired,feedback:m.object.isRequired,'data-ft':m.string,featuredCommentIDs:m.array,focusOnMount:m.bool,hasPartialBorder:m.bool,hideAsSpamForPageAdmin:m.bool,isFeatured:m.bool,isFirst:m.bool,isFirstCommentComponent:m.bool,isFirstComponent:m.bool,isLast:m.bool,isLastCommentComponent:m.bool,isLastComponent:m.bool,isLivePinnedComment:m.bool,isLocallyComposed:m.bool,parentCanComment:m.bool,permalink:m.string,showPermalink:m.bool,showRemoveReportMenu:m.bool,showReplyLink:m.bool,viewerIsAuthor:m.bool,orderingMode:m.string,markViewerHasInteracted:m.func,showTranslation:m.bool};ia.contextTypes={dispatch:m.func};var ja=function ka(){this.$UFIComment2=function(event){this.context.dispatch(c('UFICommentAction').markAsSpam(this.props.contextArgs,this.props.comment,event.target));this.setState({markedAsSpamHere:true});}.bind(this);this.$UFIComment3=function(event){this.context.dispatch(c('UFICommentAction').markAsNotSpam(this.props.contextArgs,this.props.comment,event));this.setState({markedAsSpamHere:false});}.bind(this);this.$UFIComment4=function(event){this.context.dispatch(c('UFICommentAction').remove(this.props.contextArgs,this.props.comment,event.target,function(){return this.setState({isInlinePageDeleted:true});}.bind(this)));}.bind(this);this.$UFIComment5=function(event){this.context.dispatch(c('UFICommentAction').remove(this.props.contextArgs,this.props.comment,event.target,c('emptyFunction')));}.bind(this);this.$UFIComment6=function(event){this.context.dispatch(c('UFICommentAction').delete_comment_and_remove_commenter(this.props.contextArgs,this.props.comment,event.target,c('emptyFunction')));}.bind(this);this.$UFIComment7=function(event){this.context.dispatch(c('UFICommentAction').inlineBan(this.props.contextArgs,this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:true});}.bind(this);this.$UFIComment8=function(event){this.context.dispatch(c('UFICommentAction').undoInlineBan(this.props.contextArgs,this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:false});}.bind(this);this.$UFIComment9=function(event,la){var ma=la.item,na=ma.getValue();setTimeout(function(){var oa=this.props,pa=oa.comment,qa=oa.contextArgs,ra=oa.feedback;if(na===p.remove){this.$UFIComment5(event);}else if(na===p.delete_comment_and_remove_commenter){this.$UFIComment6(event);}else if(na===p.edit){this.context.dispatch(c('UFICommentAction').edit(qa,pa));}else if(na===p.hide){this.$UFIComment2(event);}else if(na===p.embed){this.context.dispatch(c('UFICommentAction').embed(qa,pa));}else if(na===p.manageConstituentBadge){this.context.dispatch(c('UFICommentAction').manageConstituentBadge(qa,pa));}else c('UFICentralUpdates').inform(na,{comment:pa,feedback:ra});}.bind(this),0);}.bind(this);};f.exports=c('FluxContainer').create(ia,{pure:false,withProps:true});}),null);
__d('UFICommentDisabledNotice.react',['cx','React','TextWithEntities.react','linkifyEntityRange'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.feedback,n=m.commentdisablednotice,o=c('React').createElement('div',{className:'UFINotice'},c('React').createElement(c('TextWithEntities.react'),{interpolator:c('linkifyEntityRange'),ranges:n.ranges,aggregatedranges:n.aggregated_ranges,text:n.text}));return c('React').createElement('div',{className:"UFIRow _4204 _2o9m _4oep"},o);};function l(){i.apply(this,arguments);}l.propTypes={feedback:k.object.isRequired};f.exports=l;}),null);
__d('UFICommentFilters',['UFIConstants'],(function a(b,c,d,e,f,g){'use strict';var h={getAuthors:function i(j){return j.reduce(function(k,l){if(l.author)k=k.concat(l.author);if(l.socialcontext)k=k.concat(l.socialcontext.topmutualid);if(l.replyauthors&&l.replyauthors.length)k=k.concat(l.replyauthors);return k;},[]);},isDeleted:function i(j){return j.status===c('UFIConstants').UFIStatus.DELETED;},isSpam:function i(j){return j.status===c('UFIConstants').UFIStatus.SPAM;},collectSpamBuckets:function i(j,k){var l=j.reduce(function(m,n){if(h.isSpam(n)){if(m.spamBucket){m.spamBucket.spamCommentIDs.push(n.id);m.collected.push(null);}else{m.spamBucket={status:c('UFIConstants').UFIStatus.SPAM,id:n.id,spamCommentIDs:[n.id]};m.collected.push(m.spamBucket);}}else if(n.isAnnouncement||k[n.author]){m.spamBucket=null;m.collected.push(n);}return m;},{spamBucket:null,collected:[]});return l.collected;}};f.exports=h;}),null);
__d('UFICommentHeader.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){return c('React').createElement('h6',babelHelpers['extends']({},this.props,{className:"accessible_elem"}),i._("Comments"));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('UFICommentListVisibilityTracker.react',['cx','Arbiter','DOMQuery','OnVisible.react','React','ReactDOM','SubscriptionsHandler','UFICommentVPVD','UFIConfig','UFIInstanceAction','UFISharedDispatcher','UFIVisibility'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').Children,l=c('React').Component,m=c('React').PropTypes,n=c('UFIConfig').commentVPVD;i=babelHelpers.inherits(o,l);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.state={isVisible:false};this.onVisible=function(){if(this.$UFICommentListVisibilityTracker2())this.setState({isVisible:true});c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeCommentListVisibility(this.props.contextArgs,c('UFIVisibility').VISIBLE));}.bind(this);this.onHidden=function(){if(this.$UFICommentListVisibilityTracker2())this.setState({isVisible:false});c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeCommentListVisibility(this.props.contextArgs,c('UFIVisibility').HIDDEN));}.bind(this);this.$UFICommentListVisibilityTracker1=new (c('SubscriptionsHandler'))();}o.prototype.componentDidMount=function(){if(this.$UFICommentListVisibilityTracker2()&&this.props.contextArgs.location==='conversation_nub')this.$UFICommentListVisibilityTracker1.addSubscriptions(c('Arbiter').subscribe('ConversationNubUtils/recheckTabVisibility',function(p,q){var r=q||{},s=r.tab,t=s&&s.getRootDOM(),u=this.refs.onVisibleRoot,v=u&&c('ReactDOM').findDOMNode(u);if(t&&u&&v&&c('DOMQuery').contains(t,v))u.check();}.bind(this)));};o.prototype.componentWillUnmount=function(){this.$UFICommentListVisibilityTracker1.release();};o.prototype.shouldComponentUpdate=function(p,q){if(!n.debug_html&&this.state.isVisible!==q.isVisible)return false;return true;};o.prototype.$UFICommentListVisibilityTracker2=function(){return !!c('UFIConfig').enableCommentListVisibilityTracking||c('UFICommentVPVD').enableVPVDLogging(this.props.contextArgs);};o.prototype.render=function(){var p=k.only(this.props.children);if(!this.$UFICommentListVisibilityTracker2())return p;var q=n.debug_html;return c('React').createElement('div',{'data-debugstate':q?this.state.isVisible?'partially visible':'hidden':null,className:"_3b-9"+(q?' '+"_3b-a":'')+(q&&this.state.isVisible?' '+"_3b-b":'')+(q&&!this.state.isVisible?' '+"_3b-c":'')},c('React').createElement(c('OnVisible.react'),{ref:'onVisibleRoot',onVisible:this.onVisible,onHidden:this.onHidden},p));};o.propTypes={contextArgs:m.shape({instanceid:m.string.isRequired,location:m.string}).isRequired};f.exports=o;}),null);
__d('UFICommentScrollableArea.react',['React','ScrollableArea.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').Children;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props,m=l.children,n=l.scrollcomments,o=l.scrollwidth;if(n&&o)return c('React').createElement(c('ScrollableArea.react'),{width:o},j.only(m));return j.only(m);};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('CommentsTimeSpentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:CommentsTimeSpentLoggerConfig',this.$CommentsTimeSpentTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:CommentsTimeSpentLoggerConfig',this.$CommentsTimeSpentTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$CommentsTimeSpentTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$CommentsTimeSpentTypedLogger1=babelHelpers['extends']({},this.$CommentsTimeSpentTypedLogger1,j);return this;};h.prototype.setEndTime=function(j){this.$CommentsTimeSpentTypedLogger1.end_time=j;return this;};h.prototype.setOrderingMode=function(j){this.$CommentsTimeSpentTypedLogger1.ordering_mode=j;return this;};h.prototype.setPostFbid=function(j){this.$CommentsTimeSpentTypedLogger1.post_fbid=j;return this;};h.prototype.setStartTime=function(j){this.$CommentsTimeSpentTypedLogger1.start_time=j;return this;};h.prototype.setTimeSpentID=function(j){this.$CommentsTimeSpentTypedLogger1.time_spent_id=j;return this;};h.prototype.setViewerHasInteracted=function(j){this.$CommentsTimeSpentTypedLogger1.viewer_has_interacted=j;return this;};var i={end_time:true,ordering_mode:true,post_fbid:true,start_time:true,time_spent_id:true,viewer_has_interacted:true};f.exports=h;}),null);
__d('CommentsTimeSpentTracker.react',['invariant','Banzai','CommentsTimeSpentTypedLogger','Event','OnVisible.react','React','SubscriptionsHandler','TimeSlice','UFIOrderingModeStore','UserActivity','pageID','setTimeout'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'CommentsTimeSpentTracker',firstVisibleTime:0,listeners:new (c('SubscriptionsHandler'))(),propTypes:{contextArgs:i.object.isRequired,targetFBID:i.string.isRequired,viewerHasInteracted:i.bool.isRequired,timeToConsiderViewerInactiveMillis:i.number,pollViewerActivityIntervalMillis:i.number},getDefaultProps:function k(){return {timeToConsiderViewerInactiveMillis:30000,pollViewerActivityIntervalMillis:1000};},render:function k(){return c('React').createElement(c('OnVisible.react'),{ref:'onVisibleElement',onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children);},startInterval:function k(){if(this.firstVisibleTime===0){this.firstVisibleTime=this._getTimeInSeconds();this._checkForIdleViewer();}},finishInterval:function k(){var l=c('UFIOrderingModeStore').getState().get(this.props.contextArgs.instanceid);if(this.firstVisibleTime&&this.isMounted()){var m=this._getTimeInSeconds();if(m>this.firstVisibleTime)new (c('CommentsTimeSpentTypedLogger'))().setViewerHasInteracted(this.props.viewerHasInteracted).setOrderingMode(l).setPostFbid(this.props.targetFBID).setStartTime(this.firstVisibleTime).setEndTime(m).setTimeSpentID(c('pageID')).log();this.firstVisibleTime=0;}},componentWillReceiveProps:function k(){this.finishInterval();},componentDidMount:function k(){this.listeners.addSubscriptions(c('Banzai').subscribe(c('Banzai').SHUTDOWN,this.finishInterval),c('Event').listen(window,'blur',this.finishInterval),c('Event').listen(window,'focus',this._checkVisibility));},componentWillUnmount:function k(){this.finishInterval();this.listeners.release();},componentDidUpdate:function k(){this._checkVisibility();},_getTimeInSeconds:function k(){return Math.floor(Date.now()/1000);},_checkVisibility:function k(){if(this.isMounted()){this.refs.onVisibleElement!==null||h(0);this.refs.onVisibleElement.reset();}},_checkForIdleViewer:function k(){if(this.firstVisibleTime===0)return;if(c('UserActivity').isActive(this.props.timeToConsiderViewerInactiveMillis)){c('setTimeout')(c('TimeSlice').guard(function(){this._checkForIdleViewer();}.bind(this),'CommentsTimeSpentTracker checkForIdleViewer',{isContinuation:false}),this.props.pollViewerActivityIntervalMillis);}else{this.finishInterval();c('UserActivity').subscribeOnce(function(){if(this.isMounted())this._checkVisibility();}.bind(this));}}});f.exports=j;}),null);
__d('UFISeenTracker.react',['BanzaiODS','OnVisible.react','React','setTimeout'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(l){var m=false;return function(){if(!m){l();m=true;}};}h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.state={seen:false};this.$UFISeenTracker1=j(this.logSeen.bind(this));}k.prototype.render=function(){if(this.state.seen)return this.props.children;return c('React').createElement(c('OnVisible.react'),{onVisible:this.$UFISeenTracker1},this.props.children);};k.prototype.logSeen=function(){c('setTimeout')(function(){return this.setState({seen:true});}.bind(this),100);c('BanzaiODS').bumpEntityKey('unsampled_feedback','rendered_ufi_client');};k.defaultProps={children:null};f.exports=k;}),null);
__d('UFIComponentLogger.react',['CommentsTimeSpentTracker.react','React','UFIConfig','UFISeenTracker.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props,m=l.children,n=l.contextArgs,o=l.feedback,p=l.hasComments,q=l.isPermalink,r=l.viewerHasInteractedWithComments;if(!m)return null;var s=c('React').createElement('div',null,m);if(p&&c('UFIConfig').logCommentsTimespent){var t=r||q;s=c('React').createElement(c('CommentsTimeSpentTracker.react'),{contextArgs:n,viewerHasInteracted:t,targetFBID:o.commentstargetfbid},s);}if(c('UFIConfig').logWhetherUFISeen)s=c('React').createElement(c('UFISeenTracker.react'),null,s);return s;};function k(){h.apply(this,arguments);}k.propTypes={contextArgs:j.object.isRequired,feedback:j.object.isRequired,hasComments:j.bool.isRequired,isPermalink:j.bool.isRequired,viewerHasInteractedWithComments:j.bool.isRequired};k.defaultProps={children:null};f.exports=k;}),null);
__d('UFIComponents',['React','UFICommentFilters'],(function a(b,c,d,e,f,g){'use strict';var h=function k(l){if(!l)return false;if(l.props.comment&&c('UFICommentFilters').isDeleted(l.props.comment))return false;return true;},i=function k(l,m,n){var o=void 0,p=n?l.length-1:0,q=n?-1:l.length,r=n?-1:1;for(o=p;o!=q;o+=r)if(h(l[o])){m(l,o);return l;}return l;},j={applyToUFIComponents:function k(l,m,n){l=i(l,function(o,p){if(o[p])o[p]=c('React').cloneElement(o[p],m);},false);l=i(l,function(o,p){if(o[p])o[p]=c('React').cloneElement(o[p],n);},true);return l;}};f.exports=j;}),null);
__d('UFIContainer.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement('div',{className:(!this.props.isReplyList?"UFIList":'')+(this.props.isAcceptedAnswerReply?' '+"UFIAcceptedAnswerReply":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(this.props.shouldHide?' '+"hidden_elem":'')},this.props.children);};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('UFILikeSentenceText.react',['cx','ActorURI','HovercardLinkInterpolator','ProfileBrowserLink','ProfileBrowserTypes','React','TextWithEntities.react','URI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;function l(n,o,p,q){if(q.count!=null){var r=c('ProfileBrowserTypes').LIKES,s={id:n.targetfbid,actorid:n.actorid},t=[],u=void 0;for(var v=0;v<o.length;v++)if(!o[v].count){u=o[v];var w=u.entity;t.push(w.id);}var x=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:n.targetfbid,comment_from:n.actorforpost,seen_user_fbids:t.length?t:true});x=c('ActorURI').create(x,n.actorforpost);var y=void 0,z=void 0;if(n.displayreactions){y=c('XUFIReactionProfileDialogController').getURIBuilder().setString('ft_ent_identifier',n.entidentifier).getURI();y=c('ActorURI').create(y,n.actorforpost);z=c('XUFIReactionProfileBrowserController').getURIBuilder().setString('ft_ent_identifier',n.entidentifier).getURI();z=c('ActorURI').create(z,n.actorforpost);}else{y=c('ProfileBrowserLink').constructDialogURI(r,s).toString();z=c('ProfileBrowserLink').constructPageURI(r,s).toString();}return c('React').createElement('a',{'data-testid':'n_other_people_link',className:"_375l",rel:'dialog',ajaxify:y,href:z,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':x.toString(),role:'button'},p);}else{var aa={source_feedback_owner_id:n.ownerid,source_feedback_identifier:n.entidentifier};return c('HovercardLinkInterpolator')(p,q,null,null,'ufi',aa);}}i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.render=function(){var n=this.props.feedback,o=this.props.likeSentenceData,p=void 0,q=o.aggregatedranges||o.aggregated_ranges;p=l;p=p.bind(null,n,o.ranges);return c('React').createElement(c('TextWithEntities.react'),{interpolator:p,ranges:Object.values(o.ranges),aggregatedRanges:q,text:o.text});};function m(){i.apply(this,arguments);}m.propTypes={contextArgs:k.object.isRequired,feedback:k.object.isRequired,likeSentenceData:k.object.isRequired};f.exports=m;}),null);
__d("XUFIGroupSeenByProfileBrowserController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/browser\/",{id:{type:"Int",required:true}});}),null);
__d("XUFIGroupSeenByProfileDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/dialog\/",{id:{type:"Int",required:true},__asyncDialog:{type:"Int"}});}),null);
__d('UFILikeSentence.react',['cx','fbt','invariant','ActorURI','Bootloader','LeftRight.react','React','UFILikeSentenceText.react','UFIReactionsSocialSentence.react','URI','XUFIGroupSeenByProfileBrowserController','XUFIGroupSeenByProfileDialogController','intlSummarizeNumber','isEmpty','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=null;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={bootloadedSelectorModule:false,hasSelectorModule:!!n},q;}o.rendersSocialSentence=function(p){var q=p.feedback,r=p.contextArgs,s=q.likesentences,t=q.reactionsentences;if(r.hideSocialSentence)return false;return s&&!c('isEmpty')(s.current)||t&&t.current&&t.current.text;};o.prototype.componentWillMount=function(){this.$UFILikeSentence1(this.props);};o.prototype.componentWillReceiveProps=function(p){this.$UFILikeSentence1(p);};o.prototype.$UFILikeSentence1=function(p){if(p.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){!p.contextArgs.entstream||j(0);c('Bootloader').loadModules(["UFIOrderingModeSelectorContainer.react"],function(q){n=q;this.setState({hasSelectorModule:true});}.bind(this),'UFILikeSentence.react');this.setState({bootloadedSelectorModule:true});}};o.prototype.$UFILikeSentence2=function(){var p=this.props.feedback,q=p.likesentences,r=q||{},s=r.current;return s||{};};o.prototype.$UFILikeSentence3=function(){var p=this.props,q=p.feedback,r=p.contextArgs;if(!this.constructor.rendersSocialSentence(p))return null;if(r.hasReactions)return c('React').createElement(c('UFIReactionsSocialSentence.react'),{feedback:q,contextArgs:r});var s=this.$UFILikeSentence2();if(s&&s.text)return c('React').createElement('div',{className:"UFILikeSentenceText"},c('React').createElement(c('UFILikeSentenceText.react'),{contextArgs:r,feedback:q,likeSentenceData:s}));return null;};o.prototype.$UFILikeSentence4=function(){var p=this.props,q=p.contextArgs,r=p.commentCounts;if(!q.showCommentHeader)return null;var s=void 0,t=r[q.ftentidentifier];if(t){t=c('intlSummarizeNumber')(t);s=i._("Comments ({commentCount})",[i.param('commentCount',t)]);}else s=i._("Comments");return c('React').createElement('div',{className:"_4bsb"},s);};o.prototype.renderOrderingModeSelector=function(){if(!this.props.showOrderingModeSelector||!this.state.hasSelectorModule||!n)return null;return c('React').createElement(n,{key:'orderingmodeselector',contextArgs:this.props.contextArgs,feedback:this.props.feedback});};o.prototype.renderSeenState=function(){var p=this.props.feedback;if(!p.seencount||p.seencount===0||this.props.contextArgs.entstream)return null;var q=null;if(p.seenbyall){q=i._("Seen by everyone");}else q=p.seencount==1?i._("Seen by 1"):i._("Seen by {count}",[i.param('count',p.seencount)]);var r=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:p.entidentifier}),s=c('ActorURI').create(c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',p.entidentifier).getURI(),p.actorforpost),t=c('ActorURI').create(c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',p.entidentifier).getURI(),p.actorforpost);return c('React').createElement('a',{key:'seenstate',rel:'dialog',ajaxify:s,href:t,'data-hovercard':r.toString(),className:"UFISeenCount"+(' '+"UFISeenCountRight")},c('React').createElement('span',{className:'UFISeenCountIcon'}),q);};o.prototype.render=function(){var p=this.$UFILikeSentence3(),q=[this.renderSeenState(),this.renderOrderingModeSelector()].filter(function(t){return t!==null;}),r=null;if(q.length===1){r=q[0];}else if(q.length>1)r=c('React').createElement('div',{className:"_oql"},q);if(!p){p=this.$UFILikeSentence4();if(!p&&r)p=c('React').createElement('div',null);}var s=null;if(p){s=c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},p,r);}else s=r;return c('React').createElement('div',{className:c('joinClasses')("UFIRow"+(this.props.feedback.likesentences.isunseen?' '+"UFIUnseenItem":'')+(' '+"UFILikeSentence")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(this.props.contextArgs.hasReactions?' '+"_4_dr":''))},s);};o.propTypes={contextArgs:m.object.isRequired,feedback:m.object.isRequired,commentCounts:m.object,isFirstComponent:m.bool,isLastComponent:m.bool,onOrderingModeChange:m.func,showOrderingModeSelector:m.bool};o.contextTypes={dispatch:m.func};f.exports=o;}),null);
__d('UFILiveTypingIndicatorContainer.react',['BootloadOnRender.react','FluxContainer','JSResource','LazyComponent.react','React','UFIConfig','UFILiveTypingStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').Component;h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.state={everHadTyping:false,hasTyping:false,friendTyping:false};}k.getStores=function(){return [c('UFILiveTypingStore')];};k.calculateState=function(l,m){if(!c('UFIConfig').typingIndicator.showInline)return {everHadTyping:false,hasTyping:false,friendTyping:false};var n=!!c('UFILiveTypingStore').getState()[m.feedbackTargetID];return {everHadTyping:(l||{}).everHadTyping||n,hasTyping:n,friendTyping:c('UFILiveTypingStore').isFriendTyping(m.feedbackTargetID)};};k.prototype.shouldComponentUpdate=function(l,m){return l.feedbackTargetID!=this.props.feedbackTargetID||m.everHadTyping!=this.state.everHadTyping||m.hasTyping!=this.state.hasTyping;};k.prototype.render=function(){if(this.state.everHadTyping)return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFILiveTypingIndicator.react').__setRef('UFILiveTypingIndicatorContainer.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),babelHelpers['extends']({},this.props,this.state))});return null;};f.exports=c('FluxContainer').create(k,{pure:false,withProps:true});}),null);
__d('UFIReplySocialSentence.react',['cx','fbt','Badge.react','Image.react','LiveTimer','Middot.react','NumberFormat','React','Timestamp.react','UFIImageBlock.react','WebCommentViewOption','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=43200;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.isLoading?"UFIReplySocialSentenceLoading":'',o=c('joinClasses')("UFIRow"+(' '+"UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),p=void 0,q=void 0,r=c('NumberFormat').formatInteger(this.props.replies);if(this.props.isExpanded){p=this.props.replies>1?i._({"*":"Hide {count} Replies"},[i.param('count',r,[0,this.props.replies])]):i._("Hide 1 Reply");}else{p=this.props.replies>1?i._({"*":"{count} Replies"},[i.param('count',r,[0,this.props.replies])]):i._("1 Reply");var s=this.props.timestamp;if(s){var t=c('LiveTimer').getApproximateServerTime()/1000-s.time;if(t<l||this.props.orderingMode==c('WebCommentViewOption').RECENT_ACTIVITY)q=c('React').createElement('span',{className:"fcg"},c('React').createElement(c('Middot.react'),{key:'middot-timestamp'}),c('React').createElement(c('Timestamp.react'),{shorten:this.props.contextArgs.shortenTimestamp,time:s.time,text:s.text,verbose:s.verbose}));}}var u=this.props.author,v=null,w=void 0;if(u&&!this.props.isExpanded){v=c('React').createElement(c('Image.react'),{alt:'',src:u.thumbSrc,className:"img UFIActorImage _54ru"});var x=null;if(this.props.showVerified)x=c('React').createElement(c('Badge.react'),{size:'xsmall',type:'verified'});if(u.i18nGender){w=[i._({"*":"{author}{verified_badge} replied"},[i.param('author',u.name,[1,u.i18nGender]),i.param('verified_badge',x)])];}else w=[i._("{author}{verified_badge} replied",[i.param('author',u.name),i.param('verified_badge',x)])];w.push(c('React').createElement(c('Middot.react'),{key:'middot-author'}),p);}else w=p;var y=u&&!this.props.isExpanded;return c('React').createElement('div',{className:o,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('div',{className:(y?"UFIReplyActorPhotoWrapper":'')+(y?' '+"UFIReplyActor":'')},c('React').createElement('i',{className:(!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(y?' '+"UFIIconWithActor":'')}),v),c('React').createElement('span',{className:n},c('React').createElement('span',{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":'')},w),q))));};function m(){j.apply(this,arguments);}f.exports=m;}),null);
__d("XUFICommentTooltipController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});}),null);
__d('UFICommentCount.react',['cx','fbt','ActorURI','NumberFormat','React','XUFICommentTooltipController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.$UFICommentCount1=function(){var n=this.props.commentCount,o=n==1;if(typeof n==='number')n=c('NumberFormat').formatInteger(n);return i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',n),i['enum'](o?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);};m.prototype.render=function(){var n=this.props.feedback,o=n.entidentifier,p=n.actorforpost,q=this.$UFICommentCount1(),r="fcg",s=null;if(o&&p)s=c('ActorURI').create(c('XUFICommentTooltipController').getURIBuilder().setString('ft_ent_identifier',o).getURI(),p);if(s){return c('React').createElement('span',{'aria-live':'polite',className:r,'data-hover':'tooltip','data-tooltip-uri':s},q);}else return c('React').createElement('span',{className:r},q);};function m(){j.apply(this,arguments);}m.propTypes={commentCount:l.oneOfType([l.number,l.string]).isRequired,feedback:l.object.isRequired};f.exports=m;}),null);
__d("XUFIShareTooltipController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/share\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});}),null);
__d("XUFIShareTooltipController.flow",["XUFIShareTooltipController"],(function a(b,c,d,e,f,g){f.exports=c("XUFIShareTooltipController");}),null);
__d('UFIShareRow.react',['cx','fbt','invariant','ActorURI','Layout.react','NumberFormat','React','UFICommentCount.react','URI','XUFIShareTooltipController.flow'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').Column,n=c('Layout.react').FillColumn;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;o.prototype.$UFIShareRow1=function(){var p=this.props,q=p.feedback,r=p.shownCommentCount;if(r&&Number(r)!==0)return c('React').createElement(c('UFICommentCount.react'),{feedback:q,commentCount:r});return null;};o.prototype.render=function(){var p=this.props.feedback.sharefbid||this.props.feedback.targetfbid,q=new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:p}),r=new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:p}),s=this.props.contextArgs.loggedOutLinkConfig;if(s&&s.showShareLink){q=s.shareAjaxifyURI;q||j(0);}var t=void 0;if(this.props.feedback.sharecount>1){var u=c('NumberFormat').formatInteger(this.props.feedback.sharecount);t=i._("{count} shares",[i.param('count',u)]);}else t=i._("1 share");var v="UFIRow"+(' '+"UFIShareRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''),w=c('ActorURI').create(c('XUFIShareTooltipController.flow').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost),x=c('React').createElement('a',{className:'UFIShareLink',rel:'dialog','data-hover':'tooltip','data-tooltip-uri':w,ajaxify:q.toString(),href:r.toString()},t),y=this.$UFIShareRow1();if(y)x=c('React').createElement(c('Layout.react'),null,c('React').createElement(n,null,x),c('React').createElement(m,null,y));return c('React').createElement('div',{className:v},x);};function o(){k.apply(this,arguments);}f.exports=o;}),null);
__d('UFISpamPlaceholder.react',['fbt','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){if(this.props.isLoading)return c('React').createElement('div',{className:'UFIRow'},c('React').createElement('span',{className:'UFISpamCommentWrapper'},c('React').createElement(c('XUISpinner.react'),{className:'mls',background:'light',size:'small'})));return c('React').createElement('div',{className:'UFIRow'},c('React').createElement('a',{href:'#',role:'button',className:'UFISpamCommentLink',onClick:this.props.onClick,'aria-label':h._("Show comments marked as spam")},c('React').createElement('span',{'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':h._("{count} hidden",[h.param('count',this.props.numHidden)]),className:'UFISpamCommentWrapper'},c('React').createElement('i',{className:'placeholderIcon'}))));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('UFISpamPlaceholderContainer.react',['FluxContainer','React','UFISharedDispatcher','UFISpamPlaceholder.react','UFISpamStore','UFIStoryAction'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state={isLoading:true,numHidden:0,onClick:function p(){}},l;}j.getStores=function(){return [c('UFISpamStore')];};j.calculateState=function(k,l){var m=l.contextArgs,n=l.viewas,o=l.comment,p=l.parentCommentID;return {isLoading:!!c('UFISpamStore').getState()[o.id],numHidden:o.spamCommentIDs.length,onClick:function q(){return c('UFISharedDispatcher').dispatch(c('UFIStoryAction').spamFetched(m,n,o.spamCommentIDs,p));}};};j.prototype.shouldComponentUpdate=function(k,l){return k.contextArgs!=this.props.contextArgs||k.viewas!=this.props.viewas||k.parentCommentID!=this.props.parentCommentID||l.isLoading!=this.state.isLoading||l.numHidden!=this.state.numHidden;};j.prototype.render=function(){return c('React').createElement(c('UFISpamPlaceholder.react'),this.state);};f.exports=c('FluxContainer').create(j,{pure:false,withProps:true});}),null);
__d('UFITranslateAllRow.react',['cx','ContentTranslationStrings','Link.react','React','UFIInstanceAction','UFISharedDispatcher'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$UFITranslateAllRow1=function(){c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').translateAll(this.props.contextArgs));}.bind(this),m;}k.prototype.render=function(){return c('React').createElement('div',{className:"UFIRow"},c('React').createElement('div',{className:"_4upo"},c('React').createElement(c('Link.react'),{onClick:this.$UFITranslateAllRow1},c('ContentTranslationStrings').TRANSLATE_ALL_TEXT)));};f.exports=k;}),null);
__d('StaticUFI.react',['csx','cx','invariant','Arbiter','BanzaiODS','BlueBar','BootloadOnRender.react','DOM','Event','FbFeedCommentUFIScroller','FluxContainer','JSResource','LazyComponent.react','LogHistory','Parent','React','ReactDOM','SearchableEntry','SubscriptionsHandler','TrackingNodes','UFIAcceptedAnswerStore','UFIAddComment.react','UFIAddCommentLink.react','UFIAnimatedCommentList.react','UFIComment.react','UFICommentDisabledNotice.react','UFICommentEditIDStore','UFICommentFilters','UFICommentHeader.react','UFICommentListVisibilityTracker.react','UFIComments','UFICommentScrollableArea.react','UFICommercialBreakStore','UFIComponentLogger.react','UFIComponents','UFIConfig','UFIConstants','UFIContainer.react','UFIInteractionStore','UFILikeSentence.react','UFILivePinnedCommentStore','UFILiveTypingIndicatorContainer.react','UFILocallyComposedCommentStore','UFIOrderingModeStore','UFIPagerGenerator','UFIPaging','UFIReplySocialSentence.react','UFIShareRow.react','UFISpamPlaceholderContainer.react','UFIStoryAction','UFITranslateAllRow.react','URI','XUISpinner.react','distinctArrayBy','emptyFunction','getElementPosition','getElementRect','getUnboundedScrollPosition','ifRequired','shallowEqual','throttle'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('UFIConfig').UFICommentFilterFallbackWarning||null,n=c('UFIConstants').UFIFeedbackSourceType,o=c('UFIConstants').UFIPayloadSourceType,p=c('UFIConstants').UFIStatus,q=c('React').PropTypes,r=c('React').createElement('div',{className:"UFICommentsLoadingSpinnerContainer _48pi UFIRow"},c('React').createElement(c('XUISpinner.react'),{size:'large'})),s=c('React').createElement('div',{className:"_xtv _32k4",role:'presentation'},c('React').createElement('i',null));k=babelHelpers.inherits(t,c('React').Component);l=k&&k.prototype;function t(u){l.constructor.call(this,u);this.loadMoreComments=function(){if(this.$StaticUFI1&&this.refs.topLevelBottomPager&&!(this.props.contextArgs.ftentidentifier in this.props.isActiveLoading)){var w=c('ReactDOM').findDOMNode(this.refs.topLevelBottomPager),x=c('getUnboundedScrollPosition')(window).y,y=x+(document.documentElement?document.documentElement.clientHeight:0)+c('UFIConstants').infiniteScrollRangeForQANDAPermalinks;if(w instanceof HTMLElement&&w.offsetHeight&&w.offsetTop<y)this.refs.topLevelBottomPager.props.onPagerClick();}}.bind(this);this.onComment=function(){var w=c('ReactDOM').findDOMNode(this),x=null,y=null;if(w instanceof Node){x=c('Parent').byTag(w,'form');y=c('Parent').bySelector(w,"._3g6d");}var z=[function(){return this.refs.toplevelcomposer;}.bind(this),function(){return this.$StaticUFI37(x);}.bind(this),function(){return this.$StaticUFI37(y);}.bind(this)],aa=z.reduce(function(ba,ca){return ba||ca();},null);if(aa){aa.focus();c('FbFeedCommentUFIScroller').reveal(c('ReactDOM').findDOMNode(aa));}}.bind(this);var v=this.props.focusReply;this.state={acceptedAnswerState:{type:'NoneAccepted'},focusReply:v,viewerHasClickedCommentComposer:false,viewerHasClickedSeeMore:false,editcommentid:c('UFICommentEditIDStore').getForInstance(this.props.contextArgs.instanceid),localCommentIDs:c('UFILocallyComposedCommentStore').getStateForInstance(this.props.contextArgs.instanceid),inCommercialBreak:c('UFICommercialBreakStore').getValueFor(this.props.contextArgs.instanceid)};}t.getStores=function(){return [c('UFIAcceptedAnswerStore')];};t.calculateState=function(u,v){var w=v.contextArgs,x=v.feedback,y=c('UFIAcceptedAnswerStore').get(w.ftentidentifier,x.acceptedanswer);return babelHelpers['extends']({},u,{acceptedAnswerState:y});};t.prototype.componentDidMount=function(){this.$StaticUFI1=true;c('Arbiter').inform('UFI/displayDone-'+this.props.contextArgs.instanceid);this.$StaticUFI2=new (c('SubscriptionsHandler'))();if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var u=c('throttle')(this.loadMoreComments,20);this.$StaticUFI2.addSubscriptions(c('Event').listen(window,'scroll',u),c('Event').listen(window,'resize',u));}this.$StaticUFI5();this.$StaticUFI2.addSubscriptions(c('UFICommentEditIDStore').addListener(function(){this.setState({editcommentid:c('UFICommentEditIDStore').getForInstance(this.props.contextArgs.instanceid)});}.bind(this)),c('UFILocallyComposedCommentStore').addListener(function(){this.setState({localCommentIDs:c('UFILocallyComposedCommentStore').getStateForInstance(this.props.contextArgs.instanceid)});}.bind(this)),c('UFICommercialBreakStore').addListener(function(){this.setState({inCommercialBreak:c('UFICommercialBreakStore').getValueFor(this.props.contextArgs.instanceid)});}.bind(this)));};t.prototype.componentWillReceiveProps=function(u){if(this.props.focusReply!==u.focusReply)this.setState({focusReply:u.focusReply});};t.prototype.componentWillUnmount=function(){this.$StaticUFI1=false;this.$StaticUFI2&&this.$StaticUFI2.release();};t.prototype.shouldComponentUpdate=function(u,v){var w=this.props,x=this.state;return !c('shallowEqual')(x,v)||!c('shallowEqual')(x.loadingSpamIDs,v.loadingSpamIDs)||!c('shallowEqual')(x.localCommentIDs,v.localCommentIDs)||!c('shallowEqual')(x.inCommercialBreak,v.inCommercialBreak)||!c('shallowEqual')(w,u)||!c('shallowEqual')(w.feedback,u.feedback)||!c('shallowEqual')(w.repliesMap,u.repliesMap)||!c('shallowEqual')(w.commentCounts,u.commentCounts)||!c('shallowEqual')(w.deletedCounts,u.deletedCounts)||!c('shallowEqual')(w.availableComments,u.availableComments)||!c('shallowEqual')(w.ranges,u.ranges)||!c('shallowEqual')(w.authorProfiles,u.authorProfiles)||!c('shallowEqual')(w.commentPermalinks,u.commentPermalinks)||!c('shallowEqual')(w.canAddCommentMap,u.canAddCommentMap)||!c('shallowEqual')(w.canReplyMap,u.canReplyMap)||!c('shallowEqual')(w.isActiveLoading,u.isActiveLoading)||!c('shallowEqual')(w.allSeenActiveLoadDirectionData,u.allSeenActiveLoadDirectionData)||!c('shallowEqual')(w.repliesExpandedMap,u.repliesExpandedMap)||!c('shallowEqual')(w.loadingTranslationsMap,u.loadingTranslationsMap);};t.prototype.componentWillUpdate=function(u,v){this.$StaticUFI3=this.$StaticUFI3||!this.$StaticUFI6(this.props.payloadSource)&&this.props.source===n.NEWS_FEED&&c('BlueBar').hasFixedBlueBar();if(this.$StaticUFI3&&!this.$StaticUFI4){var w=c('ReactDOM').findDOMNode(this);if(w instanceof Element)this.$StaticUFI4=c('getElementRect')(w);}};t.prototype.componentDidUpdate=function(u,v){this.$StaticUFI5(u);if(this.$StaticUFI3&&this.$StaticUFI4){var w=this.$StaticUFI7(this.$StaticUFI4);if(w!==null)c('Arbiter').inform('ufi/didUpdate',{offsetY:w});this.$StaticUFI3=false;this.$StaticUFI4=null;}};t.prototype.$StaticUFI6=function(u){return u===o.UNKNOWN||u===o.INITIAL_SERVER||u===o.USER_ACTION||u===o.COLLAPSE_ACTION;};t.prototype.$StaticUFI7=function(u){var v=c('getElementPosition')(c('BlueBar').getMaybeFixedRoot());if(u.bottom<v.height){var w=u.bottom-u.top,x=c('ReactDOM').findDOMNode(this);if(x instanceof HTMLElement)return x.offsetHeight-w;}return null;};t.prototype.$StaticUFI8=function(){var u=this.props,v=u.contextArgs,w=u.commentCounts,x=u.deletedCounts,y=u.feedback,z=y.commentcountreduced,aa=v.ftentidentifier,ba=null;if(this.$StaticUFI9())if(z&&isNaN(z)){ba=z;}else ba=w[aa]-x[aa];return ba;};t.prototype.$StaticUFI5=function(u){if(this.props.loadingComments)return;if(this.props.focusTopLevelComposer)this.onComment();if(this.state.focusReply){var v=this.state.focusReply,w=v.replyID,x=v.initiatorComment;if(!(w in this.refs))return;var y=this.refs[w]&&this.refs[w].refs&&this.refs[w].refs.mentionsinput;if(!y)return;y.focus();c('FbFeedCommentUFIScroller').reveal(c('ReactDOM').findDOMNode(y));this.setState({focusReply:null});if(!x)return;var z=y.hasEnteredText(),aa=x.author===this.props.feedback.actorforpost,ba=!!x.parentcommentid;if(!z&&!aa&&ba)y.insertMention(this.$StaticUFI10(x.author));}};t.prototype.$StaticUFI10=function(u){var v=this.props.authorProfiles[u],w=v.type;return new (c('SearchableEntry'))({uniqueID:v.id,title:v.name,type:w==='friend'?'user':w});};t.prototype.$StaticUFI11=function(){return this.props.source===n.ADS;};t.prototype.$StaticUFI12=function(){return this.props.source===n.LIVE_VIDEO;};t.prototype.$StaticUFI13=function(){var u=this.props.contextArgs,v=u.feedcontext&&JSON.parse(u.feedcontext);return !!(v&&(v.is_snowlift||v.is_narrow));};t.prototype.$StaticUFI14=function(){return this.props.source===n.COMPACT_SEARCH;};t.prototype.$StaticUFI15=function(){var u=this.props,v=u.hideOrderingModeSelector,w=u.feedback,x=u.commentCounts,y=u.contextArgs;return !v&&w.orderingmodes&&!this.$StaticUFI14()&&x[y.ftentidentifier]>=c('UFIConstants').minCommentsForOrderingModeSelector;};t.prototype.$StaticUFI16=function(){var u=this.props,v=u.contextArgs,w=u.ranges,x=v.ftentidentifier,y=w[x].getLength();return this.$StaticUFI17(x,y);};t.prototype.$StaticUFI17=function(u,v){var w=this.props.commentCounts;return w[u]==v;};t.prototype.$StaticUFI18=function(){var u=this.props,v=u.contextArgs,w=u.feedback;return w.seencount>0&&!v.entstream;};t.prototype.$StaticUFI19=function(){return c('UFILikeSentence.react').rendersSocialSentence(this.props);};t.prototype.$StaticUFI20=function(){var u=this.props;return Boolean(u.contextArgs.showCommentHeader);};t.prototype.$StaticUFI21=function(){var u=this.props,v=u.contextArgs,w=u.feedback;return this.$StaticUFI11()||this.$StaticUFI12()||v.search||this.hasReactions(w,v);};t.prototype.$StaticUFI22=function(){if(this.$StaticUFI21())return false;return this.$StaticUFI19()||this.$StaticUFI18()||this.$StaticUFI15()||this.$StaticUFI20();};t.prototype.$StaticUFI23=function(){var u=this.props,v=u.contextArgs,w=u.feedback;if(this.$StaticUFI11())return false;return Boolean(v.showshares&&w.sharecount&&!this.hasReactions(w,v));};t.prototype.$StaticUFI24=function(){return this.$StaticUFI23()&&!this.props.contextArgs.entstream;};t.prototype.$StaticUFI9=function(){if(this.$StaticUFI11()||this.$StaticUFI14())return false;var u=this.props.availableComments;return !!(u&&u.length);};t.prototype.$StaticUFI25=function(){var u=this.props,v=u.canAddCommentMap,w=u.contextArgs,x=u.feedback;return x.cancomment&&Boolean(w.showaddcomment)&&Boolean(x.actorforpost)&&v[w.ftentidentifier];};t.prototype.$StaticUFI26=function(){return this.$StaticUFI25()&&this.$StaticUFI27()&&this.props.hasPagedToplevel;};t.prototype.$StaticUFI28=function(){var u=this.props.feedback;return u.arecommentsdisabled===true&&u.cancomment===false;};t.prototype.$StaticUFI29=function(){if(!this.$StaticUFI24())return false;var u=this.props.contextArgs.isPermalink,v=u?this.$StaticUFI8():null;return Boolean(v)&&Number(v)!==0;};t.prototype.$StaticUFI30=function(){if(!this.$StaticUFI24())return null;var u=this.props,v=u.contextArgs,w=u.feedback,x=this.$StaticUFI29()?this.$StaticUFI8():null;return c('React').createElement(c('UFIShareRow.react'),{contextArgs:v,feedback:w,shownCommentCount:x});};t.prototype.$StaticUFI31=function(){var u=this.props,v=u.feedback,w=u.contextArgs,x=u.commentCounts;if(this.$StaticUFI22())return c('React').createElement(c('UFILikeSentence.react'),{contextArgs:w,feedback:v,commentCounts:x,showOrderingModeSelector:this.$StaticUFI15(),key:'ufi_like_sentence'});return null;};t.prototype.render=function(){var u=this.props,v=u.feedback,w=u.contextArgs,x=this.$StaticUFI28(),y=this.$StaticUFI23(),z=this.$StaticUFI31(),aa=!!z,ba=x?c('React').createElement(c('UFICommentDisabledNotice.react'),{feedback:u.feedback}):null,ca=this.$StaticUFI30();if(u.loadingComments)return c('React').createElement(c('UFIContainer.react'),{shouldHide:this.state.inCommercialBreak},z,ca,r);var da=this.$StaticUFI9(),ea=u.ranges[w.ftentidentifier],fa=Number(u.loggingOffset)-ea.getOffset(),ga=v.targetiscomment,ha=da?this.renderCommentArray(u.availableComments,fa,ga,null):null,ia=null,ja=null,ka=v.cancomment,la=aa||y||da||ka,ma=null,na=this.state.acceptedAnswerState.type==='Accepted'?this.state.acceptedAnswerState.id:null,oa=c('UFILivePinnedCommentStore').getPinnedCommentID(w.ftentidentifier)||na;if(oa){var pa=c('UFIComments').getComment(oa);if(pa&&!u.authorProfiles[pa.author]){c('BanzaiODS').bumpEntityKey('unsampled_feedback','missing_pinned_comment_author');}else if(pa)if(na&&na===this.state.editcommentid){ma=this.renderEditCommentBox(pa);}else ma=this.renderComment(pa,0,false,false,na===oa,false,true,!!this.props.loadingTranslationsMap[pa.id]);}var qa=la?c('React').createElement(c('UFICommentHeader.react'),null):null;if(this.$StaticUFI25()||w.loggedOutLinkConfig&&w.loggedOutLinkConfig.showAddComment){var ra=this.$StaticUFI32();if(ra){var sa=c('UFIOrderingModeStore').isLiveStreaming(w.instanceid);if(!w.islivestreaming||!sa)ia=c('React').createElement(c('UFILiveTypingIndicatorContainer.react'),{contextArgs:w,feedbackTargetID:v.targetfbid});ja=c('React').createElement(c('UFIAddComment.react'),{viewerActorID:v.actorforpost,targetID:v.ownerid,initialData:null,ref:'toplevelcomposer',withoutSeparator:false,editingComment:{},isEditing:false,mentionsDataSource:v.mentionsdatasource,showSendOnEnterTip:v.showsendonentertip,multiCompanyGroupsCount:v.multicompanygroupscount,allowVideoAttachments:v.allowvideoattachments&&!sa,allowPhotoAttachments:v.allowphotoattachments&&!sa,allowStickerAttachments:v.allowstickerattachments&&!sa,allowGifAttachments:v.allowgifattachments&&!sa,allowTipJar:Boolean(v.istipjarenabled&&sa),contextArgs:w,subtitle:v.subtitle,isQAndA:v.isqanda,markViewerHasInteracted:this.state.viewerHasClickedCommentComposer?c('emptyFunction'):function(){return this.setState({viewerHasClickedCommentComposer:true});}.bind(this),allowCommentMarkdown:v.iscommentmarkdowneligible,keepFocus:sa,constituentBanner:v.constituentbanneruri});}}var ta=w.ftentidentifier,ua=this.renderPagers(ta,false,u.ranges[ta].getOffset(),u.ranges[ta].getLength()),va=ua.topPager,wa=ua.bottomPager,xa=this.$StaticUFI27()?ia:null,ya=this.$StaticUFI27()?null:ia,za=this.$StaticUFI33(ta,va,wa),ab=za.topFilterWarning,bb=za.bottomFilterWarning,cb=c('UFIComponents').applyToUFIComponents([xa,va,ab].concat(ha,[bb,wa,ya]),{isFirstCommentComponent:true},{isLastCommentComponent:true}),db=cb.slice(0,3);xa=db[0];va=db[1];ab=db[2];var eb=cb.slice(-3);bb=eb[0];wa=eb[1];ya=eb[2];ha=cb.slice(3,-3);var fb=this.$StaticUFI27()?ja:null,gb=this.$StaticUFI27()?null:ja,hb=this.$StaticUFI26()?c('React').createElement(c('UFIAddCommentLink.react'),{onClick:this.onComment,isQAndA:v.isqanda,isGroupQA:w.isaskquestion}):null,ib=true,jb=null;if(w.showCommentNuxForGroupMallAds)jb=c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFICommentNuxForGroupMallAds.react').__setRef('StaticUFI.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{commentNuxContent:w.groupMallAdsCommentNuxContent})});cb=c('UFIComponents').applyToUFIComponents([z,ca,fb,va,ab].concat(ha,[bb,wa,gb,hb]),{isFirstComponent:ib},{isLastComponent:true});var kb=cb.slice(0,5);z=kb[0];ca=kb[1];fb=kb[2];va=kb[3];ab=kb[4];var lb=cb.slice(-4);bb=lb[0];wa=lb[1];gb=lb[2];hb=lb[3];ha=cb.slice(5,-4);var mb=!!c('UFIInteractionStore').getValueFor(w.instanceid);if(w.enableFacecastAnimatedComments&&c('UFIOrderingModeStore').isLiveStreaming(w.instanceid))ha=c('ifRequired')('ReactTransitionGroup',function(pb){if(!u.availableComments||!u.availableComments.length)return ha;var qb=w.isBroadcasterUFI,rb=qb?u.availableComments[u.availableComments.length-1]:u.availableComments[0];return c('React').createElement(pb,{component:'div',className:"_3s3y"},c('React').createElement(c('UFIAnimatedCommentList.react'),{key:c('UFIComments').getRenderKey(rb.id),isLatestCommentLocal:rb.__typename==='local',isStreamingFromBottom:qb},ha));},function(){return ha;});var nb=null;if(this.state.acceptedAnswerState.type==='Accepted'){var ob=c('UFIComments').getComment(this.state.acceptedAnswerState.id);if(ob)nb=this.renderReplyContainer(ob);}return c('React').createElement(c('UFIContainer.react'),{shouldHide:this.state.inCommercialBreak},w.shownub&&la?s:null,z,ca,qa,jb,fb,c('React').createElement(c('UFICommentListVisibilityTracker.react'),{contextArgs:w},c('React').createElement(c('UFICommentScrollableArea.react'),{scrollcomments:!!w.scrollcomments,scrollwidth:w.scrollwidth||0},c('React').createElement(c('UFIComponentLogger.react'),{contextArgs:w,feedback:v,hasComments:da,isPermalink:w.isPermalink,viewerHasInteractedWithComments:mb||this.state.viewerHasClickedCommentComposer||this.state.viewerHasClickedSeeMore},xa,va,ab,w.isBroadcasterUFI?null:ma,nb,ha,w.isBroadcasterUFI?ma:null,bb,wa,ya))),gb,hb,ba);};t.prototype.$StaticUFI32=function(){return this.state.editcommentid===null;};t.prototype.renderCommentArray=function(u,v,w,x){var y=this.props,z=y.contextArgs,aa=this.props.feedback;if(!u.length)return [];u=c('distinctArrayBy')(u,function(ca){return ca.id;});u=u.filter(function(ca){return this.state.acceptedAnswerState.type==='NoneAccepted'&&ca.id||this.state.acceptedAnswerState.type==='Accepted'&&ca.id!==this.state.acceptedAnswerState.id;}.bind(this));var ba=c('UFICommentFilters').collectSpamBuckets(u,y.authorProfiles);return ba.reduce(function(ca,da,ea){if(!da)return ca;if(c('UFICommentFilters').isSpam(da)){ca.push(c('React').createElement(c('UFISpamPlaceholderContainer.react'),{key:'spam'+da.id,contextArgs:z,viewas:z.viewas,comment:da,parentCommentID:x}));}else{if(da.id==this.state.editcommentid){ca.push(this.renderEditCommentBox(da));}else{var fa=Math.max(v-ea,0),ga=ea===0,ha=ea===ba.length-1,ia=!w&&!aa.arecommentsdisabled,ja=w&&!ga;ca.push(this.renderComment(da,fa,ga,ha,ia,ja,false,!!this.props.loadingTranslationsMap[da.id]));if(da.id==this.props.translateAllCommentID&&!c('UFIOrderingModeStore').isLiveStreaming(z.instanceid))ca.push(c('React').createElement(c('UFITranslateAllRow.react'),{key:'translateAll'+da.id,contextArgs:z}));if(da.upsellreview)ca.push(c('React').createElement(c('BootloadOnRender.react'),{key:'bootloadUpsell'+da.id,loader:c('JSResource')('UFIReviewUpsell.react').__setRef('StaticUFI.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{key:'upsell'+da.id,pageId:da.upsellreview.page_id,pageName:da.upsellreview.page_name,reviewRef:da.upsellreview.review_ref})}));}if(!w&&!c('UFICommentFilters').isDeleted(da)&&!c('UFIOrderingModeStore').isLiveStreaming(z.instanceid)){var ka=this.renderReplyContainer(da);if(ka)ca.push(ka);}}return ca;}.bind(this),[]);};t.prototype.renderReplyContainer=function(u){var v=this.props,w=v.commentCounts[u.id],x=v.repliesExpandedMap[u.id],y=!x&&u.interestingReplyId,z=v.ranges[u.id],aa=void 0,ba=void 0;if(x||u.interestingReplyId){aa=v.repliesMap[u.id];ba=z.getOffset();if(y){var ca=aa.filter(function(cb){return cb.id===u.interestingReplyId;});if(ca.length!==1){c('LogHistory').getInstance('ufi').error('comment '+u.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');aa=null;}else{aa=ca;ba=u.interestingReplyOffset;}}}var da=void 0,ea=null,fa=null,ga=null,ha=null;if(aa){var ia=z.getOffset(),ja=z.getLength();if(y){ia=ba;ja=1;}var ka=this.renderPagers(u.id,true,Number(ia),ja);ea=ka.topPager;fa=ka.bottomPager;var la=Number(v.loggingOffset)-Number(ba);da=this.renderCommentArray(aa,la,true,u.id);var ma=this.$StaticUFI34(u.id,ea,fa);ga=ma.topFilterWarning;ha=ma.bottomFilterWarning;}var na=Math.max(w-Number(u.spamreplycount),0),oa=void 0;if(!c('UFIOrderingModeStore').isLiveStreaming(this.props.contextArgs.instanceid)&&na&&(x&&aa&&aa.length>v.replySocialSentenceMaxReplies||!x&&!aa)){var pa=z.isLoadingPrev()||z.isLoadingNext(),qa=x&&!ea&&pa,ra=null;if(u.replyauthors&&u.replyauthors.length)ra=v.authorProfiles[u.replyauthors[0]];var sa=aa?aa.length:0;oa=c('React').createElement(c('UFIReplySocialSentence.react'),{contextArgs:v.contextArgs,author:ra,replies:x?sa:na,timestamp:u.recentreplytimestamp,onClick:function(){return this.context.dispatch(c('UFIStoryAction').toggleReplies(v.contextArgs,u.id));}.bind(this),isLoading:qa,isExpanded:x,showVerified:v.feedback.showfeaturedreplies,orderingMode:v.orderingMode});}var ta=void 0;if(x)if(u.cancomment&&v.canAddCommentMap[u.id]&&!(u.needsApproval||u.canAppeal||u.canSecure)){var ua=false;if(da)for(var va=da.length-1;va>=0;va--)if(da[va]){ua=da[va].props.isAuthorReply;break;}ta=this.renderReplyComposer(u,!ua);}var wa=void 0;if(oa||ea||ga||da||ha||fa||ta){var xa=c('UFIComponents').applyToUFIComponents([oa,ea,ga].concat(da,[ha,fa,ta]),{isFirstComponent:true},{isLastComponent:true}),ya=xa.slice(0,3);oa=ya[0];ea=ya[1];ga=ya[2];var za=xa.slice(-3);ha=za[0];fa=za[1];ta=za[2];da=xa.slice(3,-3);var ab=u.status===p.LIVE_DELETED,bb=this.state.acceptedAnswerState.type==='Accepted'&&u.id===this.state.acceptedAnswerState.id;wa=c('React').createElement(c('UFIContainer.react'),{key:'replies'+u.id,isParentLiveDeleted:ab,isReplyList:true,isAcceptedAnswerReply:bb},oa,ea,ga,da,ha,fa,ta);}return wa;};t.prototype.renderReplyComposer=function(u,v){var w=this.props,x=w.contextArgs,y=w.feedback,z=this.state.editcommentid!==null,aa=z&&!u.id;if(aa)return null;var ba=c('UFIOrderingModeStore').isLiveStreaming(x.instanceid);return c('React').createElement(c('UFIAddComment.react'),{viewerActorID:y.actorforpost,replyCommentID:u.id,targetID:y.ownerid,initialData:null,ref:'replycomposer-'+u.id,withoutSeparator:v,editingComment:{},isEditing:false,mentionsDataSource:y.mentionsdatasource,showSendOnEnterTip:false,allowVideoAttachments:y.allowvideoattachments&&!ba,allowPhotoAttachments:y.allowphotoattachments&&!ba,allowStickerAttachments:y.allowstickerattachments&&!ba,allowGifAttachments:y.allowgifattachments&&!ba,allowCommentMarkdown:y.iscommentmarkdowneligible,contextArgs:x,subtitle:y.subtitle,isQAndA:y.isqanda,constituentBanner:y.constituentbanneruri});};t.prototype.renderEditCommentBox=function(u){var v=this.props,w=v.contextArgs,x=v.feedback,y=babelHelpers['extends']({},w);delete y.addcommentautoflip;delete y.collapseaddcomment;delete y.hideActorPhoto;delete y.issnowlift;delete y.loggedOutLinkConfig;delete y.monitorHeight;delete y.sht;delete y.viewoptionstypeobjects;delete y.viewoptionstypeobjectsorder;return c('React').createElement(c('UFIAddComment.react'),{key:'editing_comment'+u.id,viewerActorID:x.actorforpost,targetID:x.ownerid,mentionsDataSource:x.mentionsdatasource,contextArgs:y,isEditing:true,editingComment:u,allowVideoAttachments:x.allowvideoattachments,allowPhotoAttachments:x.allowphotoattachments,allowStickerAttachments:x.allowstickerattachments,allowGifAttachments:x.allowgifattachments,isQAndA:x.isqanda,constituentBanner:x.constituentbanneruri});};t.prototype.renderComment=function(u,v,w,x,y,z,aa,ba){var ca=this.props,da=ca.feedback,ea=da.actorforpost===u.author,fa=u.__typename==='local'||this.state.localCommentIDs[u.id],ga=Boolean(da.showremovemenu||da.viewerid===u.author),ha=Boolean(da.canremoveall&&da.isownerpage&&!ea),ia=ca.source!=n.INTERN,ja=!!u.parentcommentid,ka=u.parentcommentid,la=true;if(ja&&ka&&ka in this.props.canReplyMap&&this.props.canReplyMap[ka]!==null)la=this.props.canReplyMap[ka];var ma=!!u.isfeatured,na=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.COMMENT,v),oa=new (c('URI'))(ca.commentPermalinks[u.id]).addQueryData({comment_tracking:na}).toString();return c('React').createElement(c('UFIComment.react'),{key:c('UFIComments').getRenderKey(u.id),isFirst:w,isLast:x,showReplyLink:y,hasPartialBorder:z,comment:u,authorProfiles:ca.authorProfiles,viewerIsAuthor:ea,feedback:da,'data-ft':na,contextArgs:ca.contextArgs,hideAsSpamForPageAdmin:ha,isLocallyComposed:fa,isFeatured:ma,parentCanComment:la,permalink:oa,showPermalink:ia,showRemoveReportMenu:ga,focusOnMount:u.id===ca.commentIDToFocusOnMount,orderingMode:ca.orderingMode,featuredCommentIDs:ca.featuredCommentIDs,markViewerHasInteracted:this.state.viewerHasClickedSeeMore?c('emptyFunction'):function(){return this.setState({viewerHasClickedSeeMore:true});}.bind(this),isLivePinnedComment:aa,showTranslation:ba||!!u.translationdata});};t.prototype.$StaticUFI33=function(u,v,w){return this.$StaticUFI35(u,v,w,false);};t.prototype.$StaticUFI34=function(u,v,w){return this.$StaticUFI35(u,v,w,true);};t.prototype.$StaticUFI35=function(u,v,w,x){var y=null,z=null;if(!v)y=this.$StaticUFI36(u,c('UFIPaging').TOP,x);if(!w)z=this.$StaticUFI36(u,c('UFIPaging').BOTTOM,x);return {topFilterWarning:y,bottomFilterWarning:z};};t.prototype.$StaticUFI36=function(u,v,w){var x=this.props.allSeenActiveLoadDirectionData;if(!x)return null;var y=x[u];if(!y||!(v in y))return null;var z=this.props;if(!m||!m.shouldRender(z,u,v,w))return null;return c('React').createElement(m,{asReplyWarning:w,targetID:u,pagingDirection:v,ufiProps:z});};t.prototype.renderPagers=function(u,v,w,x){var y=this.props;if(this.$StaticUFI17(u,x)||this.$StaticUFI11()||this.$StaticUFI14()||!v&&y.hideToplevelPager)return {topPager:null,bottomPager:null};Number.isInteger(y.commentCounts[u])||j(0);Number.isInteger(y.deletedCounts[u])||j(0);Number.isInteger(x)||j(0);return c('UFIPagerGenerator').renderPagers({commentCount:y.commentCounts[u],contextArgs:y.contextArgs,currentLength:x,currentOffset:w,deletedCount:y.deletedCounts[u],feedback:y.feedback,onPageCallback:function(z,aa){this.context.dispatch(c('UFIStoryAction').pageInComments(y.contextArgs,u,z,aa));}.bind(this),orderingMode:y.orderingMode,range:y.ranges[u],targetID:u});};t.prototype.$StaticUFI37=function(u){if(!u)return null;return c('DOM').scry(u,'[name="add_comment_text_text"]').concat(c('DOM').scry(u,'[name="add_comment_text"]')).find(function(v){return !c('Parent').byClass(v,'UFIReplyList');});};t.prototype.$StaticUFI27=function(){return Boolean(c('UFIOrderingModeStore').isInverted(this.props.orderingMode));};t.prototype.hasReactions=function(u,v){return Boolean(u.displayreactions&&v.hasReactions&&(v.feedbackMode==='none'||v.feedbackMode==='toggle'));};t.contextTypes={dispatch:q.func};t.defaultProps={commentIDToFocusOnMount:null,focusReply:null,canReplyMap:{},isActiveLoading:{},repliesExpandedMap:{},hasPagedToplevel:false,loadingSpamIDs:{},loadingTranslationsMap:{}};f.exports=c('FluxContainer').create(t,{pure:false,withProps:true});}),null);
__d('UFIBlingItem.react',['cx','fbt','NumberFormat','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){var m=c('NumberFormat').formatInteger(this.props.count),n=m;switch(this.props.itemKey){case 'like':n=i._({"Like":"{count} Like","Likes":"{count} Likes"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Like':'Likes',{Like:'Like',Likes:'Likes'})]);break;case 'comment':n=i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);break;case 'reaction':n=i._({"Reaction":"{count} Reaction","Reactions":"{count} Reactions"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Reaction':'Reactions',{Reaction:'Reaction',Reactions:'Reactions'})]);break;case 'reshare':n=i._({"Share":"{count} Share","Shares":"{count} Shares"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})]);break;}return c('React').createElement('span',{className:"_2u_j"},n);};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('UFIBlingBox.react',['cx','fbt','NumberFormat','React','UFIBlingItem.react','UFIReactionTypes'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=[],o='',p=this.props,q=p.likes,r=p.likesreduced,s=p.reactionCount,t=p.reactionCountMap,u=p.reactionCountReduced;if(q||s){var v=t&&t[c('UFIReactionTypes').LIKE]['default']!==s;n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',count:v?s||0:q,countreduced:v?u||'':r,itemKey:v?'reaction':'like',key:'like'}));o+=this.props.likes==1?i._("1 like"):i._({"*":"{count} likes"},[i.param('count',this.props.likes,[0])]);o+=' ';}if(this.props.comments){var w=this.props.commentsreduced;if(this.props.contextArgs.islivestreaming)w=c('NumberFormat').formatInteger(this.props.comments);n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:w,itemKey:'comment',key:'comment'}));o+=this.props.comments==1?i._("1 comment"):i._({"*":"{count} comments"},[i.param('count',this.props.comments,[0])]);o+=' ';}if(this.props.reshares){n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',count:this.props.reshares,countreduced:this.props.resharesreduced,itemKey:'reshare',key:'reshare'}));o+=this.props.reshares==1?i._("1 share"):i._({"*":"{count} shares"},[i.param('count',this.props.reshares,[0])]);}if(this.props.readOnly){return c('React').createElement('span',{'aria-label':o},n);}else{var x=this.props.contextArgs.commentajaxify;return c('React').createElement('a',{ajaxify:x,href:this.props.permalink,'data-ft':this.props['data-ft'],'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'aria-label':o,onClick:this.props.onClick,rel:x?'dialog':'ignore'},n);}};function m(){j.apply(this,arguments);}m.propTypes={contextArgs:l.object.isRequired,'data-ft':l.string,'data-comment-prelude-ref':l.string,comments:l.number,commentsreduced:l.string,likes:l.number,likesreduced:l.string,nfb:l.number,onClick:l.func,permalink:l.string,reactionCount:l.number,reactionCountMap:l.object,reactionCountReduced:l.string,reshares:l.number,resharesreduced:l.string,readOnly:l.bool};f.exports=m;}),null);
__d('UFIReactionsBlingSocialSentence.react',['cx','fbt','ActorURI','BanzaiLogger','Bootloader','BootloadOnRender.react','FeedbackSourceType','JSResource','LazyComponent.react','NumberFormat','PagesPrivateReplyConstants','React','Tooltip.react','UFIPrivateReplyIndicator.react','UFIReactionsSocialSentence.react','URI','XUFICommentTooltipController','XUFIGroupSeenByProfileBrowserController','XUFIGroupSeenByProfileDialogController','XUFIShareTooltipController','XUIText.react'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.onCommentsClick=function(event){var r=this.props.contextArgs.commentajaxify;if(r){if(this.props.contextArgs.showtheaterforcomment){this.launchSnowlift(r,event.currentTarget);}else this.launchDialog(r,event.currentTarget);event.preventDefault();}else if(this.props.onCommentClick){this.props.onCommentClick(event);event.preventDefault();}this.logCountAction('comments','click');}.bind(this),this.onSeensClick=function(event){var r=this.props.feedback,s=c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',r.entidentifier).getURI();s=c('ActorURI').create(s,r.actorforpost);this.launchDialog(s.toString(),event.currentTarget);this.logCountAction('seens','click');event.preventDefault();}.bind(this),this.onSharesClick=function(event){if(this.isCompactSearch())return;var r=this.props.feedback,s=r.sharefbid||r.targetfbid,t=c('ActorURI').create(new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:s}),r.actorforpost);this.launchDialog(t.toString(),event.currentTarget);this.logCountAction('shares','click');event.preventDefault();}.bind(this),this.onViewsClick=function(event){this.logCountAction('views','click');}.bind(this),this.onViewsHover=function(event){if(this.canSeeConsolidatedTooltip())this.logCountAction('views','hover');}.bind(this),n;}l.prototype.launchSnowlift=function(m,n){'use strict';c('Bootloader').loadModules(["PhotoSnowlift"],function(o){o.bootstrap(m,n);},'UFIReactionsBlingSocialSentence.react');};l.prototype.launchDialog=function(m,n){'use strict';c('Bootloader').loadModules(["AsyncDialog"],function(o){o.bootstrap(m,n,'dialog');},'UFIReactionsBlingSocialSentence.react');};l.prototype.logCountAction=function(m,n){'use strict';c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:n,target_type:'count',target_subtype:m});};l.prototype.renderComments=function(){'use strict';var m=this.props.contextArgs.islivestreaming;if(!this.props.commentCount||this.props.contextArgs.feedbackMode==='expanded'&&!m)return null;var n=isNaN(this.props.feedback.commentcountreduced)&&!m?this.props.feedback.commentcountreduced:c('NumberFormat').formatInteger(this.props.commentCount),o=c('ActorURI').create(c('XUFICommentTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return c('React').createElement('a',{'aria-live':'polite',className:"_ipm _-56",'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-uri':o,href:this.props.href,onClick:this.onCommentsClick,role:'button'},this.props.children,i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',n),i['enum'](this.props.commentCount===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]));};l.prototype.renderSeens=function(){'use strict';if(this.props.contextArgs.entstream||!this.props.feedback.seencount)return null;var m=this.props.feedback,n=m.seencount,o=void 0;if(m.seenbyall){o=i._("Seen by everyone");}else if(n===1){o=i._("Seen by 1");}else o=i._("Seen by {count}",[i.param('count',n)]);var p=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:m.entidentifier}),q=c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',m.entidentifier).getURI();q=c('ActorURI').create(q,m.actorforpost);return c('React').createElement('span',{ref:'seen_by_text'},c('React').createElement('a',{href:q,'data-hovercard':p.toString(),className:"_ipm _2x0l",onClick:this.onSeensClick},o));};l.prototype.renderShares=function(){'use strict';if(!this.props.feedback.sharecount)return null;var m=this.props.feedback.sharefbid||this.props.feedback.targetfbid,n=void 0;if(this.isCompactSearch()&&this.props.href!=null){n=this.props.href;}else n=c('ActorURI').create(new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:m}),this.props.feedback.actorforpost);var o=c('ActorURI').create(c('XUFIShareTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return c('React').createElement('a',{'aria-live':'polite',className:"_ipm _2x0m",'data-hover':'tooltip','data-tooltip-uri':o,href:n,onClick:this.onSharesClick,role:'button'},i._({"Share":"{count} Share","Shares":"{count} Shares"},[i.param('count',this.props.feedback.sharecountreduced),i['enum'](this.props.feedback.sharecount===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})]));};l.prototype.renderSaves=function(){'use strict';if(!this.props.contextArgs.saveCount||!this.props.contextArgs.saveCollectionId)return null;return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFIReactionsSaveDialog.react').__setRef('UFIReactionsBlingSocialSentence.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{saveCount:this.props.contextArgs.saveCountReduced,collectionId:this.props.contextArgs.saveCollectionId,buttonText:this.props.contextArgs.saveButtonTitle,storyId:this.props.contextArgs.saveStoryID,isSaveCountLink:this.props.contextArgs.isSaveCountLink})});};l.prototype.renderViews=function(){'use strict';var m=this.props.contextArgs.viewCount,n=null;if(this.canSeeConsolidatedTooltip())n=this.renderViewsTooltip();if(!m)return null;return c('React').createElement(c('Tooltip.react'),{tooltip:n,'data-hover':'tooltip','data-tooltip-alignh':'left','data-tooltip-position':'above','aria-live':'polite',className:"_ipm _2x0m",onClick:this.onViewsClick,onMouseOver:this.onViewsHover},i._({"View":"{count} View","Views":"{count} Views"},[i.param('count',this.props.contextArgs.viewCountReduced),i['enum'](m==='1'?'View':'Views',{View:'View',Views:'Views'})]));};l.prototype.canSeeConsolidatedTooltip=function(){'use strict';var m=this.props.contextArgs.postViewCount,n=this.props.contextArgs.totalPosts,o=this.props.contextArgs.otherPostsViewCount;return !!n&&n>1&&!!m&&!!o;};l.prototype.isCompactSearch=function(){'use strict';return this.props.contextArgs.source===c('FeedbackSourceType').COMPACT_SEARCH;};l.prototype.renderViewsTooltip=function(){'use strict';var m=this.props.contextArgs.totalPosts||0,n=this.props.contextArgs.postViewCount,o=this.props.contextArgs.otherPostsViewCount,p=Math.max(0,m-1);return c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{weight:'bold'},i._("Video Posted {number of posts} Times",[i.param('number of posts',m)])),c('React').createElement('br',null),i._({"view":"{post views} view from this post","views":"{post views} views from this post"},[i.param('post views',n),i['enum'](n==='1'?'view':'views',{view:'view',views:'views'})]),c('React').createElement('br',null),i._({"view":{"post":"{total views} view from {posts count} other post","posts":"{total views} view from {posts count} other posts"},"views":{"post":"{total views} views from {posts count} other post","posts":"{total views} views from {posts count} other posts"}},[i.param('total views',o),i['enum'](o==='1'?'view':'views',{view:'view',views:'views'}),i.param('posts count',p),i['enum'](p===1?'post':'posts',{post:'post',posts:'posts'})]));};l.prototype.renderPrivateReply=function(){'use strict';var m=this.props.feedback.messagereplycontext;if(!m||m.status!==c('PagesPrivateReplyConstants').Status.ALREADY_REPLIED)return null;return c('React').createElement('span',{className:"_ipm"},c('React').createElement(c('UFIPrivateReplyIndicator.react'),{replyStatus:m.status}));};l.prototype.render=function(){'use strict';var m={feedback:this.props.feedback,contextArgs:this.props.contextArgs,reactionsLink:null};if(this.props.overrideReactionsLink)m.reactionsLink=this.props.href;if(this.props.contextArgs.viewCount!=null&&(this.props.contextArgs.saveCount!=null||this.props.contextArgs.seenCount!=null)){return c('React').createElement('div',{className:"_ipn clearfix _-5d"},c('React').createElement('div',{className:"_ipo"},c('React').createElement('div',{className:"_36_q"},this.renderComments()),c('React').createElement('div',{className:"_36_q"},this.renderShares()),c('React').createElement('div',{className:"_34i1 _36_q"},c('React').createElement('div',{className:"_36_q"},this.renderSaves()),c('React').createElement('div',{className:"_36_q"},this.renderSeens()),c('React').createElement('div',{className:"_36_q"},this.renderViews()),c('React').createElement('div',{className:"_36_q"},this.renderPrivateReply()))),c('React').createElement(c('UFIReactionsSocialSentence.react'),m));}else return c('React').createElement('div',{className:"_ipn clearfix _-5d"},c('React').createElement('div',{className:"_ipo"},c('React').createElement('div',{className:"_36_q"},this.renderComments()),c('React').createElement('div',{className:"_36_q"},this.renderShares()),c('React').createElement('div',{className:"_36_q"},this.renderSaves()),c('React').createElement('div',{className:"_36_q"},this.renderSeens()),c('React').createElement('div',{className:"_36_q"},this.renderViews()),c('React').createElement('div',{className:"_36_q"},this.renderPrivateReply())),c('React').createElement(c('UFIReactionsSocialSentence.react'),m));};f.exports=l;}),null);
__d('UFIBling.react',['CommentPrelude','FeedbackSourceType','React','TrackingNodes','UFIBlingBox.react','UFIReactionsBlingSocialSentence.react','UFISharedDispatcher','UFIStoryAction','UFIToplevelPagedCommentList','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l);}j.prototype.render=function(){var k=this.props.contextArgs,l=this.props.feedbackTarget,m=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.BLINGBOX),n=l.permalink;if(k.showtheaterforcomment&&k.commentredirecturi){n=k.commentredirecturi;k=Object.freeze(babelHelpers['extends']({},k,{commentajaxify:k.commentredirecturi}));}var o=new (c('URI'))(n).addQueryData({comment_tracking:m}).toString(),p=c('UFIToplevelPagedCommentList').getCommentList(k.ftentidentifier,l.defaultcommentorderingmode).getDisplayedCommentCount(),q=(k.feedbackMode==='none'||k.feedbackMode==='toggle')&&k.hasReactions&&l.displayreactions,r=function(event){event.preventDefault();if(q&&k.feedbackMode==='expanded'){this.$UFIBling1();}else if(k.source===c('FeedbackSourceType').COMPACT_SEARCH){var v=k.commentredirecturi!=null?new (c('URI'))(k.commentredirecturi):new (c('URI'))(o);if(v!=null)v.go();}else{c('CommentPrelude').onBlingboxClick(event.currentTarget);if(!k.disableinlinetoggle)this.props.onCommentVisibilityChanged&&this.props.onCommentVisibilityChanged();}}.bind(this);if(q){return c('React').createElement(c('UFIReactionsBlingSocialSentence.react'),{commentCount:p,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,feedback:l,href:o,onCommentClick:r});}else{var s=void 0,t=void 0,u=void 0;if(k.hasReactions){s=l.reactioncount;t=l.reactioncountmap;u=l.reactioncountreduced;}return c('React').createElement(c('UFIBlingBox.react'),{comments:p,commentsreduced:l.commentcountreduced,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,likes:l.likecount,likesreduced:l.likecountreduced,nfb:l.nfbcount,onClick:r,permalink:o,reactionCount:s,reactionCountMap:t,reactionCountReduced:u,reshares:l.sharecount,resharesreduced:l.sharecountreduced,readOnly:k.readonly});}};j.prototype.$UFIBling1=function(){c('UFISharedDispatcher').dispatch(c('UFIStoryAction').showComments(this.props.contextArgs));};f.exports=j;}),null);
__d('UFICommentActionLink.react',['cx','fbt','React','UFICommentLink.react','UFISharedDispatcher','UFIStoryAction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.contextArgs,o=n.commentajaxify,p=n.commentredirecturi,q=n.showtheaterforcomment,r=n.loggedOutLinkConfig,s=this.props.contextArgs.isaskquestion?i._("Answer"):i._("Comment");if(!o&&r&&r.showCommentLink)o=r.commentAjaxifyURI;if(o){return c('React').createElement('span',{className:"_6a _15-3"},c('React').createElement(c('UFICommentLink.react'),{ajaxify:o,rel:q?'theater':'dialog'},s));}else if(p)return c('React').createElement('span',{className:"_6a _15-6"},c('React').createElement(c('UFICommentLink.react'),{href:p,rel:q?'theater':''},s));return c('React').createElement('span',{className:"_6a _15-7"},c('React').createElement(c('UFICommentLink.react'),{onClick:function(event){event.preventDefault();c('UFISharedDispatcher').dispatch(c('UFIStoryAction').showComments(this.props.contextArgs));}.bind(this)},s));};function m(){j.apply(this,arguments);}m.propTypes={contextArgs:l.object.isRequired};f.exports=m;}),null);
__d('UFILikeActionLink.react',['React','UFILikeLink.react','UFIReactionsLinkImpl.react','UFIReactionTypes','UFIStoryAction'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.onClick=function(event){event.preventDefault();var q=this.props.feedback.hasviewerliked;this.context.dispatch(c('UFIStoryAction').changeReaction(this.props.contextArgs,q?c('UFIReactionTypes').NONE:c('UFIReactionTypes').LIKE,event.target));}.bind(this),m;}k.prototype.render=function(){var l=this.props,m=l.contextArgs,n=l.feedback;if(!m.showLikeNuxForGroupMallAds&&m.hasReactions&&n.canviewerreact&&c('UFIReactionsLinkImpl.react')){return c('React').createElement(c('UFIReactionsLinkImpl.react'),{contextArgs:m,nuxConfig:m.reactionsNuxConfig,reaction:n.viewerreaction,suggestedReaction:n.suggestedreaction,supportedReactions:n.supportedreactions});}else{var o=m.loggedOutLinkConfig,p=null;if(o&&o.showLikeLink)p=o.likeAjaxifyURI;return c('React').createElement(c('UFILikeLink.react'),{ajaxify:p,likeAction:!n.hasviewerliked,onClick:this.onClick,rel:p?'dialog':null,forcelegacyrendering:m.forcelegacyrendering,showLikeNuxForGroupMallAds:m.showLikeNuxForGroupMallAds,likeNuxContent:m.groupMallAdsCommentNuxContent});}};k.contextTypes={dispatch:j.func};k.propTypes={feedback:j.object.isRequired,contextArgs:j.object.isRequired};f.exports=k;}),null);
__d('UFIShareActionLink.react',['ActorURI','Bootloader','React','UFIShareLink.react','UFIShareNowMenuBootloader.react','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={confirmed:false,openOnInitOverride:false},m;}k.prototype.render=function(){var l=this.state,m=l.confirmed,n=l.openOnInitOverride,o=this.props,p=o.shareURI,q=o.shareRel,r=o.shareNowMenuURI,s=o.feedbackReferrer,t=o.feedbackSource,u=o.feedbackTarget,v=o.misinformationConfirmDialogURI;if(v&&!m)return c('React').createElement(c('UFIShareLink.react'),{href:'#',onClick:function(){return this.$UFIShareActionLink1(v);}.bind(this)});var w={feedback_referrer:s,feedback_source:t},x=u&&u.actorforpost;if(x){p=p&&c('ActorURI').create(p,x);r=r&&new (c('URI'))(r).addQueryData('actor_id',x).toString();}return r?c('React').createElement(c('UFIShareNowMenuBootloader.react'),{endpoint:r,endpointData:w,openOnInitOverride:n}):c('React').createElement(c('UFIShareLink.react'),{href:new (c('URI'))(p).addQueryData(w),rel:q,openOnInit:n});};k.prototype.$UFIShareActionLink1=function(l){var m='MISINFORMATION_RESHARE_ALERT_FUNNEL';c('Bootloader').loadModules(["AsyncDialog","AsyncRequest","FunnelLogger"],function(n,o,p){p.startFunnel(m);n.send(new o(l),function(q){q.subscribe('confirm',function(){this.setState({confirmed:true,openOnInitOverride:true});p.appendAction(m,'continue');p.endFunnel(m);q.hide();}.bind(this));q.subscribe('cancel',function(){p.appendAction(m,'cancel');p.endFunnel(m);q.hide();});}.bind(this));}.bind(this),'UFIShareActionLink.react');};k.propTypes={feedbackTarget:j.object,shareURI:j.string,shareRel:j.string,shareNowMenuURI:j.string,shareLinkHref:j.string,feedbackReferrer:j.string,feedbackSource:j.number,misinformationConfirmDialogURI:j.string};f.exports=k;}),null);
__d('UFIActionLinks.react',['cx','fbt','BanzaiODS','BootloadedComponent.react','FBFeedLocations','FeedbackSourceType','JSResource','Parent','React','UFIBling.react','UFICommentActionLink.react','UFIConfig','UFIInstanceAction','UFILikeActionLink.react','UFIPrivateReplyLink.react','UFIShareActionLink.react','UFISharedDispatcher','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.componentDidMount=function(){var m=this.$UFIActionLinks1();c('BanzaiODS').bumpEntityKey('feedback',m);};l.prototype.renderActorSelector=function(){if(this.props.hideActorSelector)return null;var m=this.props.contextArgs,n=m.actorSelectorConfig,o=m.hasReactions;if(!n)return null;var p=n.module;return c('React').createElement('div',{className:"_40yk"+(o?' '+"_pbn":'')},c('React').createElement(p,babelHelpers['extends']({},n.props,{nuxHoverContext:c('Parent').byTag(this.refs.root,'form')})));};l.prototype.renderActionList=function(){var m=[this.renderLikeLink(),this.renderCommentLink(),this.renderShareLink(),this.renderPrivateReplyLink(),this.renderEmbedLink()].filter(function(n){return n;}).map(function(n,o){return c('React').createElement('span',{key:o},n);});if(m.length){return c('React').createElement('div',{className:"_42nr"},m);}else return null;};l.prototype.renderBling=function(){if(this.props.contextArgs.showBling)return c('React').createElement(c('UFIBling.react'),{contextArgs:this.props.contextArgs,feedbackTarget:this.props.feedbacktarget,onCommentVisibilityChanged:function(){return c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleComments(this.props.contextArgs));}.bind(this)});return null;};l.prototype.renderLikeLink=function(){var m=this.props,n=m.contextArgs,o=m.feedbacktarget,p=n.loggedOutLinkConfig;if(!o.hasviewerliked&&!o.viewercanlike&&!(p&&p.showLikeLink))return null;return c('React').createElement(c('UFILikeActionLink.react'),{feedback:o,contextArgs:n});};l.prototype.renderCommentLink=function(){var m=this.props.contextArgs.loggedOutLinkConfig;if(!this.props.feedbacktarget.cancomment&&!(m&&m.showCommentLink)){var n=this.props.contextArgs.disabledCommentTooltip;if(n)return c('React').createElement('span',null,c('React').createElement('span',{className:"_1ysv",'data-hover':'tooltip','data-tooltip-content':n},i._("Comment")));return null;}return c('React').createElement(c('UFICommentActionLink.react'),{contextArgs:this.props.contextArgs});};l.prototype.$UFIActionLinks1=function(){var m=this.props.contextArgs.shareLinkConfig;if(!m)return 'ufi-share-link.unavailable';var n=this.props.contextArgs.loggedOutLinkConfig;if(n&&n.showShareLink)return 'ufi-share-link.loggedout';return 'ufi-share-link.render';};l.prototype.renderShareLink=function(){var m=this.props.contextArgs.shareLinkConfig;if(!m)return null;var n=this.props.contextArgs.loggedOutLinkConfig;if(n&&n.showShareLink)m.shareURI=n.shareAjaxifyURI;return c('React').createElement(c('UFIShareActionLink.react'),babelHelpers['extends']({feedbackTarget:this.props.feedbacktarget,feedbackReferrer:this.props.contextArgs.feedbackReferrer,feedbackSource:this.props.contextArgs.source},m));};l.prototype.renderPrivateReplyLink=function(){var m=this.props,n=m.contextArgs,o=m.feedbacktarget,p=o.actorforpost,q=o.messagereplycontext;if(!c('UFIPrivateReplyLink.react').willRender(q,p))return null;if(!q)return null;return c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:p,activityID:n.ftentidentifier,context:q,seeResponseLabel:false});};l.prototype.renderEmbedLink=function(){var m=this.props.contextArgs.shareLinkConfig;if(!m||!m.embedURI)return null;return c('React').createElement('a',{href:m.embedURI,rel:'dialog',className:"_2g1w"},i._("Embed"));};l.prototype.renderSearchFeedback=function(){var m=this.props.contextArgs.inlineSearchFeedbackConfig;if(!m)return null;return c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('InlineFeedback.react').__setRef('UFIActionLinks.react')},m));};l.prototype.renderCommentOrderingModeSelector=function(){if(!this.props.showCommentOrderingModeSelector)return null;return c('React').createElement('div',{className:"_3csb"},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelectorContainer.react').__setRef('UFIActionLinks.react'),contextArgs:this.props.contextArgs,feedback:this.props.feedbacktarget}));};l.prototype.renderCrowdsourceLabelingContainer=function(){if(!c('UFIConfig').showUFICrowdsource)return null;return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFICrowdsourceLabelingContainer.react').__setRef('UFIActionLinks.react'),feedback:this.props.feedbacktarget,contextArgs:this.props.contextArgs});};l.prototype.renderLayout=function(m,n,o){n=n.map(function(p,q){return p&&c('React').createElement('div',{className:"_3m9g",key:q},p);}).filter(function(p){return p;});if(!m&&n.length===0)return null;return c('React').createElement('div',{className:c('joinClasses')("_3399",o)},n,c('React').createElement('div',{className:"_524d"},m));};l.prototype.shouldRenderActionButtons=function(){var m=null,n=this.props.contextArgs.source;if(this.props.contextArgs.feedcontext)try{m=JSON.parse(this.props.contextArgs.feedcontext).location_type;}catch(o){}if(m===c('FBFeedLocations').GOODWILL_THROWBACK_PERMALINK||m===c('FBFeedLocations').GOODWILL_THROWBACK_PROMOTION||m===c('FBFeedLocations').GOODWILL_THROWBACK_SHARE||m===c('FBFeedLocations').GROUP_SUGGESTIONS_WITH_STORY||n===c('FeedbackSourceType').LIVE_WWW_BROADCASTING||n===c('FeedbackSourceType').COMPACT_SEARCH)return false;return true;};l.prototype.hasCounts=function(){return !!(this.props.feedbacktarget.commentcountreduced||this.props.feedbacktarget.sharecountreduced||this.props.feedbacktarget.seencount||this.props.contextArgs.viewCount);};l.prototype.render=function(){var m=this.renderActorSelector(),n=this.renderSearchFeedback(),o=[],p=[],q=null,r=this.renderBling();if(r){p.push(m);if(this.hasCounts()){q=this.renderLayout(null,[n],"_1f6t");}else p.push(n);}else{o.push(m);o.push(n);}o.push(this.renderCommentOrderingModeSelector());var s="_1f6t"+(this.props.contextArgs.hasReactions?' '+"_4_dr":''),t=this.shouldRenderActionButtons()?this.renderLayout(this.renderActionList(),o,"_a7s clearfix _zw3"):null,u=this.renderCrowdsourceLabelingContainer();return c('React').createElement('div',{ref:'root'},q,this.renderLayout(r,p,s),t,u);};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('UFIActionHeader.react',['cx','BootloadedComponent.react','FeedbackSourceType','FluxContainer','JSResource','React','UFIActionLinks.react','UFICommercialBreakStore','UFIDispatcherContext.react','ifRequired'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={inCommercialBreak:false},m;}k.getStores=function(){return [c('UFICommercialBreakStore')];};k.calculateState=function(l,m){var n=m.contextArgs.instanceid;return {inCommercialBreak:c('UFICommercialBreakStore').getValueFor(n)};};k.prototype.$UFIActionHeader1=function(){if(!this.state.inCommercialBreak)return null;return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('CommercialBreakUFIOverlay.react').__setRef('UFIActionHeader.react'),bootloadPlaceholder:c('React').createElement('div',null),contextArgs:this.props.contextArgs});};k.prototype.$UFIActionHeader2=function(){var l=this.props.contextArgs.source,m=l===c('FeedbackSourceType').COMPACT_SEARCH,n=c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.props.dispatcher,stores:this.props.stores},c('React').createElement(c('UFIActionLinks.react'),{contextArgs:this.props.contextArgs,feedbacktarget:this.props.feedbacktarget,hideActorSelector:m,showCommentOrderingModeSelector:this.props.showCommentOrderingModeSelector}));if(!this.state.inCommercialBreak)return n;var o=c('ifRequired')('UFIVideoPlayerRegistry',function(s){return s.getAvailableVideoPlayerController(this.props.contextArgs.instanceid);}.bind(this)),p=o&&o.getOption('VideoWithInstreamVideo','controller'),q=p&&p.getConfig(),r=q&&q.vodTransitionVersion!==0;if(!r)return null;return c('React').createElement('div',{className:"_4hqd"},n);};k.prototype.render=function(){return c('React').createElement('div',null,this.$UFIActionHeader1(),this.$UFIActionHeader2());};f.exports=c('FluxContainer').create(k,{withProps:true,pure:false});}),null);
__d('UFICallbackStore',['FluxStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;j.prototype.__onDispatch=function(k){var l=k.type,m=babelHelpers.objectWithoutProperties(k,['type']);this.__emitter.emit(l,m);};j.prototype.on=function(k,l){return this.__emitter.addListener(k,l);};j.prototype.remove=function(){this.__emitter.removeAllListeners();};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d("CommentLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1435334373168219",queryID:"1723155404680538"});}),null);
__d('UFICommentLikeSubscription',['BaseGraphQLSubscription','CommentLikeWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/comment_like_subscribe/top_level_feedback_id_'+j;},_getQueryID:function i(){return c('CommentLikeWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),top_level_feedback_id:j})};},_getSubscriptionCallName:function i(){return 'comment_like_subscribe';}});f.exports=h;}),null);
__d("CommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1517290555009198",queryID:"307614769689494"});}),null);
__d('UFICommentSubscription',['BaseGraphQLSubscription','CommentCreateWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/comment_create_subscribe/top_level_feedback_id_'+j;},_getQueryID:function i(){return c('CommentCreateWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),top_level_feedback_id:j})};},_getSubscriptionCallName:function i(){return 'comment_create_subscribe';}});f.exports=h;}),null);
__d('UFIFeaturedReplyCommentListImpl',['UFIReplyCommentListImpl','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIReplyCommentListImpl'));i=h&&h.prototype;function j(k,l,m,n){i.constructor.call(this,k,l,c('WebCommentViewOption').FEATURED);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){if(r.id)q[r.id]=r;});m.forEach(function(r){this.addOrUpdateComment(q[r]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};f.exports=j;}),null);
__d('UFIFeaturedToplevelCommentListImpl',['UFIToplevelPagedCommentListImpl','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIToplevelPagedCommentListImpl'));i=h&&h.prototype;function j(k,l,m){i.constructor.call(this,k,c('WebCommentViewOption').FEATURED);var n=0,o=l.length;this.updateCommentCount(o);this.addCommentIDs(n,o,l);var p={};m.forEach(function(q){if(q.id)p[q.id]=q;});l.forEach(function(q){this.addOrUpdateComment(p[q]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};f.exports=j;}),null);
__d('UFIFeedbackFilters',[],(function a(b,c,d,e,f,g){'use strict';var h={getRequestedIDs:function i(j){var k=[];if(j.reactorids)k=k.concat(j.reactorids);if(j.actorforpost)k=k.concat(j.actorforpost);return k;}};f.exports=h;}),null);
__d('UFIFetcher',['Promise','ShortProfiles'],(function a(b,c,d,e,f,g){'use strict';var h={fetchShortProfiles:function i(j){return new (c('Promise'))(function(k,l){return c('ShortProfiles').getMulti(j,k);});},fetchComments:function i(j,k,l){return new (c('Promise'))(function(m,n){return j.getComments(k.getOffset(),k.getLength(),l,m);}).then(function(m){return Object.values(m);});},fetchCommentsOrThrow:function i(j,k,l){return Object.values(j.getCommentsOrThrow(k,l));}};f.exports=h;}),null);
__d("FeedbackLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1304193676334207",queryID:"264366153976871"});}),null);
__d('UFILikeSubscription',['BaseGraphQLSubscription','FeedbackLikeWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/feedback_like_subscribe/feedback_id_'+j;},_getQueryID:function i(){return c('FeedbackLikeWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:j})};},_getSubscriptionCallName:function i(){return 'feedback_like_subscribe';}});f.exports=h;}),null);
__d("UFILiveTipJarSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1392307484123243",queryID:"1851557885085599"});}),null);
__d('UFILiveTipJarSubscription',['BaseGraphQLSubscription','UFILiveTipJarSubscriptionWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/tip_jar_tip_event_subscribe/video_id_'+j;},_getQueryID:function i(){return c('UFILiveTipJarSubscriptionWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {data:JSON.stringify({client_subscription_id:c('uuid')(),video_id:j})};},_getSubscriptionCallName:function i(){return 'tip_jar_tip_event_subscribe';}});f.exports=h;}),null);
__d("PageCommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1560931800615657",queryID:"1448367798803682"});}),null);
__d('UFIPageCommentSubscription',['BaseGraphQLSubscription','PageCommentCreateWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/page_comment_create_subscribe/top_level_feedback_id_'+j;},_getQueryID:function i(){return c('PageCommentCreateWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),top_level_feedback_id:j})};},_getSubscriptionCallName:function i(){return 'page_comment_create_subscribe';}});f.exports=h;}),null);
__d('UFIRetryActions',['JSLogger','UFICentralUpdates','UFIConstants','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h=c('JSLogger').create('UFIRetryActions');function i(l,m){var n={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:l.id};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[n]});var o=l.body.text,p=l.body.mentionstext;c('UFIUserActions').addComment(l.ftentidentifier,o,p,{source:m,replyid:l.parentcommentid,attachedphoto:l.body.mentionsphoto,attachedvideo:l.body.mentionsvideo});}function j(l,m){var n=l.body.text,o=l.body.mentionstext;c('UFIUserActions').editComment(l.id,n,o,{source:m,attachedPhoto:l.body.mentionsphoto,attachedSticker:l.attachment,attachedVideo:l.body.mentionsvideo});}var k={retrySubmit:function l(m,n){switch(m.status){case c('UFIConstants').UFIStatus.FAILED_ADD:i(m,n);break;case c('UFIConstants').UFIStatus.FAILED_EDIT:j(m,n);break;default:h.error('retrysubmitstatus',{status:m.status});break;}}};f.exports=k;}),null);
__d('FacecastStreamingCommentDelayTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:FacecastStreamingCommentDelayLoggerConfig',this.$FacecastStreamingCommentDelayTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:FacecastStreamingCommentDelayLoggerConfig',this.$FacecastStreamingCommentDelayTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$FacecastStreamingCommentDelayTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$FacecastStreamingCommentDelayTypedLogger1=babelHelpers['extends']({},this.$FacecastStreamingCommentDelayTypedLogger1,j);return this;};h.prototype.setCommentID=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.comment_id=j;return this;};h.prototype.setEvent=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.event=j;return this;};h.prototype.setProtocol=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.protocol=j;return this;};h.prototype.setVC=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.vc=j;return this;};var i={comment_id:true,event:true,protocol:true,vc:true};f.exports=h;}),null);
__d('UFISubscriptionUpdates',['fbt','BanzaiODS','FacecastStreamingCommentDelayTypedLogger','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIComments','UFIConfig','UFIConstants','UFIReactionsUtils','UFISharedDispatcher','UFIStoryAction','UFIStreamingStateType','requireWeak'],(function a(b,c,d,e,f,g,h){'use strict';c('BanzaiODS').setEntitySample('feedback',.0001);function i(k,l,m){new (c('LiveWWWFeedbackTypedLogger'))().setMechanism('graphql_subscriptions').setEvent('receive_payload').setUpdateType(k).setTimeSinceSub(l).updateData(m?m:{}).log();}var j={handleLiveLike:function k(l,m,n){c('BanzaiODS').bumpEntityKey('feedback','gql_like_received');i('like',n);if(!m||!m.feedback_like_subscribe)return;var o=m.feedback_like_subscribe.feedback,p=m.feedback_like_subscribe.liker;if(!o||!p)return;var q=[{actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:p.id,clientid:m.feedback_like_subscribe.client_mutation_id,entidentifier:l,likesentences:{current:o.does_viewer_like?o.viewer_likes_sentence:o.viewer_does_not_like_sentence,alternate:o.does_viewer_like?o.viewer_does_not_like_sentence:o.viewer_likes_sentence},hasviewerliked:o.does_viewer_like,likecount:o.likers.count}],r=o.reactions_summary;if(r){var s=c('UFIReactionsUtils').getReactionCountMapFromSummary(o.reactions_summary),t=o.viewer_feedback_reaction_info?o.viewer_feedback_reaction_info.key:0,u=o.reaction_count_reduced?o.reaction_count_reduced:o.reactors.count;q.push({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:p.id,clientid:m.feedback_like_subscribe.client_mutation_id,entidentifier:l,viewerreaction:t,reactioncount:o.reactors.count,reactioncountreduced:u,reactioncountmap:s,reactionsentences:{current:t?o.viewer_likes_reaction_sentence:o.viewer_does_not_like_reaction_sentence,alternate:t?o.viewer_does_not_like_reaction_sentence:o.viewer_likes_reaction_sentence}});}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:q});},handleLiveComment:function k(l,m,n){c('BanzaiODS').bumpEntityKey('feedback','gql_comment_received');var o=m&&m.comment;if(!o)return;i('comment',n,{comment_id:o.legacy_token});var p=this.prepareCommentData(l,o,n,m.client_mutation_id);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{comments:[p]});},handleLiveStreamingComment:function k(l,m,n){c('BanzaiODS').bumpEntityKey('feedback','gql_streaming_comment_received');var o=m&&m.comment;if(!o)return;i('comment',n,{comment_id:o.legacy_token});if(c('UFIConfig').shouldLogFacecastStreamingCommentDelay)new (c('FacecastStreamingCommentDelayTypedLogger'))().setCommentID(o.legacy_fbid).setEvent('push').log();var p=this.prepareCommentData(l,o,n,m.client_mutation_id);c('requireWeak')('UFILiveStreamingComments',function(q){q.enqueueSubscribedComment(l,{comments:[p],streamingstate:c('UFIStreamingStateType').LIVE,priority:o.live_streaming_comment_priority},m.feedback.top_level_comments.total_count);});},prepareCommentData:function k(l,m,n,o){var p={__typename:'saved',author:m.author.id,body:m.body,cancomment:m.feedback.can_viewer_comment,canedit:m.can_viewer_edit,canremove:m.can_viewer_delete,canshare:m.can_viewer_share,commentshareuri:m.www_share_uri_raw,clientid:o,ftentidentifier:l,id:m.legacy_token,fbid:m.legacy_fbid,legacyid:m.legacy_fbid,timestamp:{time:m.created_time,text:h._("a few seconds ago")},hasviewerliked:m.feedback.does_viewer_like,isauthornoncoworker:m.is_author_non_coworker,isfeatured:m.is_featured,istranslatable:m.translation_available_for_viewer,likecount:m.feedback.likers.count,viewercanlike:m.feedback.can_viewer_like,parentcommentid:m.comment_parent&&m.comment_parent.legacy_token,spamreplycount:0};if(m.attachments.length){var q=m.attachments[0],r=q.style_list;if(r&&r.length&&r[0]=='sticker'){var s=q.target;p.attachment={fbid:s.id,metadata:{source_uri:s.img.uri,source_uri_2x:s.img_2x.uri,width:s.img.width,height:s.img.height,frameCount:s.frame_count,frameRate:s.frame_rate,framesPerCol:s.frames_per_column,framesPerRow:s.frames_per_row,sprite_uri:s.sprite_img&&s.sprite_img.uri,sprite_uri_2x:s.sprite_img_2x&&s.sprite_img_2x.uri},type:'sticker'};}else if(r&&r.length&&r[0]=='photo'){var t=q.target;p.attachment={fbid:t.id,metadata:{preview_uri:t.photo_img&&t.photo_img.uri,width:t.photo_img.width,height:t.photo_img.height,url:t.url},type:'photo'};}else if(r&&r.length&&(r[0]=='share'||r[0]=='image_share')){q.type='live_share';p.attachment=q;}else if(r&&r.length&&(r[0]=='animated_image_share'||r[0]=='animated_image_autoplay'||r[0]=='animated_image_video'||r[0]=='animated_image_video_autoplay')){q.type='gif';p.attachment=q;}else if(r&&r.length&&r[0]=='video_inline'){q.type='video';p.attachment=q;}else if(r&&r.length&&r[0]=='comment_place_info'){q.type='live_comment_place_info';p.attachment=q;}}var u=m.feedback;if(u.reactions_summary){p.canviewerreact=u.can_viewer_react;p.reactioncount=u.reactors.count;p.reactioncountmap=c('UFIReactionsUtils').getReactionCountMapFromSummary(u.reactions_summary);p.reactioncountreduced=u.reaction_count_reduced?u.reaction_count_reduced:u.reactors.count;p.viewerreaction=u.viewer_feedback_reaction_info?u.viewer_feedback_reaction_info.key:0;}return p;},handleLivePinnedComment:function k(l,m,n){var o=m.pinned_comment_event_create_subscribe.pinned_comment_event.pinned_comment;if(o){var p=j.prepareCommentData(l.ftentidentifier,o,n,m.client_mutation_id);c('UFIComments').setComment(p.id,new (c('ImmutableObject'))(p));c('UFISharedDispatcher').dispatch(c('UFIStoryAction').pinComment(l,p.id));}else c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(l));},handleLiveCommentLike:function k(l,m,n){i('comment_like',n);var o=m&&m.comment_like_subscribe&&m.comment_like_subscribe.feedback;if(!o)return;var p=null;if(o.reactions_summary)p={reactioncount:o.reactors.count,reactioncountmap:c('UFIReactionsUtils').getReactionCountMapFromSummary(o.reactions_summary),reactioncountreduced:o.reaction_count_reduced?o.reaction_count_reduced:o.reactors.count,viewerreaction:o.viewer_feedback_reaction_info?o.viewer_feedback_reaction_info.key:0};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,clientid:m.comment_like_subscribe.client_mutation_id,commentid:o.legacy_comment_token,likecount:o.likers&&o.likers.count,reactiondata:p,viewerliked:o.does_viewer_like}]});}};f.exports=j;}),null);
__d("FeedbackTypingWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1237650813017179",queryID:"1235619139887368"});}),null);
__d('UFITypingSubscription',['BaseGraphQLSubscription','FeedbackTypingWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/feedback_typing_subscribe/feedback_id_'+j;},_getQueryID:function i(){return c('FeedbackTypingWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:j})};},_getSubscriptionCallName:function i(){return 'feedback_typing_subscribe';}});f.exports=h;}),null);
__d('UFITypingSubscriptionController',['UFITypingSubscription','getByPath','setTimeout'],(function a(b,c,d,e,f,g){'use strict';var h=15*1000;function i(l){var m=c('getByPath')(l,['feedback_typing_subscribe','feedback','feedback_typers','friend_count']),n=c('getByPath')(l,['feedback_typing_subscribe','feedback','feedback_typers','other_count']);return {friendCount:parseInt(m,10)||0,otherCount:parseInt(n,10)||0};}function j(l){return l.friendCount===0&&l.otherCount===0;}function k(l,m){this.$UFITypingSubscriptionController1=null;this.$UFITypingSubscriptionController2=m;this.$UFITypingSubscriptionController3=c('UFITypingSubscription').subscribe(l,this.$UFITypingSubscriptionController4.bind(this));}k.prototype.unsubscribe=function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController3&&this.$UFITypingSubscriptionController3.unsubscribe();};k.prototype.$UFITypingSubscriptionController4=function(l){this.$UFITypingSubscriptionController5();var m=i(l);this.$UFITypingSubscriptionController2(m);if(!j(m))this.$UFITypingSubscriptionController1=c('setTimeout')(function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController2({friendCount:0,otherCount:0});}.bind(this),h);};k.prototype.$UFITypingSubscriptionController5=function(){if(this.$UFITypingSubscriptionController1){clearTimeout(this.$UFITypingSubscriptionController1);this.$UFITypingSubscriptionController1=null;}};f.exports=k;}),null);
__d('UFITypingSubscriptionControllerFactory',['UFIConfig','UFISharedDispatcher','UFIStoryAction','UFITypingSubscriptionController','debounce'],(function a(b,c,d,e,f,g){'use strict';var h=500,i={forUFIController:function j(k,l){var m=c('debounce')(function(n){var o=c('UFIConfig').typingIndicator.fromEveryone,p=void 0;if(n.friendCount){p=c('UFIStoryAction').friendTyping(l);}else if(n.otherCount&&o){p=c('UFIStoryAction').someoneTyping(l);}else p=c('UFIStoryAction').typingStopped(l);c('UFISharedDispatcher').dispatch(p);},h);return new (c('UFITypingSubscriptionController'))(k.targetfbid,m);}};f.exports=i;}),null);
__d("XVODStreamingCommentsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/vodcomments\/",{eft_id:{type:"String",required:true},target_ufi_instance_id:{type:"String",required:true},start_time:{type:"Float",required:true},end_time:{type:"Float",required:true},should_backfill:{type:"Bool",defaultValue:false}});}),null);
__d('UFIVODStreamingComments',['AsyncRequest','BanzaiODS','Map','SubscriptionsHandler','UFICentralUpdates','UFIConstants','UFIInstanceAction','UFILivePinnedCommentStore','UFISharedDispatcher','UFIStoryAction','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','WebCommentViewOption','XVODStreamingCommentsAsyncController','setInterval'],(function a(b,c,d,e,f,g){'use strict';c('BanzaiODS').setEntitySample('feedback',.0001);function h(j,k){this.ufiController=j;this.videoPlayerController=k;this.queue=[];this.queueEndTime=0;this.currentRequest=null;this.subscriptions=new (c('SubscriptionsHandler'))();this.commentsAutoplayState=this.ufiController.shouldAutoplayLiveVODComments()?'MayPlay':'MayNotPlay';this.pinQueue=[];this.resetToTime(k.getCurrentTimePosition());var l=this.ufiController.getFtEntIdentifier(),m=this.ufiController.getInstanceID(),n=c('UFIToplevelPagedCommentList').getPagedCommentCountForFeedbackTargetID(l);if(typeof n==='number')c('UFIToplevelStreamedCommentList').getCommentList(l,m).updateCommentCount(n);this.subscriptions.addSubscriptions(k.addListener('seekEnd',function(o){if(this.commentsAutoplayState==='MayNotPlay')this.commentsAutoplayState='MayPlay';this.resetToTime(o.position);}.bind(this)),k.addListener('unmute',function(o){if(this.commentsAutoplayState==='MayNotPlay')this.commentsAutoplayState='MayPlay';this.$UFIVODCommentStream1();}.bind(this)),k.addListener('updateStatus',function(o,p){var q=null;while(this.pinQueue.length){if(this.pinQueue[0].timeoffset>o.position)break;q=this.pinQueue.shift();}if(q)this.$UFIVODCommentStream2(q);}.bind(this)));c('setInterval')(this.renderNextComment.bind(this),2000);c('BanzaiODS').bumpEntityKey('vod_comments','www_load');}h.prototype.renderNextComment=function(){if(!this.videoPlayerController.isState('playing'))return;var j=this.videoPlayerController.getCurrentTimePosition();this.onTimeUpdated(j);while(this.queue.length&&this.queue[0].timeoffset<j){var k=this.queue.shift();if(k.timeoffset<j-5)continue;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,k.ufipayload);c('BanzaiODS').bumpEntityKey('feedback','facecast_vod_comment_rendered');break;}this.$UFIVODCommentStream1();};h.prototype.fetchNewCommments=function(j,k,l,m){var n=j+60,o=c('XVODStreamingCommentsAsyncController').getURIBuilder().setString('eft_id',this.ufiController.getFtEntIdentifier()).setString('target_ufi_instance_id',this.ufiController.getInstanceID()).setFloat('start_time',j).setFloat('end_time',n).setBool('should_backfill',k).getURI();if(this.currentRequest)this.currentRequest.abandon();this.currentRequest=new (c('AsyncRequest'))().setURI(o).setHandler(function(p){var q=p.getPayload();if(q.status==='error')return;if(q.backfillpayload)c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,q.backfillpayload);l(q.ufipayloads);m(q.pinnedcommentpayloads,q.backfillpinnedcommentpayload);this.queueEndTime=n;}.bind(this)).setFinallyHandler(function(){if(k)c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').didReceiveVODComments(this.ufiController.getContextArgs()));this.currentRequest=null;}.bind(this));this.currentRequest.send();if(k)c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').didRequestVODComments(this.ufiController.getContextArgs()));};h.prototype.onTimeUpdated=function(j){if(j<this.queueEndTime-15||this.currentRequest!==null)return;this.fetchNewCommments(this.queueEndTime,false,function(k){this.queue=this.queue.concat(k);}.bind(this),function(k,l){this.pinQueue=this.pinQueue.concat(k);}.bind(this));};h.prototype.resetToTime=function(j){var k=this.ufiController.getFtEntIdentifier();c('UFIToplevelStreamedCommentList').resetCommentList(k,this.ufiController.getInstanceID());c('UFICentralUpdates').didUpdateFeedback(k);this.fetchNewCommments(j,true,function(l){this.queue=l;}.bind(this),function(l,m){this.pinQueue=l;this.$UFIVODCommentStream2(m);}.bind(this));};h.prototype.stop=function(){this.subscriptions.release();};h.prototype.$UFIVODCommentStream1=function(){var j=c('UFIToplevelStreamedCommentList').getExistingCommentList(this.ufiController.getFtEntIdentifier(),this.ufiController.getInstanceID());if(!j||j.getActualCommentCount()<5||this.commentsAutoplayState!=='MayPlay'||!this.videoPlayerController.isState('playing'))return;c('BanzaiODS').bumpEntityKey('vod_comments','www_autoplay');this.commentsAutoplayState='Played';c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeOrderingMode(this.ufiController.getContextArgs(),c('WebCommentViewOption').LIVE_STREAMING));this.ufiController.scrollToTopOfCommentsInViewer();};h.prototype.$UFIVODCommentStream2=function(j){var k=this.ufiController.getContextArgs(),l=c('UFILivePinnedCommentStore').getPinnedCommentID(k.ftentidentifier),m=j.ufipayload;if(!m){if(l!==null)c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(k,j.pineventid));return;}var n=m.pinnedcomments[0].id;if(n===l)return;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,m);c('UFISharedDispatcher').dispatch(c('UFIStoryAction').pinComment(k,n,j.pineventid));};var i=new (c('Map'))();f.exports={start:function j(k,l){var m=k.getInstanceID();if(i.get(m))return;i.set(m,new h(k,l));},stop:function j(k,l){var m=i.get(l);if(!m)return;m.stop();i['delete'](l);}};}),null);
__d("XCommentEmbedPluginEmbedAsyncDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/comment-embed\/async\/embed\/dialog\/",{comment_id:{type:"String",required:true},width:{type:"Int"},__asyncDialog:{type:"Int"}});}),null);
__d('UFIController',['csx','invariant','Promise','Arbiter','AsyncRequest','BootloadedComponent.react','Bootloader','CommentPrelude','DOM','DOMContainer.react','DOMQuery','ErrorUtils','FeedbackPayloadSourceType','JSResource','LivePinnedCommentEventCreateSubscription','LiveTimer','React','ReactDOM','Run','ShortProfiles','StaticUFI.react','SubscriptionsHandler','TranslationTrigger','UFIActionHeader.react','UFIActionLinks.react','UFIAddCommentActionType','UFIAsyncWrapper','UFICallbackStore','UFICentralUpdates','UFICommentActionType','UFICommentFilters','UFICommentLikeSubscription','UFICommentLogger','UFIComments','UFICommentSubscription','UFICommentUtils','UFICommentVisibilityStore','UFICommercialBreakAdapter','UFIConfig','UFIConstants','UFIDispatcher','UFIDispatcherContext.react','UFIDomRootAdapter','UFIFeaturedReplyCommentListImpl','UFIFeaturedToplevelCommentListImpl','UFIFeedbackFilters','UFIFeedbackMode','UFIFeedbackStore','UFIFeedbackTargets','UFIFetcher','UFIInstanceAction','UFIInstanceActionType','UFILikeSubscription','UFILivePinnedCommentStore','UFILiveTipJarSubscription','UFINewCommentNotifier','UFIOrderingModeStore','UFIPageCommentSubscription','UFIPaging','UFIRange','UFIReactionStore','UFIReplyCommentList','UFIRetryActions','UFIRootRegistry','UFISharedDispatcher','UFIStoryAction','UFIStoryActionType','UFISubscriptionUpdates','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFITypingSubscriptionControllerFactory','UFIUIEvents','UFIUserActions','UFIVideoPlayerRegistry','UFIVisibility','UFIVODStreamingComments','URI','XCommentEmbedPluginEmbedAsyncDialogController','createArrayFromMixed','ex','flattenArray','forEachObject','isEmpty','onEnclosingPageletDestroy','requireWeak'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c('UFIConfig').prefetchTextDelightAnimation)c('Bootloader').loadModules(["TextDelightAnimation"],function(n){n.setupCommentAnimation(c('UFIConfig').prefetchTextDelightAnimation);},'UFIController');var j={NEWSSTAND:'newsstand'},k=function n(o,p,q,r){var s=o.getRequestedOffset(),t=o.getRequestedLength(),u=s+t===p,v=u&&l(r)?q-s:t;return new (c('UFIRange'))(s,v);},l=function n(o){return o==c('FeedbackPayloadSourceType').USER_ACTION||o==c('FeedbackPayloadSourceType').LIVE_SEND||o==c('FeedbackPayloadSourceType').STREAMING;};m.factory=function(n,o,p){if(o.flushEventQueueBeforeRender){if(c('UFIConfig').flushEventQueueBeforeRenderUseIdleCallback&&window.requestIdleCallback){window.requestIdleCallback(function(){return m.$UFIController13(n,o,p);});}else setTimeout(function(){return m.$UFIController13(n,o,p);},c('UFIConfig').flushEventQueueBeforeRenderTimeout);}else m.$UFIController13(n,o,p);};m.$UFIController13=function(n,o,p){o.rootid=n.id;return new m(n,Object.freeze(o),p);};m.prototype.getRootNode=function(){return this.root;};m.prototype.getContextArgs=function(){return this.$UFIController2;};m.prototype.getFtEntIdentifier=function(){return this.$UFIController2.ftentidentifier;};m.prototype.getInstanceID=function(){return this.$UFIController2.instanceid;};m.prototype.getFluentContentToken=function(){return this.$UFIController2.fluentContentToken;};m.prototype.shouldAutoplayLiveVODComments=function(){return !!this.$UFIController2.autoplayLiveVODComments;};function m(n,o,p){var q,r;this.$UFIController6=false;this.$UFIController14();this.$UFIController15();this.root=n;this.$UFIController2=o;this.$UFIController7=null;c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').init(o,p));c('UFIRootRegistry').registerController(o.rootid,o.instanceid,o.ftentidentifier,function(){this.$UFIController16();}.bind(this));this.$UFIController4=new (c('UFIDomRootAdapter'))(this.root,this.$UFIController2);if(c('UFIConfig').feedfocusWrapperModule&&o.location==j.NEWSSTAND){var s=c('UFIConfig').feedfocusWrapperModule,t=c('DOMQuery').scry(this.root,"^._5pat"),u=t[0];if(u)(function(){var ea=c('createArrayFromMixed')(u.children),fa=document.createDocumentFragment();ea.forEach(function(ga){fa.appendChild(ga);});c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,c('React').createElement(s,{instanceID:o.instanceid},c('React').createElement(c('DOMContainer.react'),null,fa))),u);})();}var v=o.feedbackMode===c('UFIFeedbackMode').NEVER||o.feedbackMode===c('UFIFeedbackMode').NONE;this.$UFIController10={payloadSource:null,feedback:null,oldRange:{offset:0,length:0},commentIDToFocusOnMount:null,showLoadingUFI:false,isActiveLoading:{},allSeenActiveLoadDirectionData:{},requestedInitialComments:false,isHidden:v,commentPermalinks:{},deletedCounts:{},canAddCommentMap:{},canReplyMap:{},defaultRepliesExpandedMap:{},repliesExpandedMap:{},hasPagedToplevel:false,focusTopLevelComposer:false,featuredCommentLists:{},featuredCommentIDs:[],translateAllCommentID:null,toplevelPagerClickCounts:{},replyPagerClickCounts:{},loadingVODComments:false,shouldTranslateAllVisibleComments:false,commentsLoadingTranslations:{}};this.authorProfiles={};this.commentcounts={};this.comments=[];this.repliesMap={};var w=p.feedbacktarget?p.feedbacktarget:p.feedbacktargets&&p.feedbacktargets[0];if(!this.canRenderHeader())c('Bootloader').loadModules(["UFIActionLinkController"],function(ea){return new ea(n,o,w);},'UFIController');if(w)this.$UFIController17(w,o);var x=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid),y=null;if(p.featuredcommentlists&&p.featuredcommentlists.comments&&p.featuredcommentlists.comments[o.ftentidentifier]){y=p.featuredcommentlists.comments[o.ftentidentifier];this.$UFIController10.featuredCommentLists[o.ftentidentifier]=new (c('UFIFeaturedToplevelCommentListImpl'))(o.ftentidentifier,y.values,p.comments);}else{var z=p.commentlists&&p.commentlists.comments,aa=z[o.ftentidentifier];y=aa[x];}if(p.featuredcommentids)this.$UFIController10.featuredCommentIDs=p.featuredcommentids;this.ranges={};this.replyRanges={};this.commentcounts={};this.ranges[x]=new (c('UFIRange'))(y.range.offset,y.range.length);this.$UFIController10.oldRange={offset:y.range.offset,length:this.comments&&this.comments.length||0};var ba=void 0,ca=void 0,da=void 0;if(p.commentlists.replies)for(ba=0;ba<y.values.length;ba++){ca=y.values[ba];da=p.commentlists.replies[ca];if(da){this.commentcounts[ca]=this.getReplyCommentList(ca).getCommentCount();this.replaceReplyRange(ca,new (c('UFIRange'))(da.range.offset,da.range.length));}}if(p.featuredcommentlists)if(p.featuredcommentlists.replies)for(ba=0;ba<y.values.length;ba++){ca=y.values[ba];da=p.featuredcommentlists.replies[ca];if(da){this.$UFIController10.featuredCommentLists[ca]=new (c('UFIFeaturedReplyCommentListImpl'))(o.ftentidentifier,ca,da.values,p.comments);this.commentcounts[ca]=this.getReplyCommentList(ca).getCommentCount();this.replaceReplyRange(ca,c('UFIRange').combine(new (c('UFIRange'))(da.range.offset,da.range.length),this.replyRanges[ca]));}}this.$UFIController8=null;this.ufiCentralUpdatesSubscriptions=[c('UFICentralUpdates').subscribe('feedback-updated',function(ea,fa){var ga=fa.updates;if(o.ftentidentifier in ga){this.$UFIController10.payloadSource=fa.payloadSource;this.fetchAndUpdate(this.$UFIController10.payloadSource);}}.bind(this))];this.$UFIController18(o);this.onUnloadSubscription=c('Run').onUnload(function(){return this.$UFIController19();}.bind(this));this.getToplevelCommentList();c('UFICentralUpdates').handleUpdate(c('FeedbackPayloadSourceType').INITIAL_SERVER,p);if(o.islivestreaming&&o.fluentContentToken)(function(){var ea=Date.now();c('LivePinnedCommentEventCreateSubscription').subscribe(o.fluentContentToken,function(fa){c('UFISubscriptionUpdates').handleLivePinnedComment(o,fa,Date.now()-ea);});})();if(o.islivestreaming)c('requireWeak')('UFILiveStreamingComments',function(ea){var fa=null;if(p.comments&&p.comments.length>0)fa=p.comments[p.comments.length-1].fbid;ea.start(o.ftentidentifier,w.commentcount,fa,o.showLiveVideoAnnoucements,o.showLiveVideoBroadcastingJoinEvents,o.isViewerTheOwner,o.isLiveAudio,o.subscribeToSomeNotification);c('Run').onLeave(function(){return ea.stop(o.ftentidentifier);});});if(o.mayAutoscrollToComments)this.scrollToTopOfCommentsInViewer();if(!o.lazyFetch&&!this.canRenderHeader())this.$UFIController20(w);if(this.$UFIController2.fluentContentToken)c('UFIVideoPlayerRegistry').registerUFIController(this,function(ea){if(o.enableVODStreamingComments&&!this.$UFIController10.featuredCommentLists[o.ftentidentifier])c('UFIVODStreamingComments').start(this,ea);c('UFICommercialBreakAdapter').start(o,ea);if(o.islivestreaming)this.$UFIController12.addSubscriptions(ea.addListener('stateChange',function(){if(ea.isState('playing'))this.render();}.bind(this)));}.bind(this),function(){if(o.enableVODStreamingComments)c('UFIVODStreamingComments').stop(this.$UFIController2.ftentidentifier,o.instanceid);c('UFICommercialBreakAdapter').stop(o.instanceid);}.bind(this));}m.prototype.$UFIController18=function(n){this.$UFIController1=new (c('SubscriptionsHandler'))();this.$UFIController1.addSubscriptions(c('onEnclosingPageletDestroy')(this.root,function(){this.$UFIController16();}.bind(this)),c('Arbiter').subscribe(c('UFIUIEvents').PageCleared,function(){this.$UFIController16();}.bind(this)),c('Arbiter').subscribe('ConversationNub/destroy',function(o,p){if(p.root&&c('DOMQuery').contains(p.root,this.root))this.$UFIController16();}.bind(this)),c('Arbiter').subscribe('WorkHub/destroy',function(o,p){if(p.root&&c('DOMQuery').contains(p.root,this.root))this.$UFIController16();}.bind(this)));if(n.viewas)this.$UFIController1.addSubscriptions(c('Arbiter').subscribe('pre_page_transition',function(o,p){if(n.viewas!==new (c('URI'))(p.to).getQueryData('viewas')){c('UFIToplevelPagedCommentList').resetCommentListsForFeedbackTargetID(n.ftentidentifier);c('UFIToplevelStreamedCommentList').resetAllCommentLists(n.ftentidentifier);}}));};m.prototype.$UFIController17=function(n,o){this.$UFIController21();var p=Date.now(),q=[];if(n.ll)q.push(c('UFILikeSubscription').subscribe(n.targetfbid,function(s){c('UFISubscriptionUpdates').handleLiveLike(o.ftentidentifier,s,Date.now()-p);}));if(n.pagelc)q.push(c('UFIPageCommentSubscription').subscribe(n.targetfbid,function(s){c('UFISubscriptionUpdates').handleLiveComment(o.ftentidentifier,s.page_comment_create_subscribe,Date.now()-p);}));if(n.lc)q.push(c('UFICommentSubscription').subscribe(n.targetfbid,function(s){c('UFISubscriptionUpdates').handleLiveComment(o.ftentidentifier,s.comment_create_subscribe,Date.now()-p);}));if(n.lcl)q.push(c('UFICommentLikeSubscription').subscribe(n.targetfbid,function(s){c('UFISubscriptionUpdates').handleLiveCommentLike(o.ftentidentifier,s,Date.now()-p);}));if(n.lti&&c('UFIConfig').typingIndicator.subscribe)q.push(c('UFITypingSubscriptionControllerFactory').forUFIController(n,o));if(n.istipjarenabled)c('requireWeak')('UFILiveStreamingComments',function(s){q.push(c('UFILiveTipJarSubscription').subscribe(n.targetfbid,function(t){s.enqueueSubscribedTipJarEvent(n,t);}));});var r=new (c('SubscriptionsHandler'))();r.addSubscriptions.apply(r,q.filter(function(s){return !!s;}));this.$UFIController7=r;};m.prototype.$UFIController22=function(){var n=c('UFIFeedbackStore').getState()[this.$UFIController2.ftentidentifier];if(n)this.$UFIController17(n,this.$UFIController2);};m.prototype.scrollToTopOfCommentsInViewer=function(){c('Arbiter').inform(c('UFIUIEvents').AutoplayLiveComments,{form:this.$UFIController4.getParentForm()});};m.prototype.$UFIController23=function(){var n=this.$UFIController4.getHeadRoot();if(n)c('ReactDOM').unmountComponentAtNode(n);if(c('UFIRootRegistry').isSnowliftNode(this.$UFIController2.rootid)){var o=this.$UFIController4.getSnowliftActionRoot();if(o)c('ReactDOM').unmountComponentAtNode(o);}c('ReactDOM').unmountComponentAtNode(this.root);};m.prototype.unitTestOnlySetFeedbackIntoState=function(n){this.$UFIController10.feedback=n;};m.prototype.$UFIController14=function(){if(!this.$UFIController12){this.$UFIController3=new (c('UFIDispatcher'))();this.$UFIController11={UFICallbackStore:new (c('UFICallbackStore'))(this.$UFIController3),UFIReactionStore:new (c('UFIReactionStore'))(this.$UFIController3)};this.$UFIController12=new (c('SubscriptionsHandler'))();this.$UFIController12.addSubscriptions(this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_LIKE,function(n){c('UFIUserActions').changeCommentLike(n.comment.id,n.like,{source:this.$UFIController2.source,target:n.target});}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').CHANGE_REACTION,function(n){c('UFIUserActions').changeCommentReaction(n.comment.id,n.reactionType,{source:this.$UFIController2.source,instanceid:this.$UFIController2.instanceid},n.target);}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').REMOVE,function(n){c('Bootloader').loadModules(["UFICommentRemoveDialog"],function(o){return o.show(function(){c('UFIUserActions').removeComment(n.comment.id,{source:this.$UFIController2.source,oneclick:false,target:n.target});n.onConfirm();}.bind(this));}.bind(this),'UFIController');}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').DELETE_COMMENT_AND_REMOVE_COMMENTER,function(n){c('Bootloader').loadModules(["UFICommentDeleteAndMemberRemoveDialog"],function(o){o.showEx(n.comment.author_name,n,{source:this.$UFIController2.source,oneclick:false,target:n.target});}.bind(this),'UFIController');}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TRANSLATE,function(n){if(!this.$UFIController10.commentsLoadingTranslations[n.comment.id]){this.$UFIController10.commentsLoadingTranslations[n.comment.id]=true;c('UFIUserActions').translateComments(n.comment.ftentidentifier,[n.comment.id],n.trigger,{source:this.$UFIController2.source,target:n.target});if(c('UFICommentUtils').shouldShowTranslateAll(this.comments,this.repliesMap,babelHelpers['extends']({},this.$UFIController10.defaultRepliesExpandedMap,this.$UFIController10.repliesExpandedMap),this.$UFIController10.commentsLoadingTranslations))this.$UFIController10.translateAllCommentID=n.comment.id;this.render();}}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,function(n){c('UFIUserActions').setHideAsSpam(n.comment.id,n.is_spam,{source:this.$UFIController2.source,target:n.target});}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_KEEP_SPAM,function(n){c('UFIUserActions').keepSpam(n.comment.id,{source:this.$UFIController2.source,target:n.target});}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_APPEAL_SPAM,function(n){c('UFIUserActions').appealSpam(n.comment.id,n.feedback.actorname,{source:this.$UFIController2.source,target:n.target});}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_SECURE_ACCOUNT,function(n){c('Bootloader').loadModules(["UFICommentSecureAccountDialog"],function(o){return o.show(function(){c('UFIUserActions').secureAccount(n.comment.id,{source:this.$UFIController2.source,target:n.target});}.bind(this),n.feedback.actorname);}.bind(this),'UFIController');}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIStoryActionType').CHANGE_ACCEPTED_ANSWER,function(n){c('UFIUserActions').changeAcceptedAnswer(n.comment,n.doAccept);}),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_INLINE_BAN,function(n){return c('UFIUserActions').banUser(n.comment,n.ownerid,n.is_banned,{source:this.$UFIController2.source,target:n.target});}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').EMBED,function(n){var o=c('XCommentEmbedPluginEmbedAsyncDialogController').getURIBuilder().setString('comment_id',n.comment.id).getURI();new (c('AsyncRequest'))(o).send();}),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').MANAGE_CONSTITUENT_BADGE,function(n){c('UFIUserActions').manageConstituentBadge(n.comment);}),this.$UFIController11.UFICallbackStore.on(c('UFIAddCommentActionType').SUBMIT_NEW,function(n){var o=this.$UFIController4.getParentForm();if(o)c('UFINewCommentNotifier').onNewComment(o,this.$UFIController2,n.comment,n.target,n.replyCommentID,n.timestamp);}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIAddCommentActionType').SUBMIT_EDIT,function(n){var o=n.comment,p=n.commentData,q=n.target;if(!p.visibleValue&&!p.attachedPhoto&&!p.attachedVideo&&!p.attachedSticker&&!p.attachedShareURL){c('Bootloader').loadModules(["UFICommentRemoveDialog"],function(r){return r.show(function(){return c('UFIUserActions').removeComment(o.id,{source:this.$UFIController2.source,oneclick:false,target:q});}.bind(this));}.bind(this),'UFIController');}else c('UFIUserActions').editComment(o.id,p.visibleValue,p.encodedValue,{source:this.$UFIController2.source,target:q,attachedPhoto:p.attachedPhoto,attachedVideo:p.attachedVideo,attachedSticker:p.attachedSticker,attachedShareURL:p.attachedShareURL});}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').REMOVE_PREVIEW,function(n){return c('UFIUserActions').removePreview(n.comment,{source:this.$UFIController2.source,target:n.target});}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIAddCommentActionType').RETRY_SUBMIT,function(n){return c('UFIRetryActions').retrySubmit(n.comment,this.$UFIController2.source);}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIStoryActionType').PAGE_IN_COMMENTS,function(n){this.$UFIController10.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;this.$UFIController24(n.commentID,n.direction,n.nextRange);this.fetchAndUpdateWithLogs(c('FeedbackPayloadSourceType').USER_ACTION);}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIStoryActionType').TOGGLE_REPLIES,function(n){this.$UFIController10.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;var o=n.commentID,p=this.$UFIController10.repliesExpandedMap[o];if(p){delete this.$UFIController10.isActiveLoading[o];this.$UFIController10.repliesExpandedMap[o]=false;this.render();}else{this.$UFIController10.focusedReplyComposer={replyID:'replycomposer-'+o,initiatorComment:null};this.$UFIController24(o,c('UFIPaging').BOTTOM,this.$UFIController25(o));this.fetchAndUpdateWithLogs(c('FeedbackPayloadSourceType').USER_ACTION);}}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIStoryActionType').SHOW_REPLIES,function(n){this.$UFIController10.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;this.$UFIController10.focusedReplyComposer={replyID:'replycomposer-'+n.commentID,initiatorComment:n.initiatorComment};this.$UFIController24(n.commentID,c('UFIPaging').BOTTOM,this.$UFIController25(n.commentID));this.fetchAndUpdateWithLogs(c('FeedbackPayloadSourceType').USER_ACTION);}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIStoryActionType').COMMENTS_ARRIVED,function(n){this.$UFIController10.payloadSource=n.source;this.$UFIController10.showLoadingUFI=false;this.$UFIController10.isActiveLoading={};this.$UFIController10.commentIDToFocusOnMount=n.source===c('FeedbackPayloadSourceType').USER_ACTION&&!this.$UFIController2.isBroadcasterUFI?this.$UFIController26(n.newOffset,n.newLength):null;this.$UFIController10.oldRange={offset:n.newOffset,length:n.newLength};this.$UFIController27();if(this.$UFIController10.shouldTranslateAllVisibleComments&&!c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid))this.$UFIController28();this.render();if(n.source==c('FeedbackPayloadSourceType').ENDPOINT_COMMENT_FETCH){c('Arbiter').inform(c('UFIUIEvents').CommentPager);if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetchReceived(this.$UFIController2.ftentidentifier,Date.now());}}.bind(this)));}};m.prototype.$UFIController15=function(){this.$UFIController9=[c('UFISharedDispatcher').register(function(n){switch(n.type){case c('UFIInstanceActionType').REMOVE:if(n.instanceID!==this.$UFIController2.instanceid){if(n.ftentidentifier===this.$UFIController2.ftentidentifier)this.$UFIController22();return;}c('UFIRootRegistry').cleanupInstance(n.instanceID);break;case c('UFIInstanceActionType').TOGGLE_COMMENTS:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.payloadSource=c('FeedbackPayloadSourceType').COLLAPSE_ACTION;this.$UFIController10.isHidden=!this.$UFIController10.isHidden;this.render();break;case c('UFIInstanceActionType').CHANGE_ORDER_MODE:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;this.$UFIController10.showLoadingUFI=true;this.render();this.fetchAndUpdate(c('FeedbackPayloadSourceType').USER_ACTION);break;case c('UFIInstanceActionType').REQUESTED_VOD_COMMENTS:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.loadingVODComments=true;this.render();break;case c('UFIInstanceActionType').RECEIVED_VOD_COMMENTS:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.loadingVODComments=false;this.render();break;case c('UFIStoryActionType').LIVE_PIN_COMMENT:if(n.ftentidentifier!==this.$UFIController2.ftentidentifier)return;var o=c('UFIComments').getComment(n.commentID),p=o?o.author:null;if(p)c('ShortProfiles').get(p,function(q){this.authorProfiles[p]=q;if(!this.$UFIController6)this.render();}.bind(this));break;case c('UFIStoryActionType').LIVE_UNPIN_COMMENT:if(n.ftentidentifier!==this.$UFIController2.ftentidentifier)return;this.render();break;case c('UFIStoryActionType').SHOW_COMMENTS:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.isHidden=false;this.$UFIController10.focusTopLevelComposer=true;c('CommentPrelude').expand(this.root,false,'ufi_controller');if(this.staticUFI)c('CommentPrelude').expand(this.staticUFI,false,'ufi.react');this.render();break;case c('UFIInstanceActionType').TRANSLATE_ALL:if(n.instanceID!==this.$UFIController2.instanceid)return;if(this.$UFIController2.islivestreaming)break;this.$UFIController10.shouldTranslateAllVisibleComments=true;this.$UFIController10.translateAllCommentID=null;this.$UFIController28();this.render();break;}}.bind(this))];};m.prototype.getStores=function(){return this.$UFIController11;};m.prototype.$UFIController25=function(n){var o=this.commentcounts[n],p=Math.min(o,this.$UFIController2.pagesize);return new (c('UFIRange'))(o-p,p);};m.prototype.$UFIController24=function(n,o,p){var q=this.$UFIController10,r=q.isActiveLoading,s=q.allSeenActiveLoadDirectionData,t=q.repliesExpandedMap,u=q.toplevelPagerClickCounts,v=q.replyPagerClickCounts,w=this.$UFIController2.ftentidentifier,x=n!==w;r[n]=o;var y=s[n]||{};y[o]=true;s[n]=y;if(x){t[n]=true;}else this.$UFIController10.hasPagedToplevel=true;if(n==w){var z=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid),aa=u[z]||0;u[z]=aa+1;this.getRange().updateRequestedRange(p.offset,p.length);}else{var ba=v[n]||0;v[n]=ba+1;this.replyRanges[n].updateRequestedRange(p.offset,p.length);}};m.prototype.$UFIController29=function(){this.$UFIController10.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;this.$UFIController10.showLoadingUFI=true;this.$UFIController10.requestedInitialComments=true;var n=this.getToplevelCommentList().getCommentCount(),o=Math.min(n,this.$UFIController2.numLazyComments||0);c('forEachObject')(this.ranges,function(p){return p.updateRequestedRange(n-o,o);});this.fetchAndUpdate(c('FeedbackPayloadSourceType').USER_ACTION);c('UFIFeedbackTargets').getFeedbackTarget(this.$UFIController2.ftentidentifier,function(p){if(this.canRenderHeader()){this.renderHeader(p);}else this.$UFIController20(p);}.bind(this));};m.prototype.$UFIController20=function(n){if(this.shouldShowCommentOrderingModeSelector(n))c('DOM').scry(this.root,"^form ._3csb").slice(0,1).forEach(function(o){c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelectorContainer.react').__setRef('UFIController'),contextArgs:this.$UFIController2,feedback:n})),o);}.bind(this));};m.prototype.$UFIController27=function(){if(Object.keys(this.$UFIController10.commentsLoadingTranslations).length==0)return;this.comments.forEach(function(n){if(this.$UFIController10.commentsLoadingTranslations[n.id]&&!!n.translationdata)delete this.$UFIController10.commentsLoadingTranslations[n.id];}.bind(this));Object.keys(this.repliesMap).forEach(function(n){var o=this.repliesMap[n];o.forEach(function(p){if(this.$UFIController10.commentsLoadingTranslations[p.id]&&!!p.translationdata)delete this.$UFIController10.commentsLoadingTranslations[p.id];}.bind(this));}.bind(this));};m.prototype.$UFIController28=function(){var n=this.comments.filter(function(q){return this.$UFIController30(q);}.bind(this)).map(function(q){return q.id;}),o=babelHelpers['extends']({},this.$UFIController10.defaultRepliesExpandedMap,this.$UFIController10.repliesExpandedMap),p=[];Object.keys(this.repliesMap).filter(function(q){return o[q];}).forEach(function(q){p=p.concat(this.repliesMap[q]);}.bind(this));n=n.concat(p.filter(function(q){return this.$UFIController30(q);}.bind(this)).map(function(q){return q.id;}));if(n.length>0){n.forEach(function(q){return this.$UFIController10.commentsLoadingTranslations[q]=true;}.bind(this));c('UFIUserActions').translateComments(this.$UFIController2.ftentidentifier,n,c('TranslationTrigger').TRANSLATE_ALL,{source:this.$UFIController2.source});}};m.prototype.$UFIController30=function(n){return n.istranslatable&&!n.translationdata&&!this.$UFIController10.commentsLoadingTranslations[n.id];};m.prototype.canRenderHeader=function(){return !!this.$UFIController4.getHeadRoot();};m.prototype.renderHeader=function(n){if(!this.canRenderHeader())return;var o=!!this.$UFIController2.hasReactions&&(this.$UFIController2.feedbackMode==='none'||this.$UFIController2.feedbackMode==='toggle')&&n.displayreactions&&this.shouldShowCommentOrderingModeSelector(n)&&(!this.$UFIController2.lazyFetch||this.$UFIController10.requestedInitialComments);c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,c('React').createElement(c('UFIActionHeader.react'),{contextArgs:this.$UFIController2,dispatcher:this.$UFIController3,feedbacktarget:n,showCommentOrderingModeSelector:o,stores:this.$UFIController11})),this.$UFIController4.getHeadRoot());var p=c('UFIRootRegistry').isSnowliftNode(this.$UFIController2.rootid);if(p&&this.$UFIController4.getSnowliftActionRoot())c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController3,stores:this.$UFIController11},c('React').createElement(c('UFIActionLinks.react'),{contextArgs:this.$UFIController2,feedbacktarget:n,showCommentOrderingModeSelector:o,hideActorSelector:true}))),this.$UFIController4.getSnowliftActionRoot());};m.prototype.shouldComponentUpdate=function(){if(this.$UFIController2.islivestreaming&&(this.$UFIController10.payloadSource===c('FeedbackPayloadSourceType').STREAMING||this.$UFIController10.payloadSource===c('FeedbackPayloadSourceType').LIVE_SEND)){var n=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerController(this.$UFIController2.instanceid),o=n?n.isState('playing')&&!n.getOption('WatchAndScroll','isActive'):false,p=c('UFICommentVisibilityStore').getVisibility(c('UFICommentVisibilityStore').getState(),this.$UFIController2)===c('UFIVisibility').VISIBLE;return o||p;}return true;};m.prototype.render=function(){if(!this.shouldComponentUpdate())return;if(this.$UFIController10.showLoadingUFI||c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid)&&this.$UFIController10.loadingVODComments){c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,this.$UFIController31()),this.root);return;}this.$UFIController10.feedback||i(0);var n=this.$UFIController10.feedback,o=n.reactionsentences,p=n.likesentences,q=n.replysocialsentencemaxreplies,r=this.comments.length||!c('isEmpty')((o||p).current),s=this.$UFIController10.payloadSource;if(r&&l(s)&&this.$UFIController2.feedbackMode!==c('UFIFeedbackMode').NEVER){this.$UFIController10.isHidden=false;c('CommentPrelude').expand(this.root,false,'ufi_controller');}if(this.$UFIController2.disableCSSHiding&&this.$UFIController10.isHidden){c('ReactDOM').unmountComponentAtNode(this.root);return;}if(this.$UFIController2.lazyFetch&&!this.$UFIController10.requestedInitialComments){c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,this.$UFIController31()),this.root);this.$UFIController29();return;}var t=this.getRange();if(this.$UFIController8===null)this.$UFIController8=t.getOffset()+t.getLength()-1;var u=q||-1,v={};v[this.$UFIController2.ftentidentifier]=new (c('UFIRange'))(t.offset,t.length).updateRequestedRange(t.requestedOffset,t.requestedLength);for(var w in this.replyRanges)v[w]=new (c('UFIRange'))(this.replyRanges[w].offset,this.replyRanges[w].length).updateRequestedRange(this.replyRanges[w].requestedOffset,this.replyRanges[w].requestedLength);var x=babelHelpers['extends']({},this.$UFIController10.defaultRepliesExpandedMap,this.$UFIController10.repliesExpandedMap),y=!!this.$UFIController10.featuredCommentLists[this.$UFIController2.ftentidentifier],z=c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid)?true:this.getToplevelCommentList().getClientHasAll()&&t.offset===0&&t.length===this.getToplevelCommentList().getCommentCount(),aa=this.$UFIController10.focusTopLevelComposer,ba=this.$UFIController32(s),ca=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid),da=c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController3,stores:this.$UFIController11},c('React').createElement(c('StaticUFI.react'),{ref:function(fa){this.staticUFI=fa;}.bind(this),feedback:this.$UFIController10.feedback,contextArgs:this.$UFIController2,repliesMap:this.repliesMap,commentCounts:this.commentcounts,deletedCounts:this.$UFIController10.deletedCounts,availableComments:this.comments,source:this.$UFIController2.source,payloadSource:s,ranges:v,authorProfiles:this.authorProfiles,loggingOffset:this.$UFIController8,replySocialSentenceMaxReplies:u,orderingMode:ca,hideOrderingModeSelector:y,commentPermalinks:this.$UFIController10.commentPermalinks,canAddCommentMap:this.$UFIController10.canAddCommentMap,canReplyMap:this.$UFIController10.canReplyMap,focusTopLevelComposer:aa,focusReply:ba,isActiveLoading:this.$UFIController10.isActiveLoading,allSeenActiveLoadDirectionData:this.$UFIController10.allSeenActiveLoadDirectionData,repliesExpandedMap:x,hasPagedToplevel:this.$UFIController10.hasPagedToplevel,commentIDToFocusOnMount:this.$UFIController10.commentIDToFocusOnMount,hideToplevelPager:z,featuredCommentIDs:this.$UFIController10.featuredCommentIDs,loadingTranslationsMap:this.$UFIController10.commentsLoadingTranslations,translateAllCommentID:this.$UFIController10.translateAllCommentID}));c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,da),this.root);c('LiveTimer').updateTimeStamps();var ea=this.$UFIController4.getParentForm();if(ea)c('Arbiter').inform(c('UFIUIEvents').Changed,{form:ea});if(s!=c('FeedbackPayloadSourceType').INITIAL_SERVER)c('Arbiter').inform('reflow');this.$UFIController10.focusedReplyComposer=null;this.$UFIController10.focusTopLevelComposer=false;};m.prototype.$UFIController32=function(n){if(n===c('FeedbackPayloadSourceType').INITIAL_SERVER&&this.$UFIController10.feedback&&this.$UFIController10.feedback.permalinkcommentid){return {replyID:'replycomposer-'+this.$UFIController10.feedback.permalinkcommentid};}else if(this.$UFIController10.focusedReplyComposer)return this.$UFIController10.focusedReplyComposer;return null;};m.prototype.$UFIController26=function(n,o){var p=this.$UFIController10.oldRange;if(p&&(p.offset!=n||p.length!=o)){var q=n<p.offset?p.length:0;if(q<o)return this.comments[q].id;}return this.$UFIController10.commentIDToFocusOnMount;};m.prototype.$UFIController33=function(n,o,p){if(n&&o.id===n.permalinkcommentid)return true;if(p>1)return true;if(p>0&&o.interestingReplyOffset===undefined)return true;var q=n&&o.author===n.viewerid;if(q&&p==1)return true;return false;};m.prototype.getNewRange=function(n,o,p){if(c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid)){return new (c('UFIRange'))(0,o.feedcarded?4:50);}else return k(this.getRange(),this.commentcounts[o.ftentidentifier],p,n);};m.prototype.getNewReplyRange=function(n,o,p){var q=o.id;if(this.replyRanges[q]){return k(this.getReplyRange(q),this.commentcounts[q],p,n);}else if(o.interestingReplyOffset!==undefined){return new (c('UFIRange'))(o.interestingReplyOffset,1);}else{var r=this.$UFIController10.feedback&&this.$UFIController10.feedback.isranked,s=r?0:Math.min(p,2);return new (c('UFIRange'))(0,s);}};m.prototype.fetchAndUpdateWithLogs=function(n){n===this.$UFIController10.payloadSource||i(0);this.$UFIController34(n,true);};m.prototype.fetchAndUpdate=function(n){n===this.$UFIController10.payloadSource||i(0);this.$UFIController34(n,false);};m.prototype.$UFIController35=function(n){var o=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);return {numPagerClicks:n?this.$UFIController10.toplevelPagerClickCounts[o]||0:null,viewAs:this.$UFIController2.viewas,feedContext:this.$UFIController2.feedcontext,feedbackSource:this.$UFIController2.source,streamingOrderReversed:this.$UFIController2.streamingCommentOrderReversed};};m.prototype.$UFIController36=function(n,o){return {numPagerClicks:o?this.$UFIController10.replyPagerClickCounts[n]||0:null,viewAs:this.$UFIController2.viewas,feedContext:this.$UFIController2.feedcontext};};m.prototype.$UFIController37=function(n){var o=this.$UFIController10.feedback,p=this.getToplevelCommentList(),q=this.getNewRange(n,this.$UFIController2,p.getCommentCount()),r=c('UFIFetcher').fetchCommentsOrThrow(p,q,this.$UFIController35(false));this.$UFIController38(q,r);var s=c('UFICommentFilters').getAuthors(r);r.forEach(function(v){var w=v.id,x=this.getReplyCommentList(w),y=this.getNewReplyRange(n,v,x.getCommentCount()),z=c('UFIFetcher').fetchCommentsOrThrow(x,y,this.$UFIController36(w,false));s.push.apply(s,c('UFICommentFilters').getAuthors(z));this.$UFIController39(y,v,z);}.bind(this));if(o)s.push.apply(s,c('UFIFeedbackFilters').getRequestedIDs(o));var t=c('UFILivePinnedCommentStore').getPinnedCommentAuthorID(this.$UFIController2.ftentidentifier);if(t)s.push(t);if(o&&o.acceptedanswer){var u=c('UFIComments').getComment(o.acceptedanswer);if(u&&u.author)s.push(u.author);}Object.assign(this.authorProfiles,c('ShortProfiles').getMultiNow(s));};m.prototype.$UFIController34=function(n,o){var p=c('UFIFeedbackTargets').getFeedbackTargetIfExists(this.$UFIController2.ftentidentifier);if(!p){var q=new Error(c('ex')('Feedback target %s not present while rendering UFI with source %s',this.$UFIController2.ftentidentifier,n));q.type='warn';c('ErrorUtils').reportError(q,true);return;}this.$UFIController10.feedback=p;if(l(n))this.render();if(this.canRenderHeader())this.renderHeader(p);if(!this.$UFIController10.isHidden)if(n===c('FeedbackPayloadSourceType').INITIAL_SERVER){this.$UFIController37(n);this.$UFIController3.dispatch(c('UFIStoryAction').commentsArrived(this.$UFIController2,this.getRange().getOffset(),this.comments.length,n));}else this.fetchAllComments(n,o).done(function(){return this.$UFIController3.dispatch(c('UFIStoryAction').commentsArrived(this.$UFIController2,this.getRange().getOffset(),this.comments.length,n));}.bind(this));};m.prototype.fetchAllComments=function(n,o){return c('Promise').resolve().then(function(){return this.fetchCommentsForFeedbackTarget(n,o).then(function(p){var q=c('UFICommentFilters').getAuthors(p);if(!this.$UFIController10.feedback||!this.$UFIController10.feedback.isthreaded||!p.length)return q;return this.fetchAllReplyIDsForComments(p,n,o).then(function(r){return q.concat(r);});}.bind(this)).then(function(p){if(!this.$UFIController10.feedback)return [];return c('UFIFeedbackFilters').getRequestedIDs(this.$UFIController10.feedback).concat(p);}.bind(this));}.bind(this)).then(function(p){var q=this.$UFIController10.feedback,r=c('UFILivePinnedCommentStore').getPinnedCommentAuthorID(this.$UFIController2.ftentidentifier);if(r)p.push(r);if(q&&q.acceptedanswer){var s=c('UFIComments').getComment(q.acceptedanswer);if(s&&s.author)p.push(s.author);}return c('UFIFetcher').fetchShortProfiles(p);}.bind(this)).then(function(p){Object.assign(this.authorProfiles,p);}.bind(this));};m.prototype.fetchCommentsForFeedbackTarget=function(n,o){var p=this.getToplevelCommentList().getCommentCount(),q=this.getNewRange(n,this.$UFIController2,p);return c('UFIFetcher').fetchComments(this.getToplevelCommentList(),q,this.$UFIController35(o)).then(function(r){this.$UFIController38(q,r);return r;}.bind(this));};m.prototype.$UFIController38=function(n,o){var p=this.getToplevelCommentList(),q=this.$UFIController2.ftentidentifier,r=this.$UFIController10,s=r.deletedCounts,t=r.canAddCommentMap,u=r.canReplyMap,v=r.commentPermalinks;this.replaceRange(n);this.comments=o;this.commentcounts[q]=p.getCommentCount();s[q]=p.getDeletedCount();t[q]=!this.$UFIController10.featuredCommentLists[q];o.forEach(function(w){var x=w.id,y=w.cancomment;u[x]=y;v[x]=p.getPermalinkForComment(x);});};m.prototype.fetchRepliesForComment=function(n,o,p){var q=n.id,r=this.getReplyCommentList(q).getCommentCount(),s=this.getNewReplyRange(o,n,r);return c('UFIFetcher').fetchComments(this.getReplyCommentList(q),s,this.$UFIController36(q,p)).then(function(t){this.$UFIController39(s,n,t);return t;}.bind(this));};m.prototype.$UFIController39=function(n,o,p){var q=o.id,r=this.getReplyCommentList(q),s=this.$UFIController10,t=s.deletedCounts,u=s.canAddCommentMap,v=s.featuredCommentLists,w=s.defaultRepliesExpandedMap,x=s.feedback,y=s.canReplyMap,z=s.commentPermalinks;this.replaceReplyRange(q,n);this.repliesMap[q]=p;this.commentcounts[q]=r.getCommentCount();t[q]=r.getDeletedCount();u[q]=!v[q];w[q]=this.$UFIController33(x,o,p.length);p.forEach(function(aa){var ba=aa.id,ca=aa.cancomment;y[ba]=ca;z[ba]=r.getPermalinkForComment(ba);});};m.prototype.fetchAllReplyIDsForComments=function(n,o,p){var q=new (c('Promise').all)(n.map(function(r){return this.fetchRepliesForComment(r,o,p).then(function(s){return c('UFICommentFilters').getAuthors(s);});}.bind(this)));return q.then(c('flattenArray'));};m.prototype.getToplevelCommentList=function(){var n=this.$UFIController2;if(this.$UFIController10.featuredCommentLists[n.ftentidentifier])return this.$UFIController10.featuredCommentLists[n.ftentidentifier];if(c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid))return c('UFIToplevelStreamedCommentList').getCommentList(n.ftentidentifier,n.islivestreaming?c('UFIToplevelStreamedCommentList').GLOBAL_ID:n.instanceid);var o=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);return c('UFIToplevelPagedCommentList').getCommentList(n.ftentidentifier,o);};m.prototype.getReplyCommentList=function(n){if(n in this.$UFIController10.featuredCommentLists)return this.$UFIController10.featuredCommentLists[n];var o=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);return c('UFIReplyCommentList').getCommentList(this.$UFIController2.ftentidentifier,n,o);};m.prototype.getRange=function(){var n=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);if(!(n in this.ranges)){var o=this.getToplevelCommentList().getCommentCount(),p=Math.min(o,this.$UFIController2.defaultNumCommentsToExpand);this.ranges[n]=new (c('UFIRange'))(o-p,p);}return this.ranges[n];};m.prototype.replaceRange=function(n){var o=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);this.ranges[o]=n;};m.prototype.getReplyRange=function(n){if(!(n in this.replyRanges))this.replyRanges[n]=new (c('UFIRange'))();return this.replyRanges[n];};m.prototype.replaceReplyRange=function(n,o){this.replyRanges[n]=o;};m.prototype.$UFIController16=function(){this.$UFIController6=true;this.$UFIController23();this.$UFIController40();};m.prototype.$UFIController40=function(){this.$UFIController41();this.$UFIController42();this.$UFIController21();this.$UFIController43();this.$UFIController44();this.$UFIController45();if(this.onUnloadSubscription)this.onUnloadSubscription.remove();c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').remove(this.$UFIController2));};m.prototype.$UFIController19=function(){this.$UFIController21();};m.prototype.$UFIController45=function(){var n=this.$UFIController2;c('UFICommercialBreakAdapter').stop(n.instanceid);};m.prototype.$UFIController44=function(){var n=this.$UFIController2;c('UFIVODStreamingComments').stop(n.ftentidentifier,n.instanceid);};m.prototype.$UFIController41=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(n){return n&&c('UFICentralUpdates').unsubscribe(n);});};m.prototype.$UFIController42=function(){this.$UFIController1&&this.$UFIController1.release();};m.prototype.$UFIController21=function(){this.$UFIController7&&this.$UFIController7.release();};m.prototype.$UFIController43=function(){if(this.$UFIController12){this.$UFIController12.release();this.$UFIController12=null;}this.$UFIController9.forEach(function(n){return c('UFISharedDispatcher').unregister(n);});};m.prototype.$UFIController31=function(){var n=this.$UFIController2;return c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController3,stores:this.$UFIController11},c('React').createElement(c('StaticUFI.react'),{feedback:this.$UFIController10.feedback,id:this.$UFIController2.ftentidentifier,contextArgs:n,commentCounts:this.commentcounts,loadingComments:true}));};m.prototype.shouldShowCommentOrderingModeSelector=function(n){var o=this.getToplevelCommentList().getCommentCount()||n.commentcount||0;return n.orderingmodes&&o>=c('UFIConstants').minCommentsForOrderingModeSelector&&!this.$UFIController10.featuredCommentLists[this.$UFIController2.ftentidentifier];};f.exports=m;}),18);
__d('MultiBootstrapDataSource',['DataSource'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('DataSource'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this._bootstrapEndpoints=k.bootstrapEndpoints;}j.prototype.bootstrapWithoutToken=function(){'use strict';for(var k=0;k<this._bootstrapEndpoints.length;k++)this.fetch(this._bootstrapEndpoints[k].endpoint,this._bootstrapEndpoints[k].data||{},{bootstrap:true});};f.exports=j;}),null);